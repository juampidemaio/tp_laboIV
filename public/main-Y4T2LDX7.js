import{$ as Di,A as mn,B as Vo,C as Ce,D as Re,E as xo,F as jt,G as Tr,H as vt,I as Oo,J as Zl,K as ye,L as z,M as Mo,N as Ar,O as It,P as gn,Q as eh,R as tt,S as Fo,T as N,U as V,V as nt,W as _n,X as fe,Y as Gt,Z as F,_ as th,a as Se,aa as yn,b as Ve,ba as vn,c as yt,ca as In,d as _,da as br,e as Co,ea as Fe,f as zl,fa as Lo,g as Wl,ga as nh,h as Hl,ha as rh,i as Kl,ia as ih,j as Ro,ja as sh,k as Po,ka as Uo,l as Do,la as Sr,m as Ql,ma as Et,n as Jl,na as Bo,o as Yl,oa as En,p as Xl,pa as wn,q as Pi,qa as oh,r as Ir,ra as ah,s as Er,sa as wt,t as ko,ta as ch,u as xe,ua as uh,v as wr,va as lh,w as Oe,x as Me,y as No,z as Be}from"./chunk-UQWKHIJL.js";var vh=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(z(Mo),z(Oo))},e.\u0275dir=Be({type:e});let n=e;return n})(),gm=(()=>{let e=class e extends vh{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=xo(e)))(o||e)}})(),e.\u0275dir=Be({type:e,features:[It]});let n=e;return n})(),Ih=new xe("");var _m={provide:Ih,useExisting:Ir(()=>Cn),multi:!0};function ym(){let n=Bo()?Bo().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var vm=new xe(""),Cn=(()=>{let e=class e extends vh{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!ym())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(z(Mo),z(Oo),z(vm,8))},e.\u0275dir=Be({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&fe("input",function(l){return o._handleInput(l.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(l){return o._compositionEnd(l.target.value)})},features:[br([_m]),It]});let n=e;return n})();function Im(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var jo=new xe(""),Eh=new xe("");function Em(n){return Im(n.value)?{required:!0}:null}function hh(n){return null}function wh(n){return n!=null}function Th(n){return rh(n)?Ql(n):n}function Ah(n){let e={};return n.forEach(t=>{e=t!=null?Se(Se({},e),t):e}),Object.keys(e).length===0?null:e}function bh(n,e){return e.map(t=>t(n))}function wm(n){return!n.validate}function Sh(n){return n.map(e=>wm(e)?e:t=>e.validate(t))}function Tm(n){if(!n)return null;let e=n.filter(wh);return e.length==0?null:function(t){return Ah(bh(t,e))}}function Go(n){return n!=null?Tm(Sh(n)):null}function Am(n){if(!n)return null;let e=n.filter(wh);return e.length==0?null:function(t){let r=bh(t,e).map(Th);return Yl(r).pipe(Jl(Ah))}}function $o(n){return n!=null?Am(Sh(n)):null}function dh(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function bm(n){return n._rawValidators}function Sm(n){return n._rawAsyncValidators}function qo(n){return n?Array.isArray(n)?n:[n]:[]}function Ni(n,e){return Array.isArray(n)?n.includes(e):n===e}function fh(n,e){let t=qo(e);return qo(n).forEach(i=>{Ni(t,i)||t.push(i)}),t}function ph(n,e){return qo(e).filter(t=>!Ni(n,t))}var Vi=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Go(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=$o(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},bn=class extends Vi{get formDirective(){return null}get path(){return null}},Nr=class extends Vi{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},xi=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Cm={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},QE=Ve(Se({},Cm),{"[class.ng-submitted]":"isSubmitted"}),Li=(()=>{let e=class e extends xi{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(z(Nr,2))},e.\u0275dir=Be({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&Fo("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[It]});let n=e;return n})(),Ui=(()=>{let e=class e extends xi{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(z(bn,10))},e.\u0275dir=Be({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&Fo("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[It]});let n=e;return n})();var Cr="VALID",ki="INVALID",Tn="PENDING",Rr="DISABLED",Sn=class{},Oi=class extends Sn{constructor(e,t){super(),this.value=e,this.source=t}},Dr=class extends Sn{constructor(e,t){super(),this.pristine=e,this.source=t}},kr=class extends Sn{constructor(e,t){super(),this.touched=e,this.source=t}},An=class extends Sn{constructor(e,t){super(),this.status=e,this.source=t}};function Ch(n){return(Bi(n)?n.validators:n)||null}function Rm(n){return Array.isArray(n)?Go(n):n||null}function Rh(n,e){return(Bi(e)?e.asyncValidators:n)||null}function Pm(n){return Array.isArray(n)?$o(n):n||null}function Bi(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function Dm(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new Pi(1e3,"");if(!r[t])throw new Pi(1001,"")}function km(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new Pi(1002,"")})}var Mi=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Sr(()=>this.statusReactive()),this.statusReactive=Ar(void 0),this._pristine=Sr(()=>this.pristineReactive()),this.pristineReactive=Ar(!0),this._touched=Sr(()=>this.touchedReactive()),this.touchedReactive=Ar(!1),this._events=new zl,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Et(this.statusReactive)}set status(e){Et(()=>this.statusReactive.set(e))}get valid(){return this.status===Cr}get invalid(){return this.status===ki}get pending(){return this.status==Tn}get disabled(){return this.status===Rr}get enabled(){return this.status!==Rr}get pristine(){return Et(this.pristineReactive)}set pristine(e){Et(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Et(this.touchedReactive)}set touched(e){Et(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(fh(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(fh(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(ph(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(ph(e,this._rawAsyncValidators))}hasValidator(e){return Ni(this._rawValidators,e)}hasAsyncValidator(e){return Ni(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Ve(Se({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new kr(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new kr(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Ve(Se({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Dr(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Dr(!0,r))}markAsPending(e={}){this.status=Tn;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new An(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Ve(Se({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Rr,this.errors=null,this._forEachChild(i=>{i.disable(Ve(Se({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Oi(this.value,r)),this._events.next(new An(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ve(Se({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Cr,this._forEachChild(r=>{r.enable(Ve(Se({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ve(Se({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Cr||this.status===Tn)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Oi(this.value,t)),this._events.next(new An(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Ve(Se({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Rr:Cr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Tn,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=Th(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new An(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Tr,this.statusChanges=new Tr}_calculateStatus(){return this._allControlsDisabled()?Rr:this.errors?ki:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Tn)?Tn:this._anyControlsHaveStatus(ki)?ki:Cr}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Dr(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new kr(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Bi(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Rm(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Pm(this._rawAsyncValidators)}},Fi=class extends Mi{constructor(e,t,r){super(Ch(t),Rh(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){km(this,!0,e),Object.keys(e).forEach(r=>{Dm(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var zo=new xe("CallSetDisabledState",{providedIn:"root",factory:()=>Wo}),Wo="always";function Nm(n,e){return[...e.path,n]}function Ph(n,e,t=Wo){Dh(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),xm(n,e),Mm(n,e),Om(n,e),Vm(n,e)}function mh(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Vm(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Dh(n,e){let t=bm(n);e.validator!==null?n.setValidators(dh(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Sm(n);e.asyncValidator!==null?n.setAsyncValidators(dh(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();mh(e._rawValidators,i),mh(e._rawAsyncValidators,i)}function xm(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&kh(n,e)})}function Om(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&kh(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function kh(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Mm(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function Fm(n,e){n==null,Dh(n,e)}function Lm(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Um(n){return Object.getPrototypeOf(n.constructor)===gm}function Bm(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function qm(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Cn?t=o:Um(o)?r=o:i=o}),i||r||t||null}var jm={provide:bn,useExisting:Ir(()=>Vr)},Pr=Promise.resolve(),Vr=(()=>{let e=class e extends bn{get submitted(){return Et(this.submittedReactive)}constructor(r,i,o){super(),this.callSetDisabledState=o,this._submitted=Sr(()=>this.submittedReactive()),this.submittedReactive=Ar(!1),this._directives=new Set,this.ngSubmit=new Tr,this.form=new Fi({},Go(r),$o(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Pr.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),Ph(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Pr.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Pr.then(()=>{let i=this._findContainer(r.path),o=new Fi({});Fm(o,r),i.registerControl(r.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Pr.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){Pr.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submittedReactive.set(!0),Bm(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(z(jo,10),z(Eh,10),z(zo,8))},e.\u0275dir=Be({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){i&1&&fe("submit",function(l){return o.onSubmit(l)})("reset",function(){return o.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[br([jm]),It]});let n=e;return n})();function gh(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function _h(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Gm=class extends Mi{constructor(e=null,t,r){super(Ch(t),Rh(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Bi(t)&&(t.nonNullable||t.initialValueIsDefault)&&(_h(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){gh(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){gh(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){_h(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var $m={provide:Nr,useExisting:Ir(()=>xr)},yh=Promise.resolve(),xr=(()=>{let e=class e extends Nr{constructor(r,i,o,c,l,h){super(),this._changeDetectorRef=l,this.callSetDisabledState=h,this.control=new Gm,this._registered=!1,this.name="",this.update=new Tr,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=qm(this,c)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),Lm(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Ph(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){yh.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,o=i!==0&&Uo(i);yh.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?Nm(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(z(bn,9),z(jo,10),z(Eh,10),z(Ih,10),z(sh,8),z(zo,8))},e.\u0275dir=Be({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[br([$m]),It,Vo]});let n=e;return n})(),qi=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Be({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let n=e;return n})();var zm=(()=>{let e=class e{constructor(){this._validator=hh}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):hh,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Be({type:e,features:[Vo]});let n=e;return n})();var Wm={provide:jo,useExisting:Ir(()=>Or),multi:!0};var Or=(()=>{let e=class e extends zm{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Uo,this.createValidator=r=>Em}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=xo(e)))(o||e)}})(),e.\u0275dir=Be({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,o){i&2&&eh("required",o._enabled?"":null)},inputs:{required:"required"},features:[br([Wm]),It]});let n=e;return n})();var Hm=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=No({type:e}),e.\u0275inj=ko({});let n=e;return n})();var ji=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:zo,useValue:r.callSetDisabledState??Wo}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=No({type:e}),e.\u0275inj=ko({imports:[Hm]});let n=e;return n})();var xh=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Km=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],c=n[t++],l=n[t++],h=((i&7)<<18|(o&63)<<12|(c&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{let o=n[t++],c=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|c&63)}}return e.join("")},Oh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],c=i+1<n.length,l=c?n[i+1]:0,h=i+2<n.length,f=h?n[i+2]:0,v=o>>2,b=(o&3)<<4|l>>4,S=(l&15)<<2|f>>6,D=f&63;h||(D=64,c||(S=64)),r.push(t[v],t[b],t[S],t[D])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(xh(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Km(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],l=i<n.length?t[n.charAt(i)]:0;++i;let f=i<n.length?t[n.charAt(i)]:64;++i;let b=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||l==null||f==null||b==null)throw new Ko;let S=o<<2|l>>4;if(r.push(S),f!==64){let D=l<<4&240|f>>2;if(r.push(D),b!==64){let k=f<<6&192|b;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Ko=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Qm=function(n){let e=xh(n);return Oh.encodeByteArray(e,!0)},Mr=function(n){return Qm(n).replace(/\./g,"")},Jo=function(n){try{return Oh.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Jm(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Ym=()=>Jm().__FIREBASE_DEFAULTS__,Xm=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Zm=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Jo(n[1]);return e&&JSON.parse(e)},$i=()=>{try{return Ym()||Xm()||Zm()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Yo=n=>{var e,t;return(t=(e=$i())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Mh=n=>{let e=Yo(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Xo=()=>{var n;return(n=$i())===null||n===void 0?void 0:n.config},Zo=n=>{var e;return(e=$i())===null||e===void 0?void 0:e[`_${n}`]};var Gi=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function Fh(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Mr(JSON.stringify(t)),Mr(JSON.stringify(c)),""].join(".")}function ue(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Lh(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ue())}function eg(){var n;let e=(n=$i())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Uh(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Bh(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qh(){let n=ue();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function jh(){return!eg()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ea(){try{return typeof indexedDB=="object"}catch{return!1}}function Gh(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var tg="FirebaseError",De=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=tg,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rt.prototype.create)}},rt=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],c=o?ng(o,r):"Error",l=`${this.serviceName}: ${c} (${i}).`;return new De(i,l,r)}};function ng(n,e){return n.replace(rg,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var rg=/\{\$([^}]+)}/g;function $h(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function $t(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],c=e[i];if(Vh(o)&&Vh(c)){if(!$t(o,c))return!1}else if(o!==c)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function Vh(n){return n!==null&&typeof n=="object"}function Fr(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Rn(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Pn(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function zh(n,e){let t=new Qo(n,e);return t.subscribe.bind(t)}var Qo=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");ig(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Ho),i.error===void 0&&(i.error=Ho),i.complete===void 0&&(i.complete=Ho);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function ig(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ho(){}var XE=4*60*60*1e3;function Ae(n){return n&&n._delegate?n._delegate:n}var Le=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var zt="[DEFAULT]";var ta=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Gi;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(og(e))try{this.getOrInitializeService({instanceIdentifier:zt})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=zt){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=zt){return this.instances.has(e)}getOptions(e=zt){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,c]of this.instancesDeferred.entries()){let l=this.normalizeInstanceIdentifier(o);r===l&&c.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let c=this.instances.get(i);return c&&e(c,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:sg(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=zt){return this.component?this.component.multipleInstances?e:zt:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function sg(n){return n===zt?void 0:n}function og(n){return n.instantiationMode==="EAGER"}var zi=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new ta(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var ag=[],q=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(q||{}),cg={debug:q.DEBUG,verbose:q.VERBOSE,info:q.INFO,warn:q.WARN,error:q.ERROR,silent:q.SILENT},ug=q.INFO,lg={[q.DEBUG]:"log",[q.VERBOSE]:"log",[q.INFO]:"info",[q.WARN]:"warn",[q.ERROR]:"error"},hg=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=lg[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},At=class{constructor(e){this.name=e,this._logLevel=ug,this._logHandler=hg,this._userLogHandler=null,ag.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in q))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cg[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,q.DEBUG,...e),this._logHandler(this,q.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,q.VERBOSE,...e),this._logHandler(this,q.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,q.INFO,...e),this._logHandler(this,q.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,q.WARN,...e),this._logHandler(this,q.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,q.ERROR,...e),this._logHandler(this,q.ERROR,...e)}};var dg=(n,e)=>e.some(t=>n instanceof t),Wh,Hh;function fg(){return Wh||(Wh=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function pg(){return Hh||(Hh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Kh=new WeakMap,ra=new WeakMap,Qh=new WeakMap,na=new WeakMap,sa=new WeakMap;function mg(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{t($e(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&Kh.set(t,n)}).catch(()=>{}),sa.set(e,n),e}function gg(n){if(ra.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{t(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});ra.set(n,e)}var ia={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ra.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Qh.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return $e(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Jh(n){ia=n(ia)}function _g(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Wi(this),e,...t);return Qh.set(r,e.sort?e.sort():[e]),$e(r)}:pg().includes(n)?function(...e){return n.apply(Wi(this),e),$e(Kh.get(this))}:function(...e){return $e(n.apply(Wi(this),e))}}function yg(n){return typeof n=="function"?_g(n):(n instanceof IDBTransaction&&gg(n),dg(n,fg())?new Proxy(n,ia):n)}function $e(n){if(n instanceof IDBRequest)return mg(n);if(na.has(n))return na.get(n);let e=yg(n);return e!==n&&(na.set(n,e),sa.set(e,n)),e}var Wi=n=>sa.get(n);function Xh(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let c=indexedDB.open(n,e),l=$e(c);return r&&c.addEventListener("upgradeneeded",h=>{r($e(c.result),h.oldVersion,h.newVersion,$e(c.transaction),h)}),t&&c.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),l.then(h=>{o&&h.addEventListener("close",()=>o()),i&&h.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}var vg=["get","getKey","getAll","getAllKeys","count"],Ig=["put","add","delete","clear"],oa=new Map;function Yh(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(oa.get(e))return oa.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=Ig.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||vg.includes(t)))return;let o=function(c,...l){return _(this,null,function*(){let h=this.transaction(c,i?"readwrite":"readonly"),f=h.store;return r&&(f=f.index(l.shift())),(yield Promise.all([f[t](...l),i&&h.done]))[0]})};return oa.set(e,o),o}Jh(n=>Ve(Se({},n),{get:(e,t,r)=>Yh(e,t)||n.get(e,t,r),has:(e,t)=>!!Yh(e,t)||n.has(e,t)}));var ca=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Eg(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Eg(n){let e=n.getComponent();return e?.type==="VERSION"}var ua="@firebase/app",Zh="0.10.10";var it=new At("@firebase/app"),wg="@firebase/app-compat",Tg="@firebase/analytics-compat",Ag="@firebase/analytics",bg="@firebase/app-check-compat",Sg="@firebase/app-check",Cg="@firebase/auth",Rg="@firebase/auth-compat",Pg="@firebase/database",Dg="@firebase/database-compat",kg="@firebase/functions",Ng="@firebase/functions-compat",Vg="@firebase/installations",xg="@firebase/installations-compat",Og="@firebase/messaging",Mg="@firebase/messaging-compat",Fg="@firebase/performance",Lg="@firebase/performance-compat",Ug="@firebase/remote-config",Bg="@firebase/remote-config-compat",qg="@firebase/storage",jg="@firebase/storage-compat",Gg="@firebase/firestore",$g="@firebase/vertexai-preview",zg="@firebase/firestore-compat",Wg="firebase",Hg="10.13.1";var la="[DEFAULT]",Kg={[ua]:"fire-core",[wg]:"fire-core-compat",[Ag]:"fire-analytics",[Tg]:"fire-analytics-compat",[Sg]:"fire-app-check",[bg]:"fire-app-check-compat",[Cg]:"fire-auth",[Rg]:"fire-auth-compat",[Pg]:"fire-rtdb",[Dg]:"fire-rtdb-compat",[kg]:"fire-fn",[Ng]:"fire-fn-compat",[Vg]:"fire-iid",[xg]:"fire-iid-compat",[Og]:"fire-fcm",[Mg]:"fire-fcm-compat",[Fg]:"fire-perf",[Lg]:"fire-perf-compat",[Ug]:"fire-rc",[Bg]:"fire-rc-compat",[qg]:"fire-gcs",[jg]:"fire-gcs-compat",[Gg]:"fire-fst",[zg]:"fire-fst-compat",[$g]:"fire-vertex","fire-js":"fire-js",[Wg]:"fire-js-all"};var Lr=new Map,Qg=new Map,ha=new Map;function ed(n,e){try{n.container.addComponent(e)}catch(t){it.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function St(n){let e=n.name;if(ha.has(e))return it.debug(`There were multiple attempts to register component ${e}.`),!1;ha.set(e,n);for(let t of Lr.values())ed(t,n);for(let t of Qg.values())ed(t,n);return!0}function Br(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function qe(n){return n.settings!==void 0}var Jg={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},bt=new rt("app","Firebase",Jg);var da=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Le("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw bt.create("app-deleted",{appName:this._name})}};var Ct=Hg;function ma(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:la,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw bt.create("bad-app-name",{appName:String(i)});if(t||(t=Xo()),!t)throw bt.create("no-options");let o=Lr.get(i);if(o){if($t(t,o.options)&&$t(r,o.config))return o;throw bt.create("duplicate-app",{appName:i})}let c=new zi(i);for(let h of ha.values())c.addComponent(h);let l=new da(t,r,c);return Lr.set(i,l),l}function Dn(n=la){let e=Lr.get(n);if(!e&&n===la&&Xo())return ma();if(!e)throw bt.create("no-app",{appName:n});return e}function Hi(){return Array.from(Lr.values())}function oe(n,e,t){var r;let i=(r=Kg[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),c=e.match(/\s|\//);if(o||c){let l=[`Unable to register library "${i}" with version "${e}":`];o&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&c&&l.push("and"),c&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),it.warn(l.join(" "));return}St(new Le(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Yg="firebase-heartbeat-database",Xg=1,Ur="firebase-heartbeat-store",aa=null;function id(){return aa||(aa=Xh(Yg,Xg,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ur)}catch(t){console.warn(t)}}}}).catch(n=>{throw bt.create("idb-open",{originalErrorMessage:n.message})})),aa}function Zg(n){return _(this,null,function*(){try{let t=(yield id()).transaction(Ur),r=yield t.objectStore(Ur).get(sd(n));return yield t.done,r}catch(e){if(e instanceof De)it.warn(e.message);else{let t=bt.create("idb-get",{originalErrorMessage:e?.message});it.warn(t.message)}}})}function td(n,e){return _(this,null,function*(){try{let r=(yield id()).transaction(Ur,"readwrite");yield r.objectStore(Ur).put(e,sd(n)),yield r.done}catch(t){if(t instanceof De)it.warn(t.message);else{let r=bt.create("idb-set",{originalErrorMessage:t?.message});it.warn(r.message)}}})}function sd(n){return`${n.name}!${n.options.appId}`}var e_=1024,t_=30*24*60*60*1e3,fa=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new pa(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=nd();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{let l=new Date(c.date).valueOf();return Date.now()-l<=t_}),this._storage.overwrite(this._heartbeatsCache))}catch(r){it.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=nd(),{heartbeatsToSend:r,unsentEntries:i}=n_(this._heartbeatsCache.heartbeats),o=Mr(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return it.warn(t),""}})}};function nd(){return new Date().toISOString().substring(0,10)}function n_(n,e=e_){let t=[],r=n.slice();for(let i of n){let o=t.find(c=>c.agent===i.agent);if(o){if(o.dates.push(i.date),rd(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),rd(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var pa=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return ea()?Gh().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield Zg(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return td(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return td(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function rd(n){return Mr(JSON.stringify({version:2,heartbeats:n})).length}function r_(n){St(new Le("platform-logger",e=>new ca(e),"PRIVATE")),St(new Le("heartbeat",e=>new fa(e),"PRIVATE")),oe(ua,Zh,n),oe(ua,Zh,"esm2017"),oe("fire-js","")}r_("");var i_="firebase",s_="10.13.1";oe(i_,s_,"app");var Ht=new Lo("ANGULARFIRE2_VERSION");function Qi(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(c=>c.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var qr=(n,e)=>{let t=e?[e]:Hi(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(c=>{r.includes(c)||r.push(c)})}),r},Nn=class{constructor(){return qr(o_)}},o_="app-check";function kn(){}var Ki=class{zone;delegate;constructor(e,t=Kl){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(c){i.runGuarded(()=>{e.apply(this,[c])})};return this.delegate.schedule(o,t,r)}},ga=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",kn,{},kn,kn)),t.pipe(Xl({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Vn=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Ki(Zone.current)),this.insideAngular=t.run(()=>new Ki(Zone.current,Hl)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(wr(vt))};static \u0275prov=Er({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Ji(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function a_(n){return Ji().ngZone.runOutsideAngular(()=>n())}function Wt(n){return Ji().ngZone.run(()=>n())}function c_(n){return u_(Ji())(n)}function u_(n){return function(t){return t=t.lift(new ga(n.ngZone)),t.pipe(Do(n.outsideAngular),Po(n.insideAngular))}}var l_=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Wt(()=>n.apply(void 0,r))},je=(n,e)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(t||=Wt(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",kn,{},kn,kn))),r[o]=l_(r[o],t));let i=a_(()=>n.apply(this,r));if(!e)if(i instanceof Co){let o=Ji();return i.pipe(Do(o.outsideAngular),Po(o.insideAngular))}else return Wt(()=>i);return i instanceof Co?i.pipe(c_):i instanceof Promise?Wt(()=>new Promise((o,c)=>i.then(l=>Wt(()=>o(l)),l=>Wt(()=>c(l))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Wt(()=>i)};var st=class{constructor(e){return e}},Kt=class{constructor(){return Hi()}};function h_(n){return n&&n.length===1?n[0]:new st(Dn())}var _a=new xe("angularfire2._apps"),d_={provide:st,useFactory:h_,deps:[[new Oe,_a]]},f_={provide:Kt,deps:[[new Oe,_a]]};function p_(n){return(e,t)=>{let r=t.get(Zl);oe("angularfire",Ht.full,"core"),oe("angularfire",Ht.full,"app"),oe("angular",nh.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new st(i)}}function od(n,...e){return mn([d_,f_,{provide:_a,useFactory:p_(n),multi:!0,deps:[vt,jt,Vn,...e]}])}var ad=je(ma,!0);function Ad(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var bd=Ad,Sd=new rt("auth","Firebase",Ad());var ns=new At("@firebase/auth");function m_(n,...e){ns.logLevel<=q.WARN&&ns.warn(`Auth (${Ct}): ${n}`,...e)}function Xi(n,...e){ns.logLevel<=q.ERROR&&ns.error(`Auth (${Ct}): ${n}`,...e)}function We(n,...e){throw Ba(n,...e)}function Qt(n,...e){return Ba(n,...e)}function Cd(n,e,t){let r=Object.assign(Object.assign({},bd()),{[e]:t});return new rt("auth","Firebase",r).create(e,{appName:n.name})}function ct(n){return Cd(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ba(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Sd.create(n,...e)}function L(n,e,...t){if(!n)throw Ba(e,...t)}function ot(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Xi(e),new Error(e)}function Pt(n,e){n||ot(e)}function Ea(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function g_(){return cd()==="http:"||cd()==="https:"}function cd(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function __(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(g_()||Uh()||"connection"in navigator)?navigator.onLine:!0}function y_(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Jt=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Pt(t>e,"Short delay should be less than long delay!"),this.isMobile=Lh()||Bh()}get(){return __()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function qa(n,e){Pt(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var rs=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ot("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ot("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ot("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var v_={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var I_=new Jt(3e4,6e4);function Dt(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function kt(o,c,l,h){return _(this,arguments,function*(n,e,t,r,i={}){return Rd(n,i,()=>_(this,null,function*(){let f={},v={};r&&(e==="GET"?v=r:f={body:JSON.stringify(r)});let b=Fr(Object.assign({key:n.config.apiKey},v)).slice(1),S=yield n._getAdditionalHeaders();return S["Content-Type"]="application/json",n.languageCode&&(S["X-Firebase-Locale"]=n.languageCode),rs.fetch()(Pd(n,n.config.apiHost,t,b),Object.assign({method:e,headers:S,referrerPolicy:"no-referrer"},f))}))})}function Rd(n,e,t){return _(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},v_),e);try{let i=new wa(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let c=yield o.json();if("needConfirmation"in c)throw Yi(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{let l=o.ok?c.errorMessage:c.error.message,[h,f]=l.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw Yi(n,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw Yi(n,"email-already-in-use",c);if(h==="USER_DISABLED")throw Yi(n,"user-disabled",c);let v=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw Cd(n,v,f);We(n,v)}}catch(i){if(i instanceof De)throw i;We(n,"network-request-failed",{message:String(i)})}})}function Qr(o,c,l,h){return _(this,arguments,function*(n,e,t,r,i={}){let f=yield kt(n,e,t,r,i);return"mfaPendingCredential"in f&&We(n,"multi-factor-auth-required",{_serverResponse:f}),f})}function Pd(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?qa(n.config,i):`${n.config.apiScheme}://${i}`}function E_(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var wa=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Qt(this.auth,"network-request-failed")),I_.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Yi(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Qt(n,e,r);return i.customData._tokenResponse=t,i}function ud(n){return n!==void 0&&n.enterprise!==void 0}var Ta=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return E_(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function w_(n,e){return _(this,null,function*(){return kt(n,"GET","/v2/recaptchaConfig",Dt(n,e))})}function T_(n,e){return _(this,null,function*(){return kt(n,"POST","/v1/accounts:delete",e)})}function Dd(n,e){return _(this,null,function*(){return kt(n,"POST","/v1/accounts:lookup",e)})}function jr(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function ja(n,e=!1){return _(this,null,function*(){let t=Ae(n),r=yield t.getIdToken(e),i=Ga(r);L(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,c=o?.sign_in_provider;return{claims:i,token:r,authTime:jr(ya(i.auth_time)),issuedAtTime:jr(ya(i.iat)),expirationTime:jr(ya(i.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function ya(n){return Number(n)*1e3}function Ga(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Xi("JWT malformed, contained fewer than 3 sections"),null;try{let i=Jo(t);return i?JSON.parse(i):(Xi("Failed to decode base64 JWT payload"),null)}catch(i){return Xi("Caught error parsing JWT payload as JSON",i?.toString()),null}}function ld(n){let e=Ga(n);return L(e,"internal-error"),L(typeof e.exp<"u","internal-error"),L(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function $r(n,e,t=!1){return _(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof De&&A_(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function A_({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Aa=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),t)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var zr=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=jr(this.lastLoginAt),this.creationTime=jr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function is(n){return _(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield $r(n,Dd(t,{idToken:r}));L(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let c=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?kd(o.providerUserInfo):[],l=b_(n.providerData,c),h=n.isAnonymous,f=!(n.email&&o.passwordHash)&&!l?.length,v=h?f:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new zr(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(n,b)})}function $a(n){return _(this,null,function*(){let e=Ae(n);yield is(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function b_(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function kd(n){return n.map(e=>{var{providerId:t}=e,r=Ro(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function S_(n,e){return _(this,null,function*(){let t=yield Rd(n,{},()=>_(this,null,function*(){let r=Fr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,c=Pd(n,i,"/v1/token",`key=${o}`),l=yield n._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",rs.fetch()(c,{method:"POST",headers:l,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function C_(n,e){return _(this,null,function*(){return kt(n,"POST","/v2/accounts:revokeToken",Dt(n,e))})}var Gr=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){L(e.idToken,"internal-error"),L(typeof e.idToken<"u","internal-error"),L(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ld(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){L(e.length!==0,"internal-error");let t=ld(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return _(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(L(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield S_(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,c=new n;return r&&(L(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(L(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),o&&(L(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return ot("not implemented")}};function Rt(n,e){L(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var xn=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Ro(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Aa(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new zr(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let t=yield $r(this,this.stsTokenManager.getToken(this.auth,e));return L(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return ja(this,e)}reload(){return $a(this)}_assign(e){this!==e&&(L(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){L(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield is(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(qe(this.auth.app))return Promise.reject(ct(this.auth));let e=yield this.getIdToken();return yield $r(this,T_(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,c,l,h,f,v;let b=(r=t.displayName)!==null&&r!==void 0?r:void 0,S=(i=t.email)!==null&&i!==void 0?i:void 0,D=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,k=(c=t.photoURL)!==null&&c!==void 0?c:void 0,U=(l=t.tenantId)!==null&&l!==void 0?l:void 0,O=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,J=(f=t.createdAt)!==null&&f!==void 0?f:void 0,K=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:Y,emailVerified:se,isAnonymous:Ge,providerData:ce,stsTokenManager:E}=t;L(Y&&E,e,"internal-error");let p=Gr.fromJSON(this.name,E);L(typeof Y=="string",e,"internal-error"),Rt(b,e.name),Rt(S,e.name),L(typeof se=="boolean",e,"internal-error"),L(typeof Ge=="boolean",e,"internal-error"),Rt(D,e.name),Rt(k,e.name),Rt(U,e.name),Rt(O,e.name),Rt(J,e.name),Rt(K,e.name);let g=new n({uid:Y,auth:e,email:S,emailVerified:se,displayName:b,isAnonymous:Ge,photoURL:k,phoneNumber:D,tenantId:U,stsTokenManager:p,createdAt:J,lastLoginAt:K});return ce&&Array.isArray(ce)&&(g.providerData=ce.map(y=>Object.assign({},y))),O&&(g._redirectEventId=O),g}static _fromIdTokenResponse(e,t,r=!1){return _(this,null,function*(){let i=new Gr;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield is(o),o})}static _fromGetAccountInfoResponse(e,t,r){return _(this,null,function*(){let i=t.users[0];L(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?kd(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!o?.length,l=new Gr;l.updateFromIdToken(r);let h=new n({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:c}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new zr(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(h,f),h})}};var hd=new Map;function at(n){Pt(n instanceof Function,"Expected a class definition");let e=hd.get(n);return e?(Pt(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,hd.set(n,e),e)}var R_=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(t,r){return _(this,null,function*(){this.storage[t]=r})}_get(t){return _(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return _(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),ba=R_;function Zi(n,e,t){return`firebase:${n}:${e}:${t}`}var ss=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=Zi(this.userKey,i.apiKey,o),this.fullPersistenceKey=Zi("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?xn._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return _(this,null,function*(){if(!t.length)return new n(at(ba),e,r);let i=(yield Promise.all(t.map(f=>_(this,null,function*(){if(yield f._isAvailable())return f})))).filter(f=>f),o=i[0]||at(ba),c=Zi(r,e.config.apiKey,e.name),l=null;for(let f of t)try{let v=yield f._get(c);if(v){let b=xn._fromJSON(e,v);f!==o&&(l=b),o=f;break}}catch{}let h=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new n(o,e,r):(o=h[0],l&&(yield o._set(c,l.toJSON())),yield Promise.all(t.map(f=>_(this,null,function*(){if(f!==o)try{yield f._remove(c)}catch{}}))),new n(o,e,r))})}};function dd(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Od(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Nd(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Fd(e))return"Blackberry";if(Ld(e))return"Webos";if(Vd(e))return"Safari";if((e.includes("chrome/")||xd(e))&&!e.includes("edge/"))return"Chrome";if(Md(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function Nd(n=ue()){return/firefox\//i.test(n)}function Vd(n=ue()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xd(n=ue()){return/crios\//i.test(n)}function Od(n=ue()){return/iemobile/i.test(n)}function Md(n=ue()){return/android/i.test(n)}function Fd(n=ue()){return/blackberry/i.test(n)}function Ld(n=ue()){return/webos/i.test(n)}function za(n=ue()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function P_(n=ue()){var e;return za(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function D_(){return qh()&&document.documentMode===10}function Ud(n=ue()){return za(n)||Md(n)||Ld(n)||Fd(n)||/windows phone/i.test(n)||Od(n)}function Bd(n,e=[]){let t;switch(n){case"Browser":t=dd(ue());break;case"Worker":t=`${dd(ue())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ct}/${r}`}var Sa=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((c,l)=>{try{let h=e(o);c(h)}catch(h){l(h)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function k_(t){return _(this,arguments,function*(n,e={}){return kt(n,"GET","/v2/passwordPolicy",Dt(n,e))})}var N_=6,Ca=class{constructor(e){var t,r,i,o;let c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:N_,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,c,l;let h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(i=h.containsLowercaseLetter)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(o=h.containsUppercaseLetter)!==null&&o!==void 0?o:!0),h.isValid&&(h.isValid=(c=h.containsNumericCharacter)!==null&&c!==void 0?c:!0),h.isValid&&(h.isValid=(l=h.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),h}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Ra=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new os(this),this.idTokenSubscription=new os(this),this.beforeStateQueue=new Sa(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Sd,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=at(t)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield ss.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let t=yield Dd(this,{idToken:e}),r=yield xn._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var t;if(qe(this.app)){let c=this.app.settings.authIdToken;return c?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(l,l))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,l=i?._redirectEventId,h=yield this.tryRedirectSignIn(e);(!c||c===l)&&h?.user&&(i=h.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(c){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return L(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield is(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=y_()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(qe(this.app))return Promise.reject(ct(this));let t=e?Ae(e):null;return t&&L(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return _(this,null,function*(){if(!this._deleted)return e&&L(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return qe(this.app)?Promise.reject(ct(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return qe(this.app)?Promise.reject(ct(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(at(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield k_(this),t=new Ca(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new rt("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield C_(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&at(e)||this._popupRedirectResolver;L(t,this,"argument-error"),this.redirectPersistenceManager=yield ss.create(this,[at(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),c=!1,l=this._isInitialized?Promise.resolve():this._initializationPromise;if(L(l,this,"internal-error"),l.then(()=>{c||o(this.currentUser)}),typeof t=="function"){let h=e.addObserver(t,r,i);return()=>{c=!0,h()}}else{let h=e.addObserver(t);return()=>{c=!0,h()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return L(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Bd(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return _(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&m_(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Xt(n){return Ae(n)}var os=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=zh(t=>this.observer=t)}get next(){return L(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var fs={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function V_(n){fs=n}function qd(n){return fs.loadJS(n)}function x_(){return fs.recaptchaEnterpriseScript}function O_(){return fs.gapiScript}function jd(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var M_="recaptcha-enterprise",F_="NO_RECAPTCHA",Pa=class{constructor(e){this.type=M_,this.auth=Xt(e)}verify(e="verify",t=!1){return _(this,null,function*(){function r(o){return _(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((c,l)=>_(this,null,function*(){w_(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{let f=new Ta(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,c(f.siteKey)}}).catch(h=>{l(h)})}))})}function i(o,c,l){let h=window.grecaptcha;ud(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{c(f)}).catch(()=>{c(F_)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,c)=>{r(this.auth).then(l=>{if(!t&&ud(window.grecaptcha))i(l,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=x_();h.length!==0&&(h+=l),qd(h).then(()=>{i(l,o,c)}).catch(f=>{c(f)})}}).catch(l=>{c(l)})})})}};function fd(n,e,t,r=!1){return _(this,null,function*(){let i=new Pa(n),o;try{o=yield i.verify(t)}catch{o=yield i.verify(t,!0)}let c=Object.assign({},e);return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c})}function Da(n,e,t,r){return _(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield fd(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(o=>_(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield fd(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(o)}))})}function Wa(n,e){let t=Br(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if($t(o,e??{}))return i;We(i,"already-initialized")}return t.initialize({options:e})}function L_(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(at);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function Ha(n,e,t){let r=Xt(n);L(r._canInitEmulator,r,"emulator-config-failed"),L(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=Gd(e),{host:c,port:l}=U_(e),h=l===null?"":`:${l}`;r.config.emulator={url:`${o}//${c}${h}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:c,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||B_()}function Gd(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function U_(n){let e=Gd(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:pd(r.substr(o.length+1))}}else{let[o,c]=r.split(":");return{host:o,port:pd(c)}}}function pd(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function B_(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Wr=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ot("not implemented")}_getIdTokenResponse(e){return ot("not implemented")}_linkToIdToken(e,t){return ot("not implemented")}_getReauthenticationResolver(e){return ot("not implemented")}};function q_(n,e){return _(this,null,function*(){return kt(n,"POST","/v1/accounts:signUp",e)})}function j_(n,e){return _(this,null,function*(){return Qr(n,"POST","/v1/accounts:signInWithPassword",Dt(n,e))})}function G_(n,e){return _(this,null,function*(){return Qr(n,"POST","/v1/accounts:signInWithEmailLink",Dt(n,e))})}function $_(n,e){return _(this,null,function*(){return Qr(n,"POST","/v1/accounts:signInWithEmailLink",Dt(n,e))})}var Hr=class n extends Wr{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Da(e,t,"signInWithPassword",j_);case"emailLink":return G_(e,{email:this._email,oobCode:this._password});default:We(e,"internal-error")}})}_linkToIdToken(e,t){return _(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Da(e,r,"signUpPassword",q_);case"emailLink":return $_(e,{idToken:t,email:this._email,oobCode:this._password});default:We(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function va(n,e){return _(this,null,function*(){return Qr(n,"POST","/v1/accounts:signInWithIdp",Dt(n,e))})}function z_(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function W_(n){let e=Rn(Pn(n)).link,t=e?Rn(Pn(e)).deep_link_id:null,r=Rn(Pn(n)).deep_link_id;return(r?Rn(Pn(r)).link:null)||r||t||e||n}var as=class n{constructor(e){var t,r,i,o,c,l;let h=Rn(Pn(e)),f=(t=h.apiKey)!==null&&t!==void 0?t:null,v=(r=h.oobCode)!==null&&r!==void 0?r:null,b=z_((i=h.mode)!==null&&i!==void 0?i:null);L(f&&v&&b,"argument-error"),this.apiKey=f,this.operation=b,this.code=v,this.continueUrl=(o=h.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(c=h.languageCode)!==null&&c!==void 0?c:null,this.tenantId=(l=h.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){let t=W_(e);try{return new n(t)}catch{return null}}};var $d=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Hr._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=as.parseLink(r);return L(i,"argument-error"),Hr._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),cs=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var ka=class extends cs{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function H_(n,e){return _(this,null,function*(){return Qr(n,"POST","/v1/accounts:signUp",Dt(n,e))})}var On=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return _(this,null,function*(){let o=yield xn._fromIdTokenResponse(e,r,i),c=md(r);return new n({user:o,providerId:c,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=md(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function md(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Na=class n extends De{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function zd(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Na._fromErrorAndOperation(n,o,e,r):o})}function K_(n,e,t=!1){return _(this,null,function*(){let r=yield $r(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return On._forOperation(n,"link",r)})}function Q_(n,e,t=!1){return _(this,null,function*(){let{auth:r}=n;if(qe(r.app))return Promise.reject(ct(r));let i="reauthenticate";try{let o=yield $r(n,zd(r,i,e,n),t);L(o.idToken,r,"internal-error");let c=Ga(o.idToken);L(c,r,"internal-error");let{sub:l}=c;return L(n.uid===l,r,"user-mismatch"),On._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&We(r,"user-mismatch"),o}})}function Wd(n,e,t=!1){return _(this,null,function*(){if(qe(n.app))return Promise.reject(ct(n));let r="signIn",i=yield zd(n,r,e),o=yield On._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function Ka(n,e){return _(this,null,function*(){return Wd(Xt(n),e)})}function Hd(n){return _(this,null,function*(){let e=Xt(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Qa(n,e,t){return _(this,null,function*(){if(qe(n.app))return Promise.reject(ct(n));let r=Xt(n),c=yield Da(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",H_).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&Hd(n),h}),l=yield On._fromIdTokenResponse(r,"signIn",c);return yield r._updateCurrentUser(l.user),l})}function Ja(n,e,t){return qe(n.app)?Promise.reject(ct(n)):Ka(Ae(n),$d.credential(e,t)).catch(r=>_(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&Hd(n),r}))}function Ya(n,e,t,r){return Ae(n).onIdTokenChanged(e,t,r)}function Xa(n,e,t){return Ae(n).beforeAuthStateChanged(e,t)}function Za(n){return Ae(n).signOut()}var us="__sak";var ls=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(us,"1"),this.storage.removeItem(us),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var J_=1e3,Y_=10,X_=(()=>{class n extends ls{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ud(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((l,h,f)=>{this.notifyListeners(l,f)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let l=this.storage.getItem(i);!r&&this.localCache[i]===l||this.notifyListeners(i,l)},c=this.storage.getItem(i);D_()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,Y_):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},J_)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return _(this,null,function*(){yield yt(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return _(this,null,function*(){let r=yield yt(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return _(this,null,function*(){yield yt(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),Kd=X_;var Z_=(()=>{class n extends ls{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),ec=Z_;function ey(n){return Promise.all(n.map(e=>_(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var ty=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return _(this,null,function*(){let r=t,{eventId:i,eventType:o,data:c}=r.data,l=this.handlersMap[o];if(!l?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let h=Array.from(l).map(v=>_(this,null,function*(){return v(r.origin,c)})),f=yield ey(h);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:f})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Qd(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Va=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,c;return new Promise((l,h)=>{let f=Qd("",20);i.port1.start();let v=setTimeout(()=>{h(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(b){let S=b;if(S.data.eventId===f)switch(S.data.status){case"ack":clearTimeout(v),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(S.data.response);break;default:clearTimeout(v),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})})}};function ze(){return window}function ny(n){ze().location.href=n}function Jd(){return typeof ze().WorkerGlobalScope<"u"&&typeof ze().importScripts=="function"}function ry(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function iy(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function sy(){return Jd()?self:null}var Yd="firebaseLocalStorageDb",oy=1,hs="firebaseLocalStorage",Xd="fbase_key",Yt=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function ps(n,e){return n.transaction([hs],e?"readwrite":"readonly").objectStore(hs)}function ay(){let n=indexedDB.deleteDatabase(Yd);return new Yt(n).toPromise()}function xa(){let n=indexedDB.open(Yd,oy);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(hs,{keyPath:Xd})}catch(i){t(i)}}),n.addEventListener("success",()=>_(this,null,function*(){let r=n.result;r.objectStoreNames.contains(hs)?e(r):(r.close(),yield ay(),e(yield xa()))}))})}function gd(n,e,t){return _(this,null,function*(){let r=ps(n,!0).put({[Xd]:e,value:t});return new Yt(r).toPromise()})}function cy(n,e){return _(this,null,function*(){let t=ps(n,!1).get(e),r=yield new Yt(t).toPromise();return r===void 0?null:r.value})}function _d(n,e){let t=ps(n,!0).delete(e);return new Yt(t).toPromise()}var uy=800,ly=3,hy=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield xa(),this.db)})}_withRetries(t){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>ly)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return Jd()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=ty._getInstance(sy()),this.receiver._subscribe("keyChanged",(t,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var t,r;if(this.activeServiceWorker=yield ry(),!this.activeServiceWorker)return;this.sender=new Va(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||iy()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let t=yield xa();return yield gd(t,us,"1"),yield _d(t,us),!0}catch{}return!1})}_withPendingWrite(t){return _(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>gd(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return _(this,null,function*(){let r=yield this._withRetries(i=>cy(i,t));return this.localCache[t]=r,r})}_remove(t){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>_d(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return _(this,null,function*(){let t=yield this._withRetries(o=>{let c=ps(o,!1).getAll();return new Yt(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:c}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),uy)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Zd=hy;var zw=jd("rcb"),Ww=new Jt(3e4,6e4);function dy(n,e){return e?at(e):(L(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Kr=class extends Wr{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return va(e,this._buildIdpRequest())}_linkToIdToken(e,t){return va(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return va(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function fy(n){return Wd(n.auth,new Kr(n),n.bypassAuthState)}function py(n){let{auth:e,user:t}=n;return L(t,e,"internal-error"),Q_(t,new Kr(n),n.bypassAuthState)}function my(n){return _(this,null,function*(){let{auth:e,user:t}=n;return L(t,e,"internal-error"),K_(t,new Kr(n),n.bypassAuthState)})}var Oa=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:c,type:l}=e;if(c){this.reject(c);return}let h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(l)(h))}catch(f){this.reject(f)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return fy;case"linkViaPopup":case"linkViaRedirect":return my;case"reauthViaPopup":case"reauthViaRedirect":return py;default:We(this.auth,"internal-error")}}resolve(e){Pt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var Hw=new Jt(2e3,1e4);var gy="pendingRedirect",es=new Map,Ma=class n extends Oa{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=es.get(this.auth._key());if(!e){try{let r=(yield _y(this.resolver,this.auth))?yield yt(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}es.set(this.auth._key(),e)}return this.bypassAuthState||es.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return yt(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,yt(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function _y(n,e){return _(this,null,function*(){let t=Iy(e),r=vy(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function yy(n,e){es.set(n._key(),e)}function vy(n){return at(n._redirectPersistence)}function Iy(n){return Zi(gy,n.config.apiKey,n.name)}function Ey(n,e,t=!1){return _(this,null,function*(){if(qe(n.app))return Promise.reject(ct(n));let r=Xt(n),i=dy(r,e),c=yield new Ma(r,i,t).execute();return c&&!t&&(delete c.user._redirectEventId,yield r._persistUserIfCurrent(c.user),yield r._setRedirectUser(null,e)),c})}var wy=10*60*1e3,Fa=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Ty(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!ef(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Qt(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=wy&&this.cachedEventUids.clear(),this.cachedEventUids.has(yd(e))}saveEventToCache(e){this.cachedEventUids.add(yd(e)),this.lastProcessedEventTime=Date.now()}};function yd(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function ef({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Ty(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ef(n);default:return!1}}function Ay(t){return _(this,arguments,function*(n,e={}){return kt(n,"GET","/v1/projects",e)})}var by=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Sy=/^https?/;function Cy(n){return _(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield Ay(n);for(let t of e)try{if(Ry(t))return}catch{}We(n,"unauthorized-domain")})}function Ry(n){let e=Ea(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!Sy.test(t))return!1;if(by.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var Py=new Jt(3e4,6e4);function vd(){let n=ze().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Dy(n){return new Promise((e,t)=>{var r,i,o;function c(){vd(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vd(),t(Qt(n,"network-request-failed"))},timeout:Py.get()})}if(!((i=(r=ze().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=ze().gapi)===null||o===void 0)&&o.load)c();else{let l=jd("iframefcb");return ze()[l]=()=>{gapi.load?c():t(Qt(n,"network-request-failed"))},qd(`${O_()}?onload=${l}`).catch(h=>t(h))}}).catch(e=>{throw ts=null,e})}var ts=null;function ky(n){return ts=ts||Dy(n),ts}var Ny=new Jt(5e3,15e3),Vy="__/auth/iframe",xy="emulator/auth/iframe",Oy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},My=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Fy(n){let e=n.config;L(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?qa(e,xy):`https://${n.config.authDomain}/${Vy}`,r={apiKey:e.apiKey,appName:n.name,v:Ct},i=My.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Fr(r).slice(1)}`}function Ly(n){return _(this,null,function*(){let e=yield ky(n),t=ze().gapi;return L(t,n,"internal-error"),e.open({where:document.body,url:Fy(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Oy,dontclear:!0},r=>new Promise((i,o)=>_(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let c=Qt(n,"network-request-failed"),l=ze().setTimeout(()=>{o(c)},Ny.get());function h(){ze().clearTimeout(l),i(r)}r.ping(h).then(h,()=>{o(c)})})))})}var Uy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},By=500,qy=600,jy="_blank",Gy="http://localhost",ds=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function $y(n,e,t,r=By,i=qy){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString(),l="",h=Object.assign(Object.assign({},Uy),{width:r.toString(),height:i.toString(),top:o,left:c}),f=ue().toLowerCase();t&&(l=xd(f)?jy:t),Nd(f)&&(e=e||Gy,h.scrollbars="yes");let v=Object.entries(h).reduce((S,[D,k])=>`${S}${D}=${k},`,"");if(P_(f)&&l!=="_self")return zy(e||"",l),new ds(null);let b=window.open(e||"",l,v);L(b,n,"popup-blocked");try{b.focus()}catch{}return new ds(b)}function zy(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var Wy="__/auth/handler",Hy="emulator/auth/handler",Ky=encodeURIComponent("fac");function Id(n,e,t,r,i,o){return _(this,null,function*(){L(n.config.authDomain,n,"auth-domain-config-required"),L(n.config.apiKey,n,"invalid-api-key");let c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Ct,eventId:i};if(e instanceof cs){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",$h(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(let[v,b]of Object.entries(o||{}))c[v]=b}if(e instanceof ka){let v=e.getScopes().filter(b=>b!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);let l=c;for(let v of Object.keys(l))l[v]===void 0&&delete l[v];let h=yield n._getAppCheckToken(),f=h?`#${Ky}=${encodeURIComponent(h)}`:"";return`${Qy(n)}?${Fr(l).slice(1)}${f}`})}function Qy({config:n}){return n.emulator?qa(n,Hy):`https://${n.authDomain}/${Wy}`}var Ia="webStorageSupport",La=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ec,this._completeRedirectFn=Ey,this._overrideRedirectResult=yy}_openPopup(e,t,r,i){return _(this,null,function*(){var o;Pt((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let c=yield Id(e,t,r,Ea(),i);return $y(e,c,Qd())})}_openRedirect(e,t,r,i){return _(this,null,function*(){yield this._originValidation(e);let o=yield Id(e,t,r,Ea(),i);return ny(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(Pt(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return _(this,null,function*(){let t=yield Ly(e),r=new Fa(e);return t.register("authEvent",i=>(L(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ia,{type:Ia},i=>{var o;let c=(o=i?.[0])===null||o===void 0?void 0:o[Ia];c!==void 0&&t(!!c),We(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Cy(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ud()||Vd()||za()}},tf=La;var Ed="@firebase/auth",wd="1.7.8";var Ua=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){L(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Jy(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Yy(n){St(new Le("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:l}=r.options;L(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});let h={apiKey:c,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bd(n)},f=new Ra(r,i,o,h);return L_(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),St(new Le("auth-internal",e=>{let t=Xt(e.getProvider("auth").getImmediate());return(r=>new Ua(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),oe(Ed,wd,Jy(n)),oe(Ed,wd,"esm2017")}var Xy=5*60,Zy=Zo("authIdTokenMaxAge")||Xy,Td=null,ev=n=>e=>_(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Zy)return;let i=t?.token;Td!==i&&(Td=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function tc(n=Dn()){let e=Br(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Wa(n,{popupRedirectResolver:tf,persistence:[Zd,Kd,ec]}),r=Zo("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let c=ev(o.toString());Xa(t,c,()=>c(t.currentUser)),Ya(t,l=>c(l))}}let i=Yo("auth");return i&&Ha(t,`http://${i}`),t}function tv(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}V_({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Qt("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",tv().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Yy("Browser");var nf="auth",Zt=class{constructor(e){return e}},Jr=class{constructor(){return qr(nf)}};var nc=new xe("angularfire2.auth-instances");function zv(n,e){let t=Qi(nf,n,e);return t&&new Zt(t)}function Wv(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new Zt(r)}}var Hv={provide:Jr,deps:[[new Oe,nc]]},Kv={provide:Zt,useFactory:zv,deps:[[new Oe,nc],st]};function rf(n,...e){return oe("angularfire",Ht.full,"auth"),mn([Kv,Hv,{provide:nc,useFactory:Wv(n),multi:!0,deps:[vt,jt,Vn,Kt,[new Oe,Nn],...e]}])}var sf=je(Qa,!0);var of=je(tc,!0);var af=je(Ja,!0);var cf=je(Za,!0);var uf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},lf={};var rc,hf;(function(){var n;function e(E,p){function g(){}g.prototype=p.prototype,E.D=p.prototype,E.prototype=new g,E.prototype.constructor=E,E.C=function(y,I,T){for(var m=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)m[Xe-2]=arguments[Xe];return p.prototype[I].apply(y,m)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,p,g){g||(g=0);var y=Array(16);if(typeof p=="string")for(var I=0;16>I;++I)y[I]=p.charCodeAt(g++)|p.charCodeAt(g++)<<8|p.charCodeAt(g++)<<16|p.charCodeAt(g++)<<24;else for(I=0;16>I;++I)y[I]=p[g++]|p[g++]<<8|p[g++]<<16|p[g++]<<24;p=E.g[0],g=E.g[1],I=E.g[2];var T=E.g[3],m=p+(T^g&(I^T))+y[0]+3614090360&4294967295;p=g+(m<<7&4294967295|m>>>25),m=T+(I^p&(g^I))+y[1]+3905402710&4294967295,T=p+(m<<12&4294967295|m>>>20),m=I+(g^T&(p^g))+y[2]+606105819&4294967295,I=T+(m<<17&4294967295|m>>>15),m=g+(p^I&(T^p))+y[3]+3250441966&4294967295,g=I+(m<<22&4294967295|m>>>10),m=p+(T^g&(I^T))+y[4]+4118548399&4294967295,p=g+(m<<7&4294967295|m>>>25),m=T+(I^p&(g^I))+y[5]+1200080426&4294967295,T=p+(m<<12&4294967295|m>>>20),m=I+(g^T&(p^g))+y[6]+2821735955&4294967295,I=T+(m<<17&4294967295|m>>>15),m=g+(p^I&(T^p))+y[7]+4249261313&4294967295,g=I+(m<<22&4294967295|m>>>10),m=p+(T^g&(I^T))+y[8]+1770035416&4294967295,p=g+(m<<7&4294967295|m>>>25),m=T+(I^p&(g^I))+y[9]+2336552879&4294967295,T=p+(m<<12&4294967295|m>>>20),m=I+(g^T&(p^g))+y[10]+4294925233&4294967295,I=T+(m<<17&4294967295|m>>>15),m=g+(p^I&(T^p))+y[11]+2304563134&4294967295,g=I+(m<<22&4294967295|m>>>10),m=p+(T^g&(I^T))+y[12]+1804603682&4294967295,p=g+(m<<7&4294967295|m>>>25),m=T+(I^p&(g^I))+y[13]+4254626195&4294967295,T=p+(m<<12&4294967295|m>>>20),m=I+(g^T&(p^g))+y[14]+2792965006&4294967295,I=T+(m<<17&4294967295|m>>>15),m=g+(p^I&(T^p))+y[15]+1236535329&4294967295,g=I+(m<<22&4294967295|m>>>10),m=p+(I^T&(g^I))+y[1]+4129170786&4294967295,p=g+(m<<5&4294967295|m>>>27),m=T+(g^I&(p^g))+y[6]+3225465664&4294967295,T=p+(m<<9&4294967295|m>>>23),m=I+(p^g&(T^p))+y[11]+643717713&4294967295,I=T+(m<<14&4294967295|m>>>18),m=g+(T^p&(I^T))+y[0]+3921069994&4294967295,g=I+(m<<20&4294967295|m>>>12),m=p+(I^T&(g^I))+y[5]+3593408605&4294967295,p=g+(m<<5&4294967295|m>>>27),m=T+(g^I&(p^g))+y[10]+38016083&4294967295,T=p+(m<<9&4294967295|m>>>23),m=I+(p^g&(T^p))+y[15]+3634488961&4294967295,I=T+(m<<14&4294967295|m>>>18),m=g+(T^p&(I^T))+y[4]+3889429448&4294967295,g=I+(m<<20&4294967295|m>>>12),m=p+(I^T&(g^I))+y[9]+568446438&4294967295,p=g+(m<<5&4294967295|m>>>27),m=T+(g^I&(p^g))+y[14]+3275163606&4294967295,T=p+(m<<9&4294967295|m>>>23),m=I+(p^g&(T^p))+y[3]+4107603335&4294967295,I=T+(m<<14&4294967295|m>>>18),m=g+(T^p&(I^T))+y[8]+1163531501&4294967295,g=I+(m<<20&4294967295|m>>>12),m=p+(I^T&(g^I))+y[13]+2850285829&4294967295,p=g+(m<<5&4294967295|m>>>27),m=T+(g^I&(p^g))+y[2]+4243563512&4294967295,T=p+(m<<9&4294967295|m>>>23),m=I+(p^g&(T^p))+y[7]+1735328473&4294967295,I=T+(m<<14&4294967295|m>>>18),m=g+(T^p&(I^T))+y[12]+2368359562&4294967295,g=I+(m<<20&4294967295|m>>>12),m=p+(g^I^T)+y[5]+4294588738&4294967295,p=g+(m<<4&4294967295|m>>>28),m=T+(p^g^I)+y[8]+2272392833&4294967295,T=p+(m<<11&4294967295|m>>>21),m=I+(T^p^g)+y[11]+1839030562&4294967295,I=T+(m<<16&4294967295|m>>>16),m=g+(I^T^p)+y[14]+4259657740&4294967295,g=I+(m<<23&4294967295|m>>>9),m=p+(g^I^T)+y[1]+2763975236&4294967295,p=g+(m<<4&4294967295|m>>>28),m=T+(p^g^I)+y[4]+1272893353&4294967295,T=p+(m<<11&4294967295|m>>>21),m=I+(T^p^g)+y[7]+4139469664&4294967295,I=T+(m<<16&4294967295|m>>>16),m=g+(I^T^p)+y[10]+3200236656&4294967295,g=I+(m<<23&4294967295|m>>>9),m=p+(g^I^T)+y[13]+681279174&4294967295,p=g+(m<<4&4294967295|m>>>28),m=T+(p^g^I)+y[0]+3936430074&4294967295,T=p+(m<<11&4294967295|m>>>21),m=I+(T^p^g)+y[3]+3572445317&4294967295,I=T+(m<<16&4294967295|m>>>16),m=g+(I^T^p)+y[6]+76029189&4294967295,g=I+(m<<23&4294967295|m>>>9),m=p+(g^I^T)+y[9]+3654602809&4294967295,p=g+(m<<4&4294967295|m>>>28),m=T+(p^g^I)+y[12]+3873151461&4294967295,T=p+(m<<11&4294967295|m>>>21),m=I+(T^p^g)+y[15]+530742520&4294967295,I=T+(m<<16&4294967295|m>>>16),m=g+(I^T^p)+y[2]+3299628645&4294967295,g=I+(m<<23&4294967295|m>>>9),m=p+(I^(g|~T))+y[0]+4096336452&4294967295,p=g+(m<<6&4294967295|m>>>26),m=T+(g^(p|~I))+y[7]+1126891415&4294967295,T=p+(m<<10&4294967295|m>>>22),m=I+(p^(T|~g))+y[14]+2878612391&4294967295,I=T+(m<<15&4294967295|m>>>17),m=g+(T^(I|~p))+y[5]+4237533241&4294967295,g=I+(m<<21&4294967295|m>>>11),m=p+(I^(g|~T))+y[12]+1700485571&4294967295,p=g+(m<<6&4294967295|m>>>26),m=T+(g^(p|~I))+y[3]+2399980690&4294967295,T=p+(m<<10&4294967295|m>>>22),m=I+(p^(T|~g))+y[10]+4293915773&4294967295,I=T+(m<<15&4294967295|m>>>17),m=g+(T^(I|~p))+y[1]+2240044497&4294967295,g=I+(m<<21&4294967295|m>>>11),m=p+(I^(g|~T))+y[8]+1873313359&4294967295,p=g+(m<<6&4294967295|m>>>26),m=T+(g^(p|~I))+y[15]+4264355552&4294967295,T=p+(m<<10&4294967295|m>>>22),m=I+(p^(T|~g))+y[6]+2734768916&4294967295,I=T+(m<<15&4294967295|m>>>17),m=g+(T^(I|~p))+y[13]+1309151649&4294967295,g=I+(m<<21&4294967295|m>>>11),m=p+(I^(g|~T))+y[4]+4149444226&4294967295,p=g+(m<<6&4294967295|m>>>26),m=T+(g^(p|~I))+y[11]+3174756917&4294967295,T=p+(m<<10&4294967295|m>>>22),m=I+(p^(T|~g))+y[2]+718787259&4294967295,I=T+(m<<15&4294967295|m>>>17),m=g+(T^(I|~p))+y[9]+3951481745&4294967295,E.g[0]=E.g[0]+p&4294967295,E.g[1]=E.g[1]+(I+(m<<21&4294967295|m>>>11))&4294967295,E.g[2]=E.g[2]+I&4294967295,E.g[3]=E.g[3]+T&4294967295}r.prototype.u=function(E,p){p===void 0&&(p=E.length);for(var g=p-this.blockSize,y=this.B,I=this.h,T=0;T<p;){if(I==0)for(;T<=g;)i(this,E,T),T+=this.blockSize;if(typeof E=="string"){for(;T<p;)if(y[I++]=E.charCodeAt(T++),I==this.blockSize){i(this,y),I=0;break}}else for(;T<p;)if(y[I++]=E[T++],I==this.blockSize){i(this,y),I=0;break}}this.h=I,this.o+=p},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var p=1;p<E.length-8;++p)E[p]=0;var g=8*this.o;for(p=E.length-8;p<E.length;++p)E[p]=g&255,g/=256;for(this.u(E),E=Array(16),p=g=0;4>p;++p)for(var y=0;32>y;y+=8)E[g++]=this.g[p]>>>y&255;return E};function o(E,p){var g=l;return Object.prototype.hasOwnProperty.call(g,E)?g[E]:g[E]=p(E)}function c(E,p){this.h=p;for(var g=[],y=!0,I=E.length-1;0<=I;I--){var T=E[I]|0;y&&T==p||(g[I]=T,y=!1)}this.g=g}var l={};function h(E){return-128<=E&&128>E?o(E,function(p){return new c([p|0],0>p?-1:0)}):new c([E|0],0>E?-1:0)}function f(E){if(isNaN(E)||!isFinite(E))return b;if(0>E)return O(f(-E));for(var p=[],g=1,y=0;E>=g;y++)p[y]=E/g|0,g*=4294967296;return new c(p,0)}function v(E,p){if(E.length==0)throw Error("number format error: empty string");if(p=p||10,2>p||36<p)throw Error("radix out of range: "+p);if(E.charAt(0)=="-")return O(v(E.substring(1),p));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var g=f(Math.pow(p,8)),y=b,I=0;I<E.length;I+=8){var T=Math.min(8,E.length-I),m=parseInt(E.substring(I,I+T),p);8>T?(T=f(Math.pow(p,T)),y=y.j(T).add(f(m))):(y=y.j(g),y=y.add(f(m)))}return y}var b=h(0),S=h(1),D=h(16777216);n=c.prototype,n.m=function(){if(U(this))return-O(this).m();for(var E=0,p=1,g=0;g<this.g.length;g++){var y=this.i(g);E+=(0<=y?y:4294967296+y)*p,p*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(k(this))return"0";if(U(this))return"-"+O(this).toString(E);for(var p=f(Math.pow(E,6)),g=this,y="";;){var I=se(g,p).g;g=J(g,I.j(p));var T=((0<g.g.length?g.g[0]:g.h)>>>0).toString(E);if(g=I,k(g))return T+y;for(;6>T.length;)T="0"+T;y=T+y}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function k(E){if(E.h!=0)return!1;for(var p=0;p<E.g.length;p++)if(E.g[p]!=0)return!1;return!0}function U(E){return E.h==-1}n.l=function(E){return E=J(this,E),U(E)?-1:k(E)?0:1};function O(E){for(var p=E.g.length,g=[],y=0;y<p;y++)g[y]=~E.g[y];return new c(g,~E.h).add(S)}n.abs=function(){return U(this)?O(this):this},n.add=function(E){for(var p=Math.max(this.g.length,E.g.length),g=[],y=0,I=0;I<=p;I++){var T=y+(this.i(I)&65535)+(E.i(I)&65535),m=(T>>>16)+(this.i(I)>>>16)+(E.i(I)>>>16);y=m>>>16,T&=65535,m&=65535,g[I]=m<<16|T}return new c(g,g[g.length-1]&-2147483648?-1:0)};function J(E,p){return E.add(O(p))}n.j=function(E){if(k(this)||k(E))return b;if(U(this))return U(E)?O(this).j(O(E)):O(O(this).j(E));if(U(E))return O(this.j(O(E)));if(0>this.l(D)&&0>E.l(D))return f(this.m()*E.m());for(var p=this.g.length+E.g.length,g=[],y=0;y<2*p;y++)g[y]=0;for(y=0;y<this.g.length;y++)for(var I=0;I<E.g.length;I++){var T=this.i(y)>>>16,m=this.i(y)&65535,Xe=E.i(I)>>>16,tr=E.i(I)&65535;g[2*y+2*I]+=m*tr,K(g,2*y+2*I),g[2*y+2*I+1]+=T*tr,K(g,2*y+2*I+1),g[2*y+2*I+1]+=m*Xe,K(g,2*y+2*I+1),g[2*y+2*I+2]+=T*Xe,K(g,2*y+2*I+2)}for(y=0;y<p;y++)g[y]=g[2*y+1]<<16|g[2*y];for(y=p;y<2*p;y++)g[y]=0;return new c(g,0)};function K(E,p){for(;(E[p]&65535)!=E[p];)E[p+1]+=E[p]>>>16,E[p]&=65535,p++}function Y(E,p){this.g=E,this.h=p}function se(E,p){if(k(p))throw Error("division by zero");if(k(E))return new Y(b,b);if(U(E))return p=se(O(E),p),new Y(O(p.g),O(p.h));if(U(p))return p=se(E,O(p)),new Y(O(p.g),p.h);if(30<E.g.length){if(U(E)||U(p))throw Error("slowDivide_ only works with positive integers.");for(var g=S,y=p;0>=y.l(E);)g=Ge(g),y=Ge(y);var I=ce(g,1),T=ce(y,1);for(y=ce(y,2),g=ce(g,2);!k(y);){var m=T.add(y);0>=m.l(E)&&(I=I.add(g),T=m),y=ce(y,1),g=ce(g,1)}return p=J(E,I.j(p)),new Y(I,p)}for(I=b;0<=E.l(p);){for(g=Math.max(1,Math.floor(E.m()/p.m())),y=Math.ceil(Math.log(g)/Math.LN2),y=48>=y?1:Math.pow(2,y-48),T=f(g),m=T.j(p);U(m)||0<m.l(E);)g-=y,T=f(g),m=T.j(p);k(T)&&(T=S),I=I.add(T),E=J(E,m)}return new Y(I,E)}n.A=function(E){return se(this,E).h},n.and=function(E){for(var p=Math.max(this.g.length,E.g.length),g=[],y=0;y<p;y++)g[y]=this.i(y)&E.i(y);return new c(g,this.h&E.h)},n.or=function(E){for(var p=Math.max(this.g.length,E.g.length),g=[],y=0;y<p;y++)g[y]=this.i(y)|E.i(y);return new c(g,this.h|E.h)},n.xor=function(E){for(var p=Math.max(this.g.length,E.g.length),g=[],y=0;y<p;y++)g[y]=this.i(y)^E.i(y);return new c(g,this.h^E.h)};function Ge(E){for(var p=E.g.length+1,g=[],y=0;y<p;y++)g[y]=E.i(y)<<1|E.i(y-1)>>>31;return new c(g,E.h)}function ce(E,p){var g=p>>5;p%=32;for(var y=E.g.length-g,I=[],T=0;T<y;T++)I[T]=0<p?E.i(T+g)>>>p|E.i(T+g+1)<<32-p:E.i(T+g);return new c(I,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,hf=lf.Md5=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=v,rc=lf.Integer=c}).apply(typeof uf<"u"?uf:typeof self<"u"?self:typeof window<"u"?window:{});var ms=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ut={};var ic,sc,Mn,oc,Yr,gs,ac,cc,uc;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(s,a,u){return s==Array.prototype||s==Object.prototype||(s[a]=u.value),s};function t(s){s=[typeof globalThis=="object"&&globalThis,s,typeof window=="object"&&window,typeof self=="object"&&self,typeof ms=="object"&&ms];for(var a=0;a<s.length;++a){var u=s[a];if(u&&u.Math==Math)return u}throw Error("Cannot find global object")}var r=t(this);function i(s,a){if(a)e:{var u=r;s=s.split(".");for(var d=0;d<s.length-1;d++){var w=s[d];if(!(w in u))break e;u=u[w]}s=s[s.length-1],d=u[s],a=a(d),a!=d&&a!=null&&e(u,s,{configurable:!0,writable:!0,value:a})}}function o(s,a){s instanceof String&&(s+="");var u=0,d=!1,w={next:function(){if(!d&&u<s.length){var A=u++;return{value:a(A,s[A]),done:!1}}return d=!0,{done:!0,value:void 0}}};return w[Symbol.iterator]=function(){return w},w}i("Array.prototype.values",function(s){return s||function(){return o(this,function(a,u){return u})}});var c=c||{},l=this||self;function h(s){var a=typeof s;return a=a!="object"?a:s?Array.isArray(s)?"array":a:"null",a=="array"||a=="object"&&typeof s.length=="number"}function f(s){var a=typeof s;return a=="object"&&s!=null||a=="function"}function v(s,a,u){return s.call.apply(s.bind,arguments)}function b(s,a,u){if(!s)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var w=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(w,d),s.apply(a,w)}}return function(){return s.apply(a,arguments)}}function S(s,a,u){return S=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:b,S.apply(null,arguments)}function D(s,a){var u=Array.prototype.slice.call(arguments,1);return function(){var d=u.slice();return d.push.apply(d,arguments),s.apply(this,d)}}function k(s,a){function u(){}u.prototype=a.prototype,s.aa=a.prototype,s.prototype=new u,s.prototype.constructor=s,s.Qb=function(d,w,A){for(var P=Array(arguments.length-2),W=2;W<arguments.length;W++)P[W-2]=arguments[W];return a.prototype[w].apply(d,P)}}function U(s){let a=s.length;if(0<a){let u=Array(a);for(let d=0;d<a;d++)u[d]=s[d];return u}return[]}function O(s,a){for(let u=1;u<arguments.length;u++){let d=arguments[u];if(h(d)){let w=s.length||0,A=d.length||0;s.length=w+A;for(let P=0;P<A;P++)s[w+P]=d[P]}else s.push(d)}}class J{constructor(a,u){this.i=a,this.j=u,this.h=0,this.g=null}get(){let a;return 0<this.h?(this.h--,a=this.g,this.g=a.next,a.next=null):a=this.i(),a}}function K(s){return/^[\s\xa0]*$/.test(s)}function Y(){var s=l.navigator;return s&&(s=s.userAgent)?s:""}function se(s){return se[" "](s),s}se[" "]=function(){};var Ge=Y().indexOf("Gecko")!=-1&&!(Y().toLowerCase().indexOf("webkit")!=-1&&Y().indexOf("Edge")==-1)&&!(Y().indexOf("Trident")!=-1||Y().indexOf("MSIE")!=-1)&&Y().indexOf("Edge")==-1;function ce(s,a,u){for(let d in s)a.call(u,s[d],d,s)}function E(s,a){for(let u in s)a.call(void 0,s[u],u,s)}function p(s){let a={};for(let u in s)a[u]=s[u];return a}let g="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function y(s,a){let u,d;for(let w=1;w<arguments.length;w++){d=arguments[w];for(u in d)s[u]=d[u];for(let A=0;A<g.length;A++)u=g[A],Object.prototype.hasOwnProperty.call(d,u)&&(s[u]=d[u])}}function I(s){var a=1;s=s.split(":");let u=[];for(;0<a&&s.length;)u.push(s.shift()),a--;return s.length&&u.push(s.join(":")),u}function T(s){l.setTimeout(()=>{throw s},0)}function m(){var s=to;let a=null;return s.g&&(a=s.g,s.g=s.g.next,s.g||(s.h=null),a.next=null),a}class Xe{constructor(){this.h=this.g=null}add(a,u){let d=tr.get();d.set(a,u),this.h?this.h.next=d:this.g=d,this.h=d}}var tr=new J(()=>new Mp,s=>s.reset());class Mp{constructor(){this.next=this.g=this.h=null}set(a,u){this.h=a,this.g=u,this.next=null}reset(){this.next=this.g=this.h=null}}let nr,rr=!1,to=new Xe,$u=()=>{let s=l.Promise.resolve(void 0);nr=()=>{s.then(Fp)}};var Fp=()=>{for(var s;s=m();){try{s.h.call(s.g)}catch(u){T(u)}var a=tr;a.j(s),100>a.h&&(a.h++,s.next=a.g,a.g=s)}rr=!1};function pt(){this.s=this.s,this.C=this.C}pt.prototype.s=!1,pt.prototype.ma=function(){this.s||(this.s=!0,this.N())},pt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(s,a){this.type=s,this.g=this.target=a,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var Lp=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var s=!1,a=Object.defineProperty({},"passive",{get:function(){s=!0}});try{let u=()=>{};l.addEventListener("test",u,a),l.removeEventListener("test",u,a)}catch{}return s}();function ir(s,a){if(pe.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var u=this.type=s.type,d=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=a,a=s.relatedTarget){if(Ge){e:{try{se(a.nodeName);var w=!0;break e}catch{}w=!1}w||(a=null)}}else u=="mouseover"?a=s.fromElement:u=="mouseout"&&(a=s.toElement);this.relatedTarget=a,d?(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType=typeof s.pointerType=="string"?s.pointerType:Up[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&ir.aa.h.call(this)}}k(ir,pe);var Up={2:"touch",3:"pen",4:"mouse"};ir.prototype.h=function(){ir.aa.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var sr="closure_listenable_"+(1e6*Math.random()|0),Bp=0;function qp(s,a,u,d,w){this.listener=s,this.proxy=null,this.src=a,this.type=u,this.capture=!!d,this.ha=w,this.key=++Bp,this.da=this.fa=!1}function di(s){s.da=!0,s.listener=null,s.proxy=null,s.src=null,s.ha=null}function fi(s){this.src=s,this.g={},this.h=0}fi.prototype.add=function(s,a,u,d,w){var A=s.toString();s=this.g[A],s||(s=this.g[A]=[],this.h++);var P=ro(s,a,d,w);return-1<P?(a=s[P],u||(a.fa=!1)):(a=new qp(a,this.src,A,!!d,w),a.fa=u,s.push(a)),a};function no(s,a){var u=a.type;if(u in s.g){var d=s.g[u],w=Array.prototype.indexOf.call(d,a,void 0),A;(A=0<=w)&&Array.prototype.splice.call(d,w,1),A&&(di(a),s.g[u].length==0&&(delete s.g[u],s.h--))}}function ro(s,a,u,d){for(var w=0;w<s.length;++w){var A=s[w];if(!A.da&&A.listener==a&&A.capture==!!u&&A.ha==d)return w}return-1}var io="closure_lm_"+(1e6*Math.random()|0),so={};function zu(s,a,u,d,w){if(d&&d.once)return Hu(s,a,u,d,w);if(Array.isArray(a)){for(var A=0;A<a.length;A++)zu(s,a[A],u,d,w);return null}return u=uo(u),s&&s[sr]?s.K(a,u,f(d)?!!d.capture:!!d,w):Wu(s,a,u,!1,d,w)}function Wu(s,a,u,d,w,A){if(!a)throw Error("Invalid event type");var P=f(w)?!!w.capture:!!w,W=ao(s);if(W||(s[io]=W=new fi(s)),u=W.add(a,u,d,P,A),u.proxy)return u;if(d=jp(),u.proxy=d,d.src=s,d.listener=u,s.addEventListener)Lp||(w=P),w===void 0&&(w=!1),s.addEventListener(a.toString(),d,w);else if(s.attachEvent)s.attachEvent(Qu(a.toString()),d);else if(s.addListener&&s.removeListener)s.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");return u}function jp(){function s(u){return a.call(s.src,s.listener,u)}let a=Gp;return s}function Hu(s,a,u,d,w){if(Array.isArray(a)){for(var A=0;A<a.length;A++)Hu(s,a[A],u,d,w);return null}return u=uo(u),s&&s[sr]?s.L(a,u,f(d)?!!d.capture:!!d,w):Wu(s,a,u,!0,d,w)}function Ku(s,a,u,d,w){if(Array.isArray(a))for(var A=0;A<a.length;A++)Ku(s,a[A],u,d,w);else d=f(d)?!!d.capture:!!d,u=uo(u),s&&s[sr]?(s=s.i,a=String(a).toString(),a in s.g&&(A=s.g[a],u=ro(A,u,d,w),-1<u&&(di(A[u]),Array.prototype.splice.call(A,u,1),A.length==0&&(delete s.g[a],s.h--)))):s&&(s=ao(s))&&(a=s.g[a.toString()],s=-1,a&&(s=ro(a,u,d,w)),(u=-1<s?a[s]:null)&&oo(u))}function oo(s){if(typeof s!="number"&&s&&!s.da){var a=s.src;if(a&&a[sr])no(a.i,s);else{var u=s.type,d=s.proxy;a.removeEventListener?a.removeEventListener(u,d,s.capture):a.detachEvent?a.detachEvent(Qu(u),d):a.addListener&&a.removeListener&&a.removeListener(d),(u=ao(a))?(no(u,s),u.h==0&&(u.src=null,a[io]=null)):di(s)}}}function Qu(s){return s in so?so[s]:so[s]="on"+s}function Gp(s,a){if(s.da)s=!0;else{a=new ir(a,this);var u=s.listener,d=s.ha||s.src;s.fa&&oo(s),s=u.call(d,a)}return s}function ao(s){return s=s[io],s instanceof fi?s:null}var co="__closure_events_fn_"+(1e9*Math.random()>>>0);function uo(s){return typeof s=="function"?s:(s[co]||(s[co]=function(a){return s.handleEvent(a)}),s[co])}function me(){pt.call(this),this.i=new fi(this),this.M=this,this.F=null}k(me,pt),me.prototype[sr]=!0,me.prototype.removeEventListener=function(s,a,u,d){Ku(this,s,a,u,d)};function we(s,a){var u,d=s.F;if(d)for(u=[];d;d=d.F)u.push(d);if(s=s.M,d=a.type||a,typeof a=="string")a=new pe(a,s);else if(a instanceof pe)a.target=a.target||s;else{var w=a;a=new pe(d,s),y(a,w)}if(w=!0,u)for(var A=u.length-1;0<=A;A--){var P=a.g=u[A];w=pi(P,d,!0,a)&&w}if(P=a.g=s,w=pi(P,d,!0,a)&&w,w=pi(P,d,!1,a)&&w,u)for(A=0;A<u.length;A++)P=a.g=u[A],w=pi(P,d,!1,a)&&w}me.prototype.N=function(){if(me.aa.N.call(this),this.i){var s=this.i,a;for(a in s.g){for(var u=s.g[a],d=0;d<u.length;d++)di(u[d]);delete s.g[a],s.h--}}this.F=null},me.prototype.K=function(s,a,u,d){return this.i.add(String(s),a,!1,u,d)},me.prototype.L=function(s,a,u,d){return this.i.add(String(s),a,!0,u,d)};function pi(s,a,u,d){if(a=s.i.g[String(a)],!a)return!0;a=a.concat();for(var w=!0,A=0;A<a.length;++A){var P=a[A];if(P&&!P.da&&P.capture==u){var W=P.listener,de=P.ha||P.src;P.fa&&no(s.i,P),w=W.call(de,d)!==!1&&w}}return w&&!d.defaultPrevented}function Ju(s,a,u){if(typeof s=="function")u&&(s=S(s,u));else if(s&&typeof s.handleEvent=="function")s=S(s.handleEvent,s);else throw Error("Invalid listener argument");return 2147483647<Number(a)?-1:l.setTimeout(s,a||0)}function Yu(s){s.g=Ju(()=>{s.g=null,s.i&&(s.i=!1,Yu(s))},s.l);let a=s.h;s.h=null,s.m.apply(null,a)}class $p extends pt{constructor(a,u){super(),this.m=a,this.l=u,this.h=null,this.i=!1,this.g=null}j(a){this.h=arguments,this.g?this.i=!0:Yu(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function or(s){pt.call(this),this.h=s,this.g={}}k(or,pt);var Xu=[];function Zu(s){ce(s.g,function(a,u){this.g.hasOwnProperty(u)&&oo(a)},s),s.g={}}or.prototype.N=function(){or.aa.N.call(this),Zu(this)},or.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var lo=l.JSON.stringify,zp=l.JSON.parse,Wp=class{stringify(s){return l.JSON.stringify(s,void 0)}parse(s){return l.JSON.parse(s,void 0)}};function ho(){}ho.prototype.h=null;function el(s){return s.h||(s.h=s.i())}function tl(){}var ar={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function fo(){pe.call(this,"d")}k(fo,pe);function po(){pe.call(this,"c")}k(po,pe);var Lt={},nl=null;function mi(){return nl=nl||new me}Lt.La="serverreachability";function rl(s){pe.call(this,Lt.La,s)}k(rl,pe);function cr(s){let a=mi();we(a,new rl(a))}Lt.STAT_EVENT="statevent";function il(s,a){pe.call(this,Lt.STAT_EVENT,s),this.stat=a}k(il,pe);function Te(s){let a=mi();we(a,new il(a,s))}Lt.Ma="timingevent";function sl(s,a){pe.call(this,Lt.Ma,s),this.size=a}k(sl,pe);function ur(s,a){if(typeof s!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){s()},a)}function lr(){this.g=!0}lr.prototype.xa=function(){this.g=!1};function Hp(s,a,u,d,w,A){s.info(function(){if(s.g)if(A)for(var P="",W=A.split("&"),de=0;de<W.length;de++){var $=W[de].split("=");if(1<$.length){var ge=$[0];$=$[1];var _e=ge.split("_");P=2<=_e.length&&_e[1]=="type"?P+(ge+"="+$+"&"):P+(ge+"=redacted&")}}else P=null;else P=A;return"XMLHTTP REQ ("+d+") [attempt "+w+"]: "+a+`
`+u+`
`+P})}function Kp(s,a,u,d,w,A,P){s.info(function(){return"XMLHTTP RESP ("+d+") [ attempt "+w+"]: "+a+`
`+u+`
`+A+" "+P})}function hn(s,a,u,d){s.info(function(){return"XMLHTTP TEXT ("+a+"): "+Jp(s,u)+(d?" "+d:"")})}function Qp(s,a){s.info(function(){return"TIMEOUT: "+a})}lr.prototype.info=function(){};function Jp(s,a){if(!s.g)return a;if(!a)return null;try{var u=JSON.parse(a);if(u){for(s=0;s<u.length;s++)if(Array.isArray(u[s])){var d=u[s];if(!(2>d.length)){var w=d[1];if(Array.isArray(w)&&!(1>w.length)){var A=w[0];if(A!="noop"&&A!="stop"&&A!="close")for(var P=1;P<w.length;P++)w[P]=""}}}}return lo(u)}catch{return a}}var gi={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ol={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},mo;function _i(){}k(_i,ho),_i.prototype.g=function(){return new XMLHttpRequest},_i.prototype.i=function(){return{}},mo=new _i;function mt(s,a,u,d){this.j=s,this.i=a,this.l=u,this.R=d||1,this.U=new or(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new al}function al(){this.i=null,this.g="",this.h=!1}var cl={},go={};function _o(s,a,u){s.L=1,s.v=Ei(Ze(a)),s.m=u,s.P=!0,ul(s,null)}function ul(s,a){s.F=Date.now(),yi(s),s.A=Ze(s.v);var u=s.A,d=s.R;Array.isArray(d)||(d=[String(d)]),Tl(u.i,"t",d),s.C=0,u=s.j.J,s.h=new al,s.g=ql(s.j,u?a:null,!s.m),0<s.O&&(s.M=new $p(S(s.Y,s,s.g),s.O)),a=s.U,u=s.g,d=s.ca;var w="readystatechange";Array.isArray(w)||(w&&(Xu[0]=w.toString()),w=Xu);for(var A=0;A<w.length;A++){var P=zu(u,w[A],d||a.handleEvent,!1,a.h||a);if(!P)break;a.g[P.key]=P}a=s.H?p(s.H):{},s.m?(s.u||(s.u="POST"),a["Content-Type"]="application/x-www-form-urlencoded",s.g.ea(s.A,s.u,s.m,a)):(s.u="GET",s.g.ea(s.A,s.u,null,a)),cr(),Hp(s.i,s.u,s.A,s.l,s.R,s.m)}mt.prototype.ca=function(s){s=s.target;let a=this.M;a&&et(s)==3?a.j():this.Y(s)},mt.prototype.Y=function(s){try{if(s==this.g)e:{let _e=et(this.g);var a=this.g.Ba();let pn=this.g.Z();if(!(3>_e)&&(_e!=3||this.g&&(this.h.h||this.g.oa()||Dl(this.g)))){this.J||_e!=4||a==7||(a==8||0>=pn?cr(3):cr(2)),yo(this);var u=this.g.Z();this.X=u;t:if(ll(this)){var d=Dl(this.g);s="";var w=d.length,A=et(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ut(this),hr(this);var P="";break t}this.h.i=new l.TextDecoder}for(a=0;a<w;a++)this.h.h=!0,s+=this.h.i.decode(d[a],{stream:!(A&&a==w-1)});d.length=0,this.h.g+=s,this.C=0,P=this.h.g}else P=this.g.oa();if(this.o=u==200,Kp(this.i,this.u,this.A,this.l,this.R,_e,u),this.o){if(this.T&&!this.K){t:{if(this.g){var W,de=this.g;if((W=de.g?de.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(W)){var $=W;break t}}$=null}if(u=$)hn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vo(this,u);else{this.o=!1,this.s=3,Te(12),Ut(this),hr(this);break e}}if(this.P){u=!0;let Ue;for(;!this.J&&this.C<P.length;)if(Ue=Yp(this,P),Ue==go){_e==4&&(this.s=4,Te(14),u=!1),hn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ue==cl){this.s=4,Te(15),hn(this.i,this.l,P,"[Invalid Chunk]"),u=!1;break}else hn(this.i,this.l,Ue,null),vo(this,Ue);if(ll(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_e!=4||P.length!=0||this.h.h||(this.s=1,Te(16),u=!1),this.o=this.o&&u,!u)hn(this.i,this.l,P,"[Invalid Chunked Response]"),Ut(this),hr(this);else if(0<P.length&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.ba&&!ge.M&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),bo(ge),ge.M=!0,Te(11))}}else hn(this.i,this.l,P,null),vo(this,P);_e==4&&Ut(this),this.o&&!this.J&&(_e==4?Fl(this.j,this):(this.o=!1,yi(this)))}else pm(this.g),u==400&&0<P.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),Ut(this),hr(this)}}}catch{}finally{}};function ll(s){return s.g?s.u=="GET"&&s.L!=2&&s.j.Ca:!1}function Yp(s,a){var u=s.C,d=a.indexOf(`
`,u);return d==-1?go:(u=Number(a.substring(u,d)),isNaN(u)?cl:(d+=1,d+u>a.length?go:(a=a.slice(d,d+u),s.C=d+u,a)))}mt.prototype.cancel=function(){this.J=!0,Ut(this)};function yi(s){s.S=Date.now()+s.I,hl(s,s.I)}function hl(s,a){if(s.B!=null)throw Error("WatchDog timer not null");s.B=ur(S(s.ba,s),a)}function yo(s){s.B&&(l.clearTimeout(s.B),s.B=null)}mt.prototype.ba=function(){this.B=null;let s=Date.now();0<=s-this.S?(Qp(this.i,this.A),this.L!=2&&(cr(),Te(17)),Ut(this),this.s=2,hr(this)):hl(this,this.S-s)};function hr(s){s.j.G==0||s.J||Fl(s.j,s)}function Ut(s){yo(s);var a=s.M;a&&typeof a.ma=="function"&&a.ma(),s.M=null,Zu(s.U),s.g&&(a=s.g,s.g=null,a.abort(),a.ma())}function vo(s,a){try{var u=s.j;if(u.G!=0&&(u.g==s||Io(u.h,s))){if(!s.K&&Io(u.h,s)&&u.G==3){try{var d=u.Da.g.parse(a)}catch{d=null}if(Array.isArray(d)&&d.length==3){var w=d;if(w[0]==0){e:if(!u.u){if(u.g)if(u.g.F+3e3<s.F)Si(u),Ai(u);else break e;Ao(u),Te(18)}}else u.za=w[1],0<u.za-u.T&&37500>w[2]&&u.F&&u.v==0&&!u.C&&(u.C=ur(S(u.Za,u),6e3));if(1>=pl(u.h)&&u.ca){try{u.ca()}catch{}u.ca=void 0}}else qt(u,11)}else if((s.K||u.g==s)&&Si(u),!K(a))for(w=u.Da.g.parse(a),a=0;a<w.length;a++){let $=w[a];if(u.T=$[0],$=$[1],u.G==2)if($[0]=="c"){u.K=$[1],u.ia=$[2];let ge=$[3];ge!=null&&(u.la=ge,u.j.info("VER="+u.la));let _e=$[4];_e!=null&&(u.Aa=_e,u.j.info("SVER="+u.Aa));let pn=$[5];pn!=null&&typeof pn=="number"&&0<pn&&(d=1.5*pn,u.L=d,u.j.info("backChannelRequestTimeoutMs_="+d)),d=u;let Ue=s.g;if(Ue){let Ri=Ue.g?Ue.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ri){var A=d.h;A.g||Ri.indexOf("spdy")==-1&&Ri.indexOf("quic")==-1&&Ri.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Eo(A,A.h),A.h=null))}if(d.D){let So=Ue.g?Ue.g.getResponseHeader("X-HTTP-Session-Id"):null;So&&(d.ya=So,X(d.I,d.D,So))}}u.G=3,u.l&&u.l.ua(),u.ba&&(u.R=Date.now()-s.F,u.j.info("Handshake RTT: "+u.R+"ms")),d=u;var P=s;if(d.qa=Bl(d,d.J?d.ia:null,d.W),P.K){ml(d.h,P);var W=P,de=d.L;de&&(W.I=de),W.B&&(yo(W),yi(W)),d.g=P}else Ol(d);0<u.i.length&&bi(u)}else $[0]!="stop"&&$[0]!="close"||qt(u,7);else u.G==3&&($[0]=="stop"||$[0]=="close"?$[0]=="stop"?qt(u,7):To(u):$[0]!="noop"&&u.l&&u.l.ta($),u.v=0)}}cr(4)}catch{}}var Xp=class{constructor(s,a){this.g=s,this.map=a}};function dl(s){this.l=s||10,l.PerformanceNavigationTiming?(s=l.performance.getEntriesByType("navigation"),s=0<s.length&&(s[0].nextHopProtocol=="hq"||s[0].nextHopProtocol=="h2")):s=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function fl(s){return s.h?!0:s.g?s.g.size>=s.j:!1}function pl(s){return s.h?1:s.g?s.g.size:0}function Io(s,a){return s.h?s.h==a:s.g?s.g.has(a):!1}function Eo(s,a){s.g?s.g.add(a):s.h=a}function ml(s,a){s.h&&s.h==a?s.h=null:s.g&&s.g.has(a)&&s.g.delete(a)}dl.prototype.cancel=function(){if(this.i=gl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let s of this.g.values())s.cancel();this.g.clear()}};function gl(s){if(s.h!=null)return s.i.concat(s.h.D);if(s.g!=null&&s.g.size!==0){let a=s.i;for(let u of s.g.values())a=a.concat(u.D);return a}return U(s.i)}function Zp(s){if(s.V&&typeof s.V=="function")return s.V();if(typeof Map<"u"&&s instanceof Map||typeof Set<"u"&&s instanceof Set)return Array.from(s.values());if(typeof s=="string")return s.split("");if(h(s)){for(var a=[],u=s.length,d=0;d<u;d++)a.push(s[d]);return a}a=[],u=0;for(d in s)a[u++]=s[d];return a}function em(s){if(s.na&&typeof s.na=="function")return s.na();if(!s.V||typeof s.V!="function"){if(typeof Map<"u"&&s instanceof Map)return Array.from(s.keys());if(!(typeof Set<"u"&&s instanceof Set)){if(h(s)||typeof s=="string"){var a=[];s=s.length;for(var u=0;u<s;u++)a.push(u);return a}a=[],u=0;for(let d in s)a[u++]=d;return a}}}function _l(s,a){if(s.forEach&&typeof s.forEach=="function")s.forEach(a,void 0);else if(h(s)||typeof s=="string")Array.prototype.forEach.call(s,a,void 0);else for(var u=em(s),d=Zp(s),w=d.length,A=0;A<w;A++)a.call(void 0,d[A],u&&u[A],s)}var yl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tm(s,a){if(s){s=s.split("&");for(var u=0;u<s.length;u++){var d=s[u].indexOf("="),w=null;if(0<=d){var A=s[u].substring(0,d);w=s[u].substring(d+1)}else A=s[u];a(A,w?decodeURIComponent(w.replace(/\+/g," ")):"")}}}function Bt(s){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,s instanceof Bt){this.h=s.h,vi(this,s.j),this.o=s.o,this.g=s.g,Ii(this,s.s),this.l=s.l;var a=s.i,u=new pr;u.i=a.i,a.g&&(u.g=new Map(a.g),u.h=a.h),vl(this,u),this.m=s.m}else s&&(a=String(s).match(yl))?(this.h=!1,vi(this,a[1]||"",!0),this.o=dr(a[2]||""),this.g=dr(a[3]||"",!0),Ii(this,a[4]),this.l=dr(a[5]||"",!0),vl(this,a[6]||"",!0),this.m=dr(a[7]||"")):(this.h=!1,this.i=new pr(null,this.h))}Bt.prototype.toString=function(){var s=[],a=this.j;a&&s.push(fr(a,Il,!0),":");var u=this.g;return(u||a=="file")&&(s.push("//"),(a=this.o)&&s.push(fr(a,Il,!0),"@"),s.push(encodeURIComponent(String(u)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u=this.s,u!=null&&s.push(":",String(u))),(u=this.l)&&(this.g&&u.charAt(0)!="/"&&s.push("/"),s.push(fr(u,u.charAt(0)=="/"?im:rm,!0))),(u=this.i.toString())&&s.push("?",u),(u=this.m)&&s.push("#",fr(u,om)),s.join("")};function Ze(s){return new Bt(s)}function vi(s,a,u){s.j=u?dr(a,!0):a,s.j&&(s.j=s.j.replace(/:$/,""))}function Ii(s,a){if(a){if(a=Number(a),isNaN(a)||0>a)throw Error("Bad port number "+a);s.s=a}else s.s=null}function vl(s,a,u){a instanceof pr?(s.i=a,am(s.i,s.h)):(u||(a=fr(a,sm)),s.i=new pr(a,s.h))}function X(s,a,u){s.i.set(a,u)}function Ei(s){return X(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function dr(s,a){return s?a?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function fr(s,a,u){return typeof s=="string"?(s=encodeURI(s).replace(a,nm),u&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function nm(s){return s=s.charCodeAt(0),"%"+(s>>4&15).toString(16)+(s&15).toString(16)}var Il=/[#\/\?@]/g,rm=/[#\?:]/g,im=/[#\?]/g,sm=/[#\?@]/g,om=/#/g;function pr(s,a){this.h=this.g=null,this.i=s||null,this.j=!!a}function gt(s){s.g||(s.g=new Map,s.h=0,s.i&&tm(s.i,function(a,u){s.add(decodeURIComponent(a.replace(/\+/g," ")),u)}))}n=pr.prototype,n.add=function(s,a){gt(this),this.i=null,s=dn(this,s);var u=this.g.get(s);return u||this.g.set(s,u=[]),u.push(a),this.h+=1,this};function El(s,a){gt(s),a=dn(s,a),s.g.has(a)&&(s.i=null,s.h-=s.g.get(a).length,s.g.delete(a))}function wl(s,a){return gt(s),a=dn(s,a),s.g.has(a)}n.forEach=function(s,a){gt(this),this.g.forEach(function(u,d){u.forEach(function(w){s.call(a,w,d,this)},this)},this)},n.na=function(){gt(this);let s=Array.from(this.g.values()),a=Array.from(this.g.keys()),u=[];for(let d=0;d<a.length;d++){let w=s[d];for(let A=0;A<w.length;A++)u.push(a[d])}return u},n.V=function(s){gt(this);let a=[];if(typeof s=="string")wl(this,s)&&(a=a.concat(this.g.get(dn(this,s))));else{s=Array.from(this.g.values());for(let u=0;u<s.length;u++)a=a.concat(s[u])}return a},n.set=function(s,a){return gt(this),this.i=null,s=dn(this,s),wl(this,s)&&(this.h-=this.g.get(s).length),this.g.set(s,[a]),this.h+=1,this},n.get=function(s,a){return s?(s=this.V(s),0<s.length?String(s[0]):a):a};function Tl(s,a,u){El(s,a),0<u.length&&(s.i=null,s.g.set(dn(s,a),U(u)),s.h+=u.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let s=[],a=Array.from(this.g.keys());for(var u=0;u<a.length;u++){var d=a[u];let A=encodeURIComponent(String(d)),P=this.V(d);for(d=0;d<P.length;d++){var w=A;P[d]!==""&&(w+="="+encodeURIComponent(String(P[d]))),s.push(w)}}return this.i=s.join("&")};function dn(s,a){return a=String(a),s.j&&(a=a.toLowerCase()),a}function am(s,a){a&&!s.j&&(gt(s),s.i=null,s.g.forEach(function(u,d){var w=d.toLowerCase();d!=w&&(El(this,d),Tl(this,w,u))},s)),s.j=a}function cm(s,a){let u=new lr;if(l.Image){let d=new Image;d.onload=D(_t,u,"TestLoadImage: loaded",!0,a,d),d.onerror=D(_t,u,"TestLoadImage: error",!1,a,d),d.onabort=D(_t,u,"TestLoadImage: abort",!1,a,d),d.ontimeout=D(_t,u,"TestLoadImage: timeout",!1,a,d),l.setTimeout(function(){d.ontimeout&&d.ontimeout()},1e4),d.src=s}else a(!1)}function um(s,a){let u=new lr,d=new AbortController,w=setTimeout(()=>{d.abort(),_t(u,"TestPingServer: timeout",!1,a)},1e4);fetch(s,{signal:d.signal}).then(A=>{clearTimeout(w),A.ok?_t(u,"TestPingServer: ok",!0,a):_t(u,"TestPingServer: server error",!1,a)}).catch(()=>{clearTimeout(w),_t(u,"TestPingServer: error",!1,a)})}function _t(s,a,u,d,w){try{w&&(w.onload=null,w.onerror=null,w.onabort=null,w.ontimeout=null),d(u)}catch{}}function lm(){this.g=new Wp}function hm(s,a,u){let d=u||"";try{_l(s,function(w,A){let P=w;f(w)&&(P=lo(w)),a.push(d+A+"="+encodeURIComponent(P))})}catch(w){throw a.push(d+"type="+encodeURIComponent("_badmap")),w}}function mr(s){this.l=s.Ub||null,this.j=s.eb||!1}k(mr,ho),mr.prototype.g=function(){return new wi(this.l,this.j)},mr.prototype.i=function(s){return function(){return s}}({});function wi(s,a){me.call(this),this.D=s,this.o=a,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(wi,me),n=wi.prototype,n.open=function(s,a){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=s,this.A=a,this.readyState=1,_r(this)},n.send=function(s){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let a={headers:this.u,method:this.B,credentials:this.m,cache:void 0};s&&(a.body=s),(this.D||l).fetch(new Request(this.A,a)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,gr(this)),this.readyState=0},n.Sa=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,_r(this)),this.g&&(this.readyState=3,_r(this),this.g)))if(this.responseType==="arraybuffer")s.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in s){if(this.j=s.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Al(this)}else s.text().then(this.Ra.bind(this),this.ga.bind(this))};function Al(s){s.j.read().then(s.Pa.bind(s)).catch(s.ga.bind(s))}n.Pa=function(s){if(this.g){if(this.o&&s.value)this.response.push(s.value);else if(!this.o){var a=s.value?s.value:new Uint8Array(0);(a=this.v.decode(a,{stream:!s.done}))&&(this.response=this.responseText+=a)}s.done?gr(this):_r(this),this.readyState==3&&Al(this)}},n.Ra=function(s){this.g&&(this.response=this.responseText=s,gr(this))},n.Qa=function(s){this.g&&(this.response=s,gr(this))},n.ga=function(){this.g&&gr(this)};function gr(s){s.readyState=4,s.l=null,s.j=null,s.v=null,_r(s)}n.setRequestHeader=function(s,a){this.u.append(s,a)},n.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let s=[],a=this.h.entries();for(var u=a.next();!u.done;)u=u.value,s.push(u[0]+": "+u[1]),u=a.next();return s.join(`\r
`)};function _r(s){s.onreadystatechange&&s.onreadystatechange.call(s)}Object.defineProperty(wi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(s){this.m=s?"include":"same-origin"}});function bl(s){let a="";return ce(s,function(u,d){a+=d,a+=":",a+=u,a+=`\r
`}),a}function wo(s,a,u){e:{for(d in u){var d=!1;break e}d=!0}d||(u=bl(u),typeof s=="string"?u!=null&&encodeURIComponent(String(u)):X(s,a,u))}function Z(s){me.call(this),this.headers=new Map,this.o=s||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(Z,me);var dm=/^https?$/i,fm=["POST","PUT"];n=Z.prototype,n.Ha=function(s){this.J=s},n.ea=function(s,a,u,d){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+s);a=a?a.toUpperCase():"GET",this.D=s,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():mo.g(),this.v=this.o?el(this.o):el(mo),this.g.onreadystatechange=S(this.Ea,this);try{this.B=!0,this.g.open(a,String(s),!0),this.B=!1}catch(A){Sl(this,A);return}if(s=u||"",u=new Map(this.headers),d)if(Object.getPrototypeOf(d)===Object.prototype)for(var w in d)u.set(w,d[w]);else if(typeof d.keys=="function"&&typeof d.get=="function")for(let A of d.keys())u.set(A,d.get(A));else throw Error("Unknown input type for opt_headers: "+String(d));d=Array.from(u.keys()).find(A=>A.toLowerCase()=="content-type"),w=l.FormData&&s instanceof l.FormData,!(0<=Array.prototype.indexOf.call(fm,a,void 0))||d||w||u.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,P]of u)this.g.setRequestHeader(A,P);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Pl(this),this.u=!0,this.g.send(s),this.u=!1}catch(A){Sl(this,A)}};function Sl(s,a){s.h=!1,s.g&&(s.j=!0,s.g.abort(),s.j=!1),s.l=a,s.m=5,Cl(s),Ti(s)}function Cl(s){s.A||(s.A=!0,we(s,"complete"),we(s,"error"))}n.abort=function(s){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=s||7,we(this,"complete"),we(this,"abort"),Ti(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ti(this,!0)),Z.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Rl(this):this.bb())},n.bb=function(){Rl(this)};function Rl(s){if(s.h&&typeof c<"u"&&(!s.v[1]||et(s)!=4||s.Z()!=2)){if(s.u&&et(s)==4)Ju(s.Ea,0,s);else if(we(s,"readystatechange"),et(s)==4){s.h=!1;try{let P=s.Z();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var a=!0;break e;default:a=!1}var u;if(!(u=a)){var d;if(d=P===0){var w=String(s.D).match(yl)[1]||null;!w&&l.self&&l.self.location&&(w=l.self.location.protocol.slice(0,-1)),d=!dm.test(w?w.toLowerCase():"")}u=d}if(u)we(s,"complete"),we(s,"success");else{s.m=6;try{var A=2<et(s)?s.g.statusText:""}catch{A=""}s.l=A+" ["+s.Z()+"]",Cl(s)}}finally{Ti(s)}}}}function Ti(s,a){if(s.g){Pl(s);let u=s.g,d=s.v[0]?()=>{}:null;s.g=null,s.v=null,a||we(s,"ready");try{u.onreadystatechange=d}catch{}}}function Pl(s){s.I&&(l.clearTimeout(s.I),s.I=null)}n.isActive=function(){return!!this.g};function et(s){return s.g?s.g.readyState:0}n.Z=function(){try{return 2<et(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(s){if(this.g){var a=this.g.responseText;return s&&a.indexOf(s)==0&&(a=a.substring(s.length)),zp(a)}};function Dl(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.H){case"":case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch{return null}}function pm(s){let a={};s=(s.g&&2<=et(s)&&s.g.getAllResponseHeaders()||"").split(`\r
`);for(let d=0;d<s.length;d++){if(K(s[d]))continue;var u=I(s[d]);let w=u[0];if(u=u[1],typeof u!="string")continue;u=u.trim();let A=a[w]||[];a[w]=A,A.push(u)}E(a,function(d){return d.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function yr(s,a,u){return u&&u.internalChannelParams&&u.internalChannelParams[s]||a}function kl(s){this.Aa=0,this.i=[],this.j=new lr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=yr("failFast",!1,s),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=yr("baseRetryDelayMs",5e3,s),this.cb=yr("retryDelaySeedMs",1e4,s),this.Wa=yr("forwardChannelMaxRetries",2,s),this.wa=yr("forwardChannelRequestTimeoutMs",2e4,s),this.pa=s&&s.xmlHttpFactory||void 0,this.Xa=s&&s.Tb||void 0,this.Ca=s&&s.useFetchStreams||!1,this.L=void 0,this.J=s&&s.supportsCrossDomainXhr||!1,this.K="",this.h=new dl(s&&s.concurrentRequestLimit),this.Da=new lm,this.P=s&&s.fastHandshake||!1,this.O=s&&s.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=s&&s.Rb||!1,s&&s.xa&&this.j.xa(),s&&s.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&s&&s.detectBufferingProxy||!1,this.ja=void 0,s&&s.longPollingTimeout&&0<s.longPollingTimeout&&(this.ja=s.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=kl.prototype,n.la=8,n.G=1,n.connect=function(s,a,u,d){Te(0),this.W=s,this.H=a||{},u&&d!==void 0&&(this.H.OSID=u,this.H.OAID=d),this.F=this.X,this.I=Bl(this,null,this.W),bi(this)};function To(s){if(Nl(s),s.G==3){var a=s.U++,u=Ze(s.I);if(X(u,"SID",s.K),X(u,"RID",a),X(u,"TYPE","terminate"),vr(s,u),a=new mt(s,s.j,a),a.L=2,a.v=Ei(Ze(u)),u=!1,l.navigator&&l.navigator.sendBeacon)try{u=l.navigator.sendBeacon(a.v.toString(),"")}catch{}!u&&l.Image&&(new Image().src=a.v,u=!0),u||(a.g=ql(a.j,null),a.g.ea(a.v)),a.F=Date.now(),yi(a)}Ul(s)}function Ai(s){s.g&&(bo(s),s.g.cancel(),s.g=null)}function Nl(s){Ai(s),s.u&&(l.clearTimeout(s.u),s.u=null),Si(s),s.h.cancel(),s.s&&(typeof s.s=="number"&&l.clearTimeout(s.s),s.s=null)}function bi(s){if(!fl(s.h)&&!s.s){s.s=!0;var a=s.Ga;nr||$u(),rr||(nr(),rr=!0),to.add(a,s),s.B=0}}function mm(s,a){return pl(s.h)>=s.h.j-(s.s?1:0)?!1:s.s?(s.i=a.D.concat(s.i),!0):s.G==1||s.G==2||s.B>=(s.Va?0:s.Wa)?!1:(s.s=ur(S(s.Ga,s,a),Ll(s,s.B)),s.B++,!0)}n.Ga=function(s){if(this.s)if(this.s=null,this.G==1){if(!s){this.U=Math.floor(1e5*Math.random()),s=this.U++;let w=new mt(this,this.j,s),A=this.o;if(this.S&&(A?(A=p(A),y(A,this.S)):A=this.S),this.m!==null||this.O||(w.H=A,A=null),this.P)e:{for(var a=0,u=0;u<this.i.length;u++){t:{var d=this.i[u];if("__data__"in d.map&&(d=d.map.__data__,typeof d=="string")){d=d.length;break t}d=void 0}if(d===void 0)break;if(a+=d,4096<a){a=u;break e}if(a===4096||u===this.i.length-1){a=u+1;break e}}a=1e3}else a=1e3;a=xl(this,w,a),u=Ze(this.I),X(u,"RID",s),X(u,"CVER",22),this.D&&X(u,"X-HTTP-Session-Id",this.D),vr(this,u),A&&(this.O?a="headers="+encodeURIComponent(String(bl(A)))+"&"+a:this.m&&wo(u,this.m,A)),Eo(this.h,w),this.Ua&&X(u,"TYPE","init"),this.P?(X(u,"$req",a),X(u,"SID","null"),w.T=!0,_o(w,u,null)):_o(w,u,a),this.G=2}}else this.G==3&&(s?Vl(this,s):this.i.length==0||fl(this.h)||Vl(this))};function Vl(s,a){var u;a?u=a.l:u=s.U++;let d=Ze(s.I);X(d,"SID",s.K),X(d,"RID",u),X(d,"AID",s.T),vr(s,d),s.m&&s.o&&wo(d,s.m,s.o),u=new mt(s,s.j,u,s.B+1),s.m===null&&(u.H=s.o),a&&(s.i=a.D.concat(s.i)),a=xl(s,u,1e3),u.I=Math.round(.5*s.wa)+Math.round(.5*s.wa*Math.random()),Eo(s.h,u),_o(u,d,a)}function vr(s,a){s.H&&ce(s.H,function(u,d){X(a,d,u)}),s.l&&_l({},function(u,d){X(a,d,u)})}function xl(s,a,u){u=Math.min(s.i.length,u);var d=s.l?S(s.l.Na,s.l,s):null;e:{var w=s.i;let A=-1;for(;;){let P=["count="+u];A==-1?0<u?(A=w[0].g,P.push("ofs="+A)):A=0:P.push("ofs="+A);let W=!0;for(let de=0;de<u;de++){let $=w[de].g,ge=w[de].map;if($-=A,0>$)A=Math.max(0,w[de].g-100),W=!1;else try{hm(ge,P,"req"+$+"_")}catch{d&&d(ge)}}if(W){d=P.join("&");break e}}}return s=s.i.splice(0,u),a.D=s,d}function Ol(s){if(!s.g&&!s.u){s.Y=1;var a=s.Fa;nr||$u(),rr||(nr(),rr=!0),to.add(a,s),s.v=0}}function Ao(s){return s.g||s.u||3<=s.v?!1:(s.Y++,s.u=ur(S(s.Fa,s),Ll(s,s.v)),s.v++,!0)}n.Fa=function(){if(this.u=null,Ml(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var s=2*this.R;this.j.info("BP detection timer enabled: "+s),this.A=ur(S(this.ab,this),s)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Te(10),Ai(this),Ml(this))};function bo(s){s.A!=null&&(l.clearTimeout(s.A),s.A=null)}function Ml(s){s.g=new mt(s,s.j,"rpc",s.Y),s.m===null&&(s.g.H=s.o),s.g.O=0;var a=Ze(s.qa);X(a,"RID","rpc"),X(a,"SID",s.K),X(a,"AID",s.T),X(a,"CI",s.F?"0":"1"),!s.F&&s.ja&&X(a,"TO",s.ja),X(a,"TYPE","xmlhttp"),vr(s,a),s.m&&s.o&&wo(a,s.m,s.o),s.L&&(s.g.I=s.L);var u=s.g;s=s.ia,u.L=1,u.v=Ei(Ze(a)),u.m=null,u.P=!0,ul(u,s)}n.Za=function(){this.C!=null&&(this.C=null,Ai(this),Ao(this),Te(19))};function Si(s){s.C!=null&&(l.clearTimeout(s.C),s.C=null)}function Fl(s,a){var u=null;if(s.g==a){Si(s),bo(s),s.g=null;var d=2}else if(Io(s.h,a))u=a.D,ml(s.h,a),d=1;else return;if(s.G!=0){if(a.o)if(d==1){u=a.m?a.m.length:0,a=Date.now()-a.F;var w=s.B;d=mi(),we(d,new sl(d,u)),bi(s)}else Ol(s);else if(w=a.s,w==3||w==0&&0<a.X||!(d==1&&mm(s,a)||d==2&&Ao(s)))switch(u&&0<u.length&&(a=s.h,a.i=a.i.concat(u)),w){case 1:qt(s,5);break;case 4:qt(s,10);break;case 3:qt(s,6);break;default:qt(s,2)}}}function Ll(s,a){let u=s.Ta+Math.floor(Math.random()*s.cb);return s.isActive()||(u*=2),u*a}function qt(s,a){if(s.j.info("Error code "+a),a==2){var u=S(s.fb,s),d=s.Xa;let w=!d;d=new Bt(d||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||vi(d,"https"),Ei(d),w?cm(d.toString(),u):um(d.toString(),u)}else Te(2);s.G=0,s.l&&s.l.sa(a),Ul(s),Nl(s)}n.fb=function(s){s?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))};function Ul(s){if(s.G=0,s.ka=[],s.l){let a=gl(s.h);(a.length!=0||s.i.length!=0)&&(O(s.ka,a),O(s.ka,s.i),s.h.i.length=0,U(s.i),s.i.length=0),s.l.ra()}}function Bl(s,a,u){var d=u instanceof Bt?Ze(u):new Bt(u);if(d.g!="")a&&(d.g=a+"."+d.g),Ii(d,d.s);else{var w=l.location;d=w.protocol,a=a?a+"."+w.hostname:w.hostname,w=+w.port;var A=new Bt(null);d&&vi(A,d),a&&(A.g=a),w&&Ii(A,w),u&&(A.l=u),d=A}return u=s.D,a=s.ya,u&&a&&X(d,u,a),X(d,"VER",s.la),vr(s,d),d}function ql(s,a,u){if(a&&!s.J)throw Error("Can't create secondary domain capable XhrIo object.");return a=s.Ca&&!s.pa?new Z(new mr({eb:u})):new Z(s.pa),a.Ha(s.J),a}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function jl(){}n=jl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ci(){}Ci.prototype.g=function(s,a){return new Pe(s,a)};function Pe(s,a){me.call(this),this.g=new kl(a),this.l=s,this.h=a&&a.messageUrlParams||null,s=a&&a.messageHeaders||null,a&&a.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.o=s,s=a&&a.initMessageHeaders||null,a&&a.messageContentType&&(s?s["X-WebChannel-Content-Type"]=a.messageContentType:s={"X-WebChannel-Content-Type":a.messageContentType}),a&&a.va&&(s?s["X-WebChannel-Client-Profile"]=a.va:s={"X-WebChannel-Client-Profile":a.va}),this.g.S=s,(s=a&&a.Sb)&&!K(s)&&(this.g.m=s),this.v=a&&a.supportsCrossDomainXhr||!1,this.u=a&&a.sendRawJson||!1,(a=a&&a.httpSessionIdParam)&&!K(a)&&(this.g.D=a,s=this.h,s!==null&&a in s&&(s=this.h,a in s&&delete s[a])),this.j=new fn(this)}k(Pe,me),Pe.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pe.prototype.close=function(){To(this.g)},Pe.prototype.o=function(s){var a=this.g;if(typeof s=="string"){var u={};u.__data__=s,s=u}else this.u&&(u={},u.__data__=lo(s),s=u);a.i.push(new Xp(a.Ya++,s)),a.G==3&&bi(a)},Pe.prototype.N=function(){this.g.l=null,delete this.j,To(this.g),delete this.g,Pe.aa.N.call(this)};function Gl(s){fo.call(this),s.__headers__&&(this.headers=s.__headers__,this.statusCode=s.__status__,delete s.__headers__,delete s.__status__);var a=s.__sm__;if(a){e:{for(let u in a){s=u;break e}s=void 0}(this.i=s)&&(s=this.i,a=a!==null&&s in a?a[s]:void 0),this.data=a}else this.data=s}k(Gl,fo);function $l(){po.call(this),this.status=1}k($l,po);function fn(s){this.g=s}k(fn,jl),fn.prototype.ua=function(){we(this.g,"a")},fn.prototype.ta=function(s){we(this.g,new Gl(s))},fn.prototype.sa=function(s){we(this.g,new $l)},fn.prototype.ra=function(){we(this.g,"b")},Ci.prototype.createWebChannel=Ci.prototype.g,Pe.prototype.send=Pe.prototype.o,Pe.prototype.open=Pe.prototype.m,Pe.prototype.close=Pe.prototype.close,uc=ut.createWebChannelTransport=function(){return new Ci},cc=ut.getStatEventTarget=function(){return mi()},ac=ut.Event=Lt,gs=ut.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gi.NO_ERROR=0,gi.TIMEOUT=8,gi.HTTP_ERROR=6,Yr=ut.ErrorCode=gi,ol.COMPLETE="complete",oc=ut.EventType=ol,tl.EventType=ar,ar.OPEN="a",ar.CLOSE="b",ar.ERROR="c",ar.MESSAGE="d",me.prototype.listen=me.prototype.K,Mn=ut.WebChannel=tl,sc=ut.FetchXmlHttpFactory=mr,Z.prototype.listenOnce=Z.prototype.L,Z.prototype.getLastError=Z.prototype.Ka,Z.prototype.getLastErrorCode=Z.prototype.Ba,Z.prototype.getStatus=Z.prototype.Z,Z.prototype.getResponseJson=Z.prototype.Oa,Z.prototype.getResponseText=Z.prototype.oa,Z.prototype.send=Z.prototype.ea,Z.prototype.setWithCredentials=Z.prototype.Ha,ic=ut.XhrIo=Z}).apply(typeof ms<"u"?ms:typeof self<"u"?self:typeof window<"u"?window:{});var df="@firebase/firestore";var le=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};le.UNAUTHENTICATED=new le(null),le.GOOGLE_CREDENTIALS=new le("google-credentials-uid"),le.FIRST_PARTY=new le("first-party-uid"),le.MOCK_USER=new le("mock-user");var er="10.13.1";var rn=new At("@firebase/firestore");function Xr(){return rn.logLevel}function x(n,...e){if(rn.logLevel<=q.DEBUG){let t=e.map(ku);rn.debug(`Firestore (${er}): ${n}`,...t)}}function sn(n,...e){if(rn.logLevel<=q.ERROR){let t=e.map(ku);rn.error(`Firestore (${er}): ${n}`,...t)}}function ws(n,...e){if(rn.logLevel<=q.WARN){let t=e.map(ku);rn.warn(`Firestore (${er}): ${n}`,...t)}}function ku(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function j(n="Unexpected state"){let e=`FIRESTORE (${er}) INTERNAL ASSERTION FAILED: `+n;throw sn(e),new Error(e)}function ae(n,e){n||j()}function Q(n,e){return n}var C={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},M=class extends De{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var lt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Ts=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},fc=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(le.UNAUTHENTICATED))}shutdown(){}},pc=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},mc=class{constructor(e){this.t=e,this.currentUser=le.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i,i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve(),o=new lt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new lt,e.enqueueRetryable(()=>i(this.currentUser))};let c=()=>{let h=o;e.enqueueRetryable(()=>_(this,null,function*(){yield h.promise,yield i(this.currentUser)}))},l=h=>{x("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.auth.addAuthTokenListener(this.o),c()};this.t.onInit(h=>l(h)),setTimeout(()=>{if(!this.auth){let h=this.t.getImmediate({optional:!0});h?l(h):(x("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new lt)}},0),c()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(x("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ae(typeof r.accessToken=="string"),new Ts(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return ae(e===null||typeof e=="string"),new le(e)}},gc=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=le.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},_c=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new gc(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(le.FIRST_PARTY))}shutdown(){}invalidateToken(){}},yc=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},vc=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let r=o=>{o.error!=null&&x("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let c=o.token!==this.R;return this.R=o.token,x("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{x("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):x("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ae(typeof t.token=="string"),this.R=t.token,new yc(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function Jv(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var As=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Jv(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function H(n,e){return n<e?-1:n>e?1:0}function Bn(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Ee=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new M(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new M(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new M(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new M(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?H(this.nanoseconds,e.nanoseconds):H(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ee=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ee(0,0))}static max(){return new n(new Ee(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var bs=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&j(),r===void 0?r=e.length-t:r>e.length-t&&j(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),c=t.get(i);if(o<c)return-1;if(o>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ie=class n extends bs{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new M(C.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Yv=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ke=class n extends bs{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Yv.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new M(C.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},c=!1;for(;i<e.length;){let l=e[i];if(l==="\\"){if(i+1===e.length)throw new M(C.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new M(C.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else l==="`"?(c=!c,i++):l!=="."||c?(r+=l,i++):(o(),i++)}if(o(),c)throw new M(C.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var B=class n{constructor(e){this.path=e}static fromPath(e){return new n(ie.fromString(e))}static fromName(e){return new n(ie.fromString(e).popFirst(5))}static empty(){return new n(ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ie.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ie(e.slice()))}};var Ic=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};Ic.UNKNOWN_ID=-1;function Xv(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new Ee(t+1,0):new Ee(t,r));return new on(i,B.empty(),e)}function Zv(n){return new on(n.readTime,n.key,-1)}var on=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ee.min(),B.empty(),-1)}static max(){return new n(ee.max(),B.empty(),-1)}};function eI(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=B.comparator(n.documentKey,e.documentKey),t!==0?t:H(n.largestBatchId,e.largestBatchId))}var tI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ec=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function xf(n){return _(this,null,function*(){if(n.code!==C.FAILED_PRECONDITION||n.message!==tI)throw n;x("LocalStore","Unexpectedly lost primary lease")})}var R=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&j(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,c=!1;e.forEach(l=>{++i,l.next(()=>{++o,c&&o===i&&t()},h=>r(h))}),c=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,c=new Array(o),l=0;for(let h=0;h<o;h++){let f=h;t(e[f]).next(v=>{c[f]=v,++l,l===o&&r(c)},v=>i(v))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function nI(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function $s(n){return n.name==="IndexedDbTransactionError"}var rI=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Nu(n){return n==null}function ii(n){return n===0&&1/n==-1/0}function iI(n){return typeof n=="number"&&Number.isInteger(n)&&!ii(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var sI=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],jT=[...sI,"documentOverlays"],oI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],aI=oI,cI=[...aI,"indexConfiguration","indexState","indexEntries"];var GT=[...cI,"globals"];function ff(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ci(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Of(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ne=class n{constructor(e,t){this.comparator=e,this.root=t||Je.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Je.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Je.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ln(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ln(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ln(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ln(this.root,e,this.comparator,!0)}},Ln=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Je=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw j();let e=this.left.check();if(e!==this.right.check())throw j();return e+(this.isRed()?0:1)}};Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1;Je.EMPTY=new class{constructor(){this.size=0}get key(){throw j()}get value(){throw j()}get color(){throw j()}get left(){throw j()}get right(){throw j()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Je(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var be=class n{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ss(this.data.getIterator())}getIteratorFrom(e){return new Ss(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Ss=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Qe=class n{constructor(e){this.fields=e,e.sort(ke.comparator)}static empty(){return new n([])}unionWith(e){let t=new be(ke.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Bn(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var wc=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var dt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new wc("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let c=0;c<i.length;++c)o+=String.fromCharCode(i[c]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return H(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};dt.EMPTY_BYTE_STRING=new dt("");var uI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vt(n){if(ae(!!n),typeof n=="string"){let e=0,t=uI.exec(n);if(ae(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:re(n.seconds),nanos:re(n.nanos)}}function re(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function qn(n){return typeof n=="string"?dt.fromBase64String(n):dt.fromUint8Array(n)}function Vu(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Mf(n){let e=n.mapValue.fields.__previous_value__;return Vu(e)?Mf(e):e}function Cs(n){let e=Vt(n.mapValue.fields.__local_write_time__.timestampValue);return new Ee(e.seconds,e.nanos)}var Tc=class{constructor(e,t,r,i,o,c,l,h,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=l,this.longPollingOptions=h,this.useFetchStreams=f}},Ac=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var _s={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function jn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Vu(n)?4:Lf(n)?9007199254740991:Ff(n)?10:11:j()}function Ye(n,e){if(n===e)return!0;let t=jn(n);if(t!==jn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Cs(n).isEqual(Cs(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let c=Vt(i.timestampValue),l=Vt(o.timestampValue);return c.seconds===l.seconds&&c.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return qn(i.bytesValue).isEqual(qn(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return re(i.geoPointValue.latitude)===re(o.geoPointValue.latitude)&&re(i.geoPointValue.longitude)===re(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return re(i.integerValue)===re(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let c=re(i.doubleValue),l=re(o.doubleValue);return c===l?ii(c)===ii(l):isNaN(c)&&isNaN(l)}return!1}(n,e);case 9:return Bn(n.arrayValue.values||[],e.arrayValue.values||[],Ye);case 10:case 11:return function(i,o){let c=i.mapValue.fields||{},l=o.mapValue.fields||{};if(ff(c)!==ff(l))return!1;for(let h in c)if(c.hasOwnProperty(h)&&(l[h]===void 0||!Ye(c[h],l[h])))return!1;return!0}(n,e);default:return j()}}function si(n,e){return(n.values||[]).find(t=>Ye(t,e))!==void 0}function Gn(n,e){if(n===e)return 0;let t=jn(n),r=jn(e);if(t!==r)return H(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return H(n.booleanValue,e.booleanValue);case 2:return function(o,c){let l=re(o.integerValue||o.doubleValue),h=re(c.integerValue||c.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return pf(n.timestampValue,e.timestampValue);case 4:return pf(Cs(n),Cs(e));case 5:return H(n.stringValue,e.stringValue);case 6:return function(o,c){let l=qn(o),h=qn(c);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(o,c){let l=o.split("/"),h=c.split("/");for(let f=0;f<l.length&&f<h.length;f++){let v=H(l[f],h[f]);if(v!==0)return v}return H(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,c){let l=H(re(o.latitude),re(c.latitude));return l!==0?l:H(re(o.longitude),re(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return mf(n.arrayValue,e.arrayValue);case 10:return function(o,c){var l,h,f,v;let b=o.fields||{},S=c.fields||{},D=(l=b.value)===null||l===void 0?void 0:l.arrayValue,k=(h=S.value)===null||h===void 0?void 0:h.arrayValue,U=H(((f=D?.values)===null||f===void 0?void 0:f.length)||0,((v=k?.values)===null||v===void 0?void 0:v.length)||0);return U!==0?U:mf(D,k)}(n.mapValue,e.mapValue);case 11:return function(o,c){if(o===_s.mapValue&&c===_s.mapValue)return 0;if(o===_s.mapValue)return 1;if(c===_s.mapValue)return-1;let l=o.fields||{},h=Object.keys(l),f=c.fields||{},v=Object.keys(f);h.sort(),v.sort();for(let b=0;b<h.length&&b<v.length;++b){let S=H(h[b],v[b]);if(S!==0)return S;let D=Gn(l[h[b]],f[v[b]]);if(D!==0)return D}return H(h.length,v.length)}(n.mapValue,e.mapValue);default:throw j()}}function pf(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return H(n,e);let t=Vt(n),r=Vt(e),i=H(t.seconds,r.seconds);return i!==0?i:H(t.nanos,r.nanos)}function mf(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Gn(t[i],r[i]);if(o)return o}return H(t.length,r.length)}function $n(n){return bc(n)}function bc(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Vt(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return qn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return B.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=bc(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let c of r)o?o=!1:i+=",",i+=`${c}:${bc(t.fields[c])}`;return i+"}"}(n.mapValue):j()}function Sc(n){return!!n&&"integerValue"in n}function xu(n){return!!n&&"arrayValue"in n}function Is(n){return!!n&&"mapValue"in n}function Ff(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function ei(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ci(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ei(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ei(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Lf(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Ke=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Is(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ei(t)}setAll(e){let t=ke.emptyPath(),r={},i=[];e.forEach((c,l)=>{if(!t.isImmediateParentOf(l)){let h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=l.popLast()}c?r[l.lastSegment()]=ei(c):i.push(l.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Is(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ye(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Is(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ci(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(ei(this.value))}};function Uf(n){let e=[];return ci(n.fields,(t,r)=>{let i=new ke([t]);if(Is(r)){let o=Uf(r.mapValue).fields;if(o.length===0)e.push(i);else for(let c of o)e.push(i.child(c))}else e.push(i)}),new Qe(e)}var zn=class n{constructor(e,t,r,i,o,c,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=c,this.documentState=l}static newInvalidDocument(e){return new n(e,0,ee.min(),ee.min(),ee.min(),Ke.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ee.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ee.min(),ee.min(),Ke.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ee.min(),ee.min(),Ke.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ke.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ke.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Wn=class{constructor(e,t){this.position=e,this.inclusive=t}};function gf(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],c=n.position[i];if(o.field.isKeyField()?r=B.comparator(B.fromName(c.referenceValue),t.key):r=Gn(c,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function _f(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ye(n.position[t],e.position[t]))return!1;return!0}var Hn=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function lI(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Rs=class{},he=class n extends Rs{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Rc(e,t,r):t==="array-contains"?new kc(e,r):t==="in"?new Nc(e,r):t==="not-in"?new Vc(e,r):t==="array-contains-any"?new xc(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Pc(e,r):new Dc(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Gn(t,this.value)):t!==null&&jn(this.value)===jn(t)&&this.matchesComparison(Gn(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return j()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},xt=class n extends Rs{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Bf(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Bf(n){return n.op==="and"}function qf(n){return hI(n)&&Bf(n)}function hI(n){for(let e of n.filters)if(e instanceof xt)return!1;return!0}function Cc(n){if(n instanceof he)return n.field.canonicalString()+n.op.toString()+$n(n.value);if(qf(n))return n.filters.map(e=>Cc(e)).join(",");{let e=n.filters.map(t=>Cc(t)).join(",");return`${n.op}(${e})`}}function jf(n,e){return n instanceof he?function(r,i){return i instanceof he&&r.op===i.op&&r.field.isEqual(i.field)&&Ye(r.value,i.value)}(n,e):n instanceof xt?function(r,i){return i instanceof xt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,c,l)=>o&&jf(c,i.filters[l]),!0):!1}(n,e):void j()}function Gf(n){return n instanceof he?function(t){return`${t.field.canonicalString()} ${t.op} ${$n(t.value)}`}(n):n instanceof xt?function(t){return t.op.toString()+" {"+t.getFilters().map(Gf).join(" ,")+"}"}(n):"Filter"}var Rc=class extends he{constructor(e,t,r){super(e,t,r),this.key=B.fromName(r.referenceValue)}matches(e){let t=B.comparator(e.key,this.key);return this.matchesComparison(t)}},Pc=class extends he{constructor(e,t){super(e,"in",t),this.keys=$f("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Dc=class extends he{constructor(e,t){super(e,"not-in",t),this.keys=$f("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function $f(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>B.fromName(r.referenceValue))}var kc=class extends he{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return xu(t)&&si(t.arrayValue,this.value)}},Nc=class extends he{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&si(this.value.arrayValue,t)}},Vc=class extends he{constructor(e,t){super(e,"not-in",t)}matches(e){if(si(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!si(this.value.arrayValue,t)}},xc=class extends he{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!xu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>si(this.value.arrayValue,r))}};var Oc=class{constructor(e,t=null,r=[],i=[],o=null,c=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=c,this.endAt=l,this.ue=null}};function yf(n,e=null,t=[],r=[],i=null,o=null,c=null){return new Oc(n,e,t,r,i,o,c)}function Ou(n){let e=Q(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Cc(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Nu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>$n(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>$n(r)).join(",")),e.ue=t}return e.ue}function Mu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!lI(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!jf(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!_f(n.startAt,e.startAt)&&_f(n.endAt,e.endAt)}var Kn=class{constructor(e,t=null,r=[],i=[],o=null,c="F",l=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=l,this.endAt=h,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function dI(n,e,t,r,i,o,c,l){return new Kn(n,e,t,r,i,o,c,l)}function fI(n){return new Kn(n)}function vf(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function pI(n){return n.collectionGroup!==null}function ti(n){let e=Q(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let l=new be(ke.comparator);return c.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Hn(o,r))}),t.has(ke.keyField().canonicalString())||e.ce.push(new Hn(ke.keyField(),r))}return e.ce}function tn(n){let e=Q(n);return e.le||(e.le=mI(e,ti(n))),e.le}function mI(n,e){if(n.limitType==="F")return yf(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Hn(i.field,o)});let t=n.endAt?new Wn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Wn(n.startAt.position,n.startAt.inclusive):null;return yf(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Mc(n,e,t){return new Kn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function zf(n,e){return Mu(tn(n),tn(e))&&n.limitType===e.limitType}function Wf(n){return`${Ou(tn(n))}|lt:${n.limitType}`}function Zr(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Gf(i)).join(", ")}]`),Nu(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>$n(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>$n(i)).join(",")),`Target(${r})`}(tn(n))}; limitType=${n.limitType})`}function Fu(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):B.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of ti(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(c,l,h){let f=gf(c,l,h);return c.inclusive?f<=0:f<0}(r.startAt,ti(r),i)||r.endAt&&!function(c,l,h){let f=gf(c,l,h);return c.inclusive?f>=0:f>0}(r.endAt,ti(r),i))}(n,e)}function gI(n){return(e,t)=>{let r=!1;for(let i of ti(n)){let o=_I(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function _I(n,e,t){let r=n.field.isKeyField()?B.comparator(e.key,t.key):function(o,c,l){let h=c.data.field(o),f=l.data.field(o);return h!==null&&f!==null?Gn(h,f):j()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return j()}}var Ot=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ci(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Of(this.inner)}size(){return this.innerSize}};var yI=new Ne(B.comparator);function Ps(){return yI}var Hf=new Ne(B.comparator);function ys(...n){let e=Hf;for(let t of n)e=e.insert(t.key,t);return e}function Kf(n){let e=Hf;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function en(){return ni()}function Qf(){return ni()}function ni(){return new Ot(n=>n.toString(),(n,e)=>n.isEqual(e))}var vI=new Ne(B.comparator),II=new be(B.comparator);function Ie(...n){let e=II;for(let t of n)e=e.add(t);return e}var EI=new be(H);function wI(){return EI}function Lu(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ii(e)?"-0":e}}function Jf(n){return{integerValue:""+n}}function TI(n,e){return iI(e)?Jf(e):Lu(n,e)}var Qn=class{constructor(){this._=void 0}};function AI(n,e,t){return n instanceof Jn?function(i,o){let c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Vu(o)&&(o=Mf(o)),o&&(c.fields.__previous_value__=o),{mapValue:c}}(t,e):n instanceof an?Xf(n,e):n instanceof cn?Zf(n,e):function(i,o){let c=Yf(i,o),l=If(c)+If(i.Pe);return Sc(c)&&Sc(i.Pe)?Jf(l):Lu(i.serializer,l)}(n,e)}function bI(n,e,t){return n instanceof an?Xf(n,e):n instanceof cn?Zf(n,e):t}function Yf(n,e){return n instanceof Yn?function(r){return Sc(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Jn=class extends Qn{},an=class extends Qn{constructor(e){super(),this.elements=e}};function Xf(n,e){let t=ep(e);for(let r of n.elements)t.some(i=>Ye(i,r))||t.push(r);return{arrayValue:{values:t}}}var cn=class extends Qn{constructor(e){super(),this.elements=e}};function Zf(n,e){let t=ep(e);for(let r of n.elements)t=t.filter(i=>!Ye(i,r));return{arrayValue:{values:t}}}var Yn=class extends Qn{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function If(n){return re(n.integerValue||n.doubleValue)}function ep(n){return xu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function SI(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof an&&i instanceof an||r instanceof cn&&i instanceof cn?Bn(r.elements,i.elements,Ye):r instanceof Yn&&i instanceof Yn?Ye(r.Pe,i.Pe):r instanceof Jn&&i instanceof Jn}(n.transform,e.transform)}var Fc=class{constructor(e,t){this.version=e,this.transformResults=t}},nn=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Es(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Xn=class{};function tp(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ds(n.key,nn.none()):new un(n.key,n.data,nn.none());{let t=n.data,r=Ke.empty(),i=new be(ke.comparator);for(let o of e.fields)if(!i.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?r.delete(o):r.set(o,c),i=i.add(o)}return new ft(n.key,r,new Qe(i.toArray()),nn.none())}}function CI(n,e,t){n instanceof un?function(i,o,c){let l=i.value.clone(),h=wf(i.fieldTransforms,o,c.transformResults);l.setAll(h),o.convertToFoundDocument(c.version,l).setHasCommittedMutations()}(n,e,t):n instanceof ft?function(i,o,c){if(!Es(i.precondition,o))return void o.convertToUnknownDocument(c.version);let l=wf(i.fieldTransforms,o,c.transformResults),h=o.data;h.setAll(np(i)),h.setAll(l),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):function(i,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function ri(n,e,t,r){return n instanceof un?function(o,c,l,h){if(!Es(o.precondition,c))return l;let f=o.value.clone(),v=Tf(o.fieldTransforms,h,c);return f.setAll(v),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof ft?function(o,c,l,h){if(!Es(o.precondition,c))return l;let f=Tf(o.fieldTransforms,h,c),v=c.data;return v.setAll(np(o)),v.setAll(f),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(b=>b.field))}(n,e,t,r):function(o,c,l){return Es(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):l}(n,e,t)}function RI(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Yf(r.transform,i||null);o!=null&&(t===null&&(t=Ke.empty()),t.set(r.field,o))}return t||null}function Ef(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Bn(r,i,(o,c)=>SI(o,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var un=class extends Xn{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},ft=class extends Xn{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function np(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function wf(n,e,t){let r=new Map;ae(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],c=o.transform,l=e.data.field(o.field);r.set(o.field,bI(c,l,t[i]))}return r}function Tf(n,e,t){let r=new Map;for(let i of n){let o=i.transform,c=t.data.field(i.field);r.set(i.field,AI(o,c,e))}return r}var Ds=class extends Xn{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Lc=class extends Xn{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Uc=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&CI(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=ri(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=ri(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Qf();return this.mutations.forEach(i=>{let o=e.get(i.key),c=o.overlayedDocument,l=this.applyToLocalView(c,o.mutatedFields);l=t.has(i.key)?null:l;let h=tp(c,l);h!==null&&r.set(i.key,h),c.isValidDocument()||c.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ie())}isEqual(e){return this.batchId===e.batchId&&Bn(this.mutations,e.mutations,(t,r)=>Ef(t,r))&&Bn(this.baseMutations,e.baseMutations,(t,r)=>Ef(t,r))}},Bc=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ae(e.mutations.length===r.length);let i=function(){return vI}(),o=e.mutations;for(let c=0;c<o.length;c++)i=i.insert(o[c].key,r[c].version);return new n(e,t,r,i)}};var qc=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var te,G;function PI(n){switch(n){default:return j();case C.CANCELLED:case C.UNKNOWN:case C.DEADLINE_EXCEEDED:case C.RESOURCE_EXHAUSTED:case C.INTERNAL:case C.UNAVAILABLE:case C.UNAUTHENTICATED:return!1;case C.INVALID_ARGUMENT:case C.NOT_FOUND:case C.ALREADY_EXISTS:case C.PERMISSION_DENIED:case C.FAILED_PRECONDITION:case C.ABORTED:case C.OUT_OF_RANGE:case C.UNIMPLEMENTED:case C.DATA_LOSS:return!0}}function DI(n){if(n===void 0)return sn("GRPC error has no .code"),C.UNKNOWN;switch(n){case te.OK:return C.OK;case te.CANCELLED:return C.CANCELLED;case te.UNKNOWN:return C.UNKNOWN;case te.DEADLINE_EXCEEDED:return C.DEADLINE_EXCEEDED;case te.RESOURCE_EXHAUSTED:return C.RESOURCE_EXHAUSTED;case te.INTERNAL:return C.INTERNAL;case te.UNAVAILABLE:return C.UNAVAILABLE;case te.UNAUTHENTICATED:return C.UNAUTHENTICATED;case te.INVALID_ARGUMENT:return C.INVALID_ARGUMENT;case te.NOT_FOUND:return C.NOT_FOUND;case te.ALREADY_EXISTS:return C.ALREADY_EXISTS;case te.PERMISSION_DENIED:return C.PERMISSION_DENIED;case te.FAILED_PRECONDITION:return C.FAILED_PRECONDITION;case te.ABORTED:return C.ABORTED;case te.OUT_OF_RANGE:return C.OUT_OF_RANGE;case te.UNIMPLEMENTED:return C.UNIMPLEMENTED;case te.DATA_LOSS:return C.DATA_LOSS;default:return j()}}(G=te||(te={}))[G.OK=0]="OK",G[G.CANCELLED=1]="CANCELLED",G[G.UNKNOWN=2]="UNKNOWN",G[G.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",G[G.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",G[G.NOT_FOUND=5]="NOT_FOUND",G[G.ALREADY_EXISTS=6]="ALREADY_EXISTS",G[G.PERMISSION_DENIED=7]="PERMISSION_DENIED",G[G.UNAUTHENTICATED=16]="UNAUTHENTICATED",G[G.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",G[G.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",G[G.ABORTED=10]="ABORTED",G[G.OUT_OF_RANGE=11]="OUT_OF_RANGE",G[G.UNIMPLEMENTED=12]="UNIMPLEMENTED",G[G.INTERNAL=13]="INTERNAL",G[G.UNAVAILABLE=14]="UNAVAILABLE",G[G.DATA_LOSS=15]="DATA_LOSS";var zT=new rc([4294967295,4294967295],0);var jc=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Gc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function kI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function NI(n,e){return Gc(n,e.toTimestamp())}function Un(n){return ae(!!n),ee.fromTimestamp(function(t){let r=Vt(t);return new Ee(r.seconds,r.nanos)}(n))}function rp(n,e){return $c(n,e).canonicalString()}function $c(n,e){let t=function(i){return new ie(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function VI(n){let e=ie.fromString(n);return ae(qI(e)),e}function zc(n,e){return rp(n.databaseId,e.path)}function xI(n){let e=VI(n);return e.length===4?ie.emptyPath():MI(e)}function OI(n){return new ie(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function MI(n){return ae(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Af(n,e,t){return{name:zc(n,e),fields:t.value.mapValue.fields}}function FI(n,e){let t;if(e instanceof un)t={update:Af(n,e.key,e.value)};else if(e instanceof Ds)t={delete:zc(n,e.key)};else if(e instanceof ft)t={update:Af(n,e.key,e.data),updateMask:BI(e.fieldMask)};else{if(!(e instanceof Lc))return j();t={verify:zc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,c){let l=c.transform;if(l instanceof Jn)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof an)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof cn)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Yn)return{fieldPath:c.field.canonicalString(),increment:l.Pe};throw j()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:NI(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:j()}(n,e.precondition)),t}function LI(n,e){return n&&n.length>0?(ae(e!==void 0),n.map(t=>function(i,o){let c=i.updateTime?Un(i.updateTime):Un(o);return c.isEqual(ee.min())&&(c=Un(o)),new Fc(c,i.transformResults||[])}(t,e))):[]}function UI(n){let e=xI(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ae(r===1);let v=t.from[0];v.allDescendants?i=v.collectionId:e=e.child(v.collectionId)}let o=[];t.where&&(o=function(b){let S=ip(b);return S instanceof xt&&qf(S)?S.getFilters():[S]}(t.where));let c=[];t.orderBy&&(c=function(b){return b.map(S=>function(k){return new Hn(Fn(k.field),function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(S))}(t.orderBy));let l=null;t.limit&&(l=function(b){let S;return S=typeof b=="object"?b.value:b,Nu(S)?null:S}(t.limit));let h=null;t.startAt&&(h=function(b){let S=!!b.before,D=b.values||[];return new Wn(D,S)}(t.startAt));let f=null;return t.endAt&&(f=function(b){let S=!b.before,D=b.values||[];return new Wn(D,S)}(t.endAt)),dI(e,i,c,o,l,"F",h,f)}function ip(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Fn(t.unaryFilter.field);return he.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Fn(t.unaryFilter.field);return he.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Fn(t.unaryFilter.field);return he.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let c=Fn(t.unaryFilter.field);return he.create(c,"!=",{nullValue:"NULL_VALUE"});default:return j()}}(n):n.fieldFilter!==void 0?function(t){return he.create(Fn(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return j()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return xt.create(t.compositeFilter.filters.map(r=>ip(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return j()}}(t.compositeFilter.op))}(n):j()}function Fn(n){return ke.fromServerFormat(n.fieldPath)}function BI(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function qI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Wc=class{constructor(e){this.ct=e}};function jI(n){let e=UI({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Mc(e,e.limit,"L"):e}var ks=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(re(e.integerValue));else if("doubleValue"in e){let r=re(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),ii(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Vt(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(qn(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?Lf(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Ff(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):j()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let c="value",l=((i=(r=o[c].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(re(l)),this.Vt(c,t),this.Tt(o[c],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),B.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};ks.vt=new ks;var Hc=class{constructor(){this.un=new Kc}addToCollectionParentIndex(e,t){return this.un.add(t),R.resolve()}getCollectionParents(e,t){return R.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return R.resolve()}deleteFieldIndex(e,t){return R.resolve()}deleteAllFieldIndexes(e){return R.resolve()}createTargetIndexes(e,t){return R.resolve()}getDocumentsMatchingTarget(e,t){return R.resolve(null)}getIndexType(e,t){return R.resolve(0)}getFieldIndexes(e,t){return R.resolve([])}getNextCollectionGroupToUpdate(e){return R.resolve(null)}getMinOffset(e,t){return R.resolve(on.min())}getMinOffsetFromCollectionGroup(e,t){return R.resolve(on.min())}updateCollectionGroup(e,t,r){return R.resolve()}updateIndexEntries(e,t){return R.resolve()}},Kc=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new be(ie.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new be(ie.comparator)).toArray()}};var WT=new Uint8Array(0);var He=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};He.DEFAULT_COLLECTION_PERCENTILE=10,He.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,He.DEFAULT=new He(41943040,He.DEFAULT_COLLECTION_PERCENTILE,He.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),He.DISABLED=new He(-1,0,0);var oi=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Qc=class{constructor(){this.changes=new Ot(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?R.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Jc=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Yc=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ri(r.mutation,i,Qe.empty(),Ee.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ie()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ie()){let i=en();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let c=ys();return o.forEach((l,h)=>{c=c.insert(l,h.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){let r=en();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ie()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((c,l)=>{t.set(c,l)})})}computeViews(e,t,r,i){let o=Ps(),c=ni(),l=function(){return ni()}();return t.forEach((h,f)=>{let v=r.get(f.key);i.has(f.key)&&(v===void 0||v.mutation instanceof ft)?o=o.insert(f.key,f):v!==void 0?(c.set(f.key,v.mutation.getFieldMask()),ri(v.mutation,f,v.mutation.getFieldMask(),Ee.now())):c.set(f.key,Qe.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((f,v)=>c.set(f,v)),t.forEach((f,v)=>{var b;return l.set(f,new Jc(v,(b=c.get(f))!==null&&b!==void 0?b:null))}),l))}recalculateAndSaveOverlays(e,t){let r=ni(),i=new Ne((c,l)=>c-l),o=Ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(let l of c)l.keys().forEach(h=>{let f=t.get(h);if(f===null)return;let v=r.get(h)||Qe.empty();v=l.applyToLocalView(f,v),r.set(h,v);let b=(i.get(l.batchId)||Ie()).add(h);i=i.insert(l.batchId,b)})}).next(()=>{let c=[],l=i.getReverseIterator();for(;l.hasNext();){let h=l.getNext(),f=h.key,v=h.value,b=Qf();v.forEach(S=>{if(!o.has(S)){let D=tp(t.get(S),r.get(S));D!==null&&b.set(S,D),o=o.add(S)}}),c.push(this.documentOverlayCache.saveOverlays(e,f,b))}return R.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(c){return B.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let c=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):R.resolve(en()),l=-1,h=o;return c.next(f=>R.forEach(f,(v,b)=>(l<b.largestBatchId&&(l=b.largestBatchId),o.get(v)?R.resolve():this.remoteDocumentCache.getEntry(e,v).next(S=>{h=h.insert(v,S)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,h,f,Ie())).next(v=>({batchId:l,changes:Kf(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new B(t)).next(r=>{let i=ys();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,c=ys();return this.indexManager.getCollectionParents(e,o).next(l=>R.forEach(l,h=>{let f=function(b,S){return new Kn(S,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)}(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(v=>{v.forEach((b,S)=>{c=c.insert(b,S)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(c=>{o.forEach((h,f)=>{let v=f.getKey();c.get(v)===null&&(c=c.insert(v,zn.newInvalidDocument(v)))});let l=ys();return c.forEach((h,f)=>{let v=o.get(h);v!==void 0&&ri(v.mutation,f,Qe.empty(),Ee.now()),Fu(t,f)&&(l=l.insert(h,f))}),l})}};var Xc=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return R.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Un(i.createTime)}}(t)),R.resolve()}getNamedQuery(e,t){return R.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:jI(i.bundledQuery),readTime:Un(i.readTime)}}(t)),R.resolve()}};var Zc=class{constructor(){this.overlays=new Ne(B.comparator),this.Ir=new Map}getOverlay(e,t){return R.resolve(this.overlays.get(t))}getOverlays(e,t){let r=en();return R.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),R.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),R.resolve()}getOverlaysForCollection(e,t,r){let i=en(),o=t.length+1,c=new B(t.child("")),l=this.overlays.getIteratorFrom(c);for(;l.hasNext();){let h=l.getNext().value,f=h.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>r&&i.set(h.getKey(),h)}return R.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ne((f,v)=>f-v),c=this.overlays.getIterator();for(;c.hasNext();){let f=c.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let v=o.get(f.largestBatchId);v===null&&(v=en(),o=o.insert(f.largestBatchId,v)),v.set(f.getKey(),f)}}let l=en(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,v)=>l.set(f,v)),!(l.size()>=i)););return R.resolve(l)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let c=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new qc(t,r));let o=this.Ir.get(t);o===void 0&&(o=Ie(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var eu=class{constructor(){this.sessionToken=dt.EMPTY_BYTE_STRING}getSessionToken(e){return R.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,R.resolve()}};var ai=class{constructor(){this.Tr=new be(ne.Er),this.dr=new be(ne.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new ne(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new ne(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new B(new ie([])),r=new ne(t,e),i=new ne(t,e+1),o=[];return this.dr.forEachInRange([r,i],c=>{this.Vr(c),o.push(c.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new B(new ie([])),r=new ne(t,e),i=new ne(t,e+1),o=Ie();return this.dr.forEachInRange([r,i],c=>{o=o.add(c.key)}),o}containsKey(e){let t=new ne(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},ne=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return B.comparator(e.key,t.key)||H(e.wr,t.wr)}static Ar(e,t){return H(e.wr,t.wr)||B.comparator(e.key,t.key)}};var tu=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new be(ne.Er)}checkEmpty(e){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let c=new Uc(o,t,r,i);this.mutationQueue.push(c);for(let l of i)this.br=this.br.add(new ne(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return R.resolve(c)}lookupMutationBatch(e,t){return R.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return R.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new ne(t,0),i=new ne(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],c=>{let l=this.Dr(c.wr);o.push(l)}),R.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new be(H);return t.forEach(i=>{let o=new ne(i,0),c=new ne(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,c],l=>{r=r.add(l.wr)})}),R.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;B.isDocumentKey(o)||(o=o.child(""));let c=new ne(new B(o),0),l=new be(H);return this.br.forEachWhile(h=>{let f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(l=l.add(h.wr)),!0)},c),R.resolve(this.Cr(l))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ae(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return R.forEach(t.mutations,i=>{let o=new ne(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new ne(t,0),i=this.br.firstAfterOrEqual(r);return R.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,R.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var nu=class{constructor(e){this.Mr=e,this.docs=function(){return new Ne(B.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,c=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return R.resolve(r?r.document.mutableCopy():zn.newInvalidDocument(t))}getEntries(e,t){let r=Ps();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():zn.newInvalidDocument(i))}),R.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=Ps(),c=t.path,l=new B(c.child("")),h=this.docs.getIteratorFrom(l);for(;h.hasNext();){let{key:f,value:{document:v}}=h.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||eI(Zv(v),r)<=0||(i.has(v.key)||Fu(t,v))&&(o=o.insert(v.key,v.mutableCopy()))}return R.resolve(o)}getAllFromCollectionGroup(e,t,r,i){j()}Or(e,t){return R.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new ru(this)}getSize(e){return R.resolve(this.size)}},ru=class extends Qc{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),R.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var iu=class{constructor(e){this.persistence=e,this.Nr=new Ot(t=>Ou(t),Mu),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ai,this.targetCount=0,this.kr=oi.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),R.resolve()}getLastRemoteSnapshotVersion(e){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return R.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),R.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new oi(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,R.resolve()}updateTargetData(e,t){return this.Kn(t),R.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,R.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((c,l)=>{l.sequenceNumber<=t&&r.get(l.targetId)===null&&(this.Nr.delete(c),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),R.waitFor(o).next(()=>i)}getTargetCount(e){return R.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return R.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),R.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(c=>{o.push(i.markPotentiallyOrphaned(e,c))}),R.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),R.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return R.resolve(r)}containsKey(e,t){return R.resolve(this.Br.containsKey(t))}};var su=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new rI(0),this.Kr=!1,this.Kr=!0,this.$r=new eu,this.referenceDelegate=e(this),this.Ur=new iu(this),this.indexManager=new Hc,this.remoteDocumentCache=function(i){return new nu(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Wc(t),this.Gr=new Xc(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Zc,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new tu(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){x("MemoryPersistence","Starting transaction:",e);let i=new ou(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return R.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},ou=class extends Ec{constructor(e){super(),this.currentSequenceNumber=e}},au=class n{constructor(e){this.persistence=e,this.Jr=new ai,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw j()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),R.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),R.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),R.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.Xr,r=>{let i=B.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,ee.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return R.or([()=>R.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var cu=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Ie(),i=Ie();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var uu=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var lu=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return jh()?8:nI(ue())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(c=>{o.result=c}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(c=>{o.result=c})}).next(()=>{if(o.result)return;let c=new uu;return this.Xi(e,t,c).next(l=>{if(o.result=l,this.zi)return this.es(e,t,c,l.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Xr()<=q.DEBUG&&x("QueryEngine","SDK will not create cache indexes for query:",Zr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),R.resolve()):(Xr()<=q.DEBUG&&x("QueryEngine","Query:",Zr(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Xr()<=q.DEBUG&&x("QueryEngine","The SDK decides to create cache indexes for query:",Zr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,tn(t))):R.resolve())}Yi(e,t){if(vf(t))return R.resolve(null);let r=tn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Mc(t,null,"F"),r=tn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let c=Ie(...o);return this.Ji.getDocuments(e,c).next(l=>this.indexManager.getMinOffset(e,r).next(h=>{let f=this.ts(t,l);return this.ns(t,f,c,h.readTime)?this.Yi(e,Mc(t,null,"F")):this.rs(e,f,t,h)}))})))}Zi(e,t,r,i){return vf(t)||i.isEqual(ee.min())?R.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let c=this.ts(t,o);return this.ns(t,c,r,i)?R.resolve(null):(Xr()<=q.DEBUG&&x("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Zr(t)),this.rs(e,c,t,Xv(i,-1)).next(l=>l))})}ts(e,t){let r=new be(gI(e));return t.forEach((i,o)=>{Fu(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Xr()<=q.DEBUG&&x("QueryEngine","Using full collection scan to execute query:",Zr(t)),this.Ji.getDocumentsMatchingQuery(e,t,on.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(c=>{o=o.insert(c.key,c)}),o))}};var hu=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ne(H),this._s=new Ot(o=>Ou(o),Mu),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Yc(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function GI(n,e,t,r){return new hu(n,e,t,r)}function sp(n,e){return _(this,null,function*(){let t=Q(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let c=[],l=[],h=Ie();for(let f of i){c.push(f.batchId);for(let v of f.mutations)h=h.add(v.key)}for(let f of o){l.push(f.batchId);for(let v of f.mutations)h=h.add(v.key)}return t.localDocuments.getDocuments(r,h).next(f=>({hs:f,removedBatchIds:c,addedBatchIds:l}))})})})}function $I(n,e){let t=Q(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(l,h,f,v){let b=f.batch,S=b.keys(),D=R.resolve();return S.forEach(k=>{D=D.next(()=>v.getEntry(h,k)).next(U=>{let O=f.docVersions.get(k);ae(O!==null),U.version.compareTo(O)<0&&(b.applyToRemoteDocument(U,f),U.isValidDocument()&&(U.setReadTime(f.commitVersion),v.addEntry(U)))})}),D.next(()=>l.mutationQueue.removeMutationBatch(h,b))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let h=Ie();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(h=h.add(l.batch.mutations[f].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function zI(n){let e=Q(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function WI(n,e){let t=Q(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}var Ns=class{constructor(){this.activeTargetIds=wI()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var du=class{constructor(){this.so=new Ns,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ns,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var fu=class{_o(e){}shutdown(){}};var Vs=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){x("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){x("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var vs=null;function lc(){return vs===null?vs=function(){return 268435456+Math.round(2147483648*Math.random())}():vs++,"0x"+vs.toString(16)}var HI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var pu=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var ve="WebChannelConnection",mu=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,c){let l=lc(),h=this.xo(t,r.toUriEncodedString());x("RestConnection",`Sending RPC '${t}' ${l}:`,h,i);let f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,o,c),this.No(t,h,f,i).then(v=>(x("RestConnection",`Received RPC '${t}' ${l}: `,v),v),v=>{throw ws("RestConnection",`RPC '${t}' ${l} failed with error: `,v,"url: ",h,"request:",i),v})}Lo(t,r,i,o,c,l){return this.Mo(t,r,i,o,c)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+er}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,c)=>t[c]=o),i&&i.headers.forEach((o,c)=>t[c]=o)}xo(t,r){let i=HI[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=lc();return new Promise((c,l)=>{let h=new ic;h.setWithCredentials(!0),h.listenOnce(oc.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Yr.NO_ERROR:let v=h.getResponseJson();x(ve,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(v)),c(v);break;case Yr.TIMEOUT:x(ve,`RPC '${e}' ${o} timed out`),l(new M(C.DEADLINE_EXCEEDED,"Request time out"));break;case Yr.HTTP_ERROR:let b=h.getStatus();if(x(ve,`RPC '${e}' ${o} failed with status:`,b,"response text:",h.getResponseText()),b>0){let S=h.getResponseJson();Array.isArray(S)&&(S=S[0]);let D=S?.error;if(D&&D.status&&D.message){let k=function(O){let J=O.toLowerCase().replace(/_/g,"-");return Object.values(C).indexOf(J)>=0?J:C.UNKNOWN}(D.status);l(new M(k,D.message))}else l(new M(C.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new M(C.UNAVAILABLE,"Connection failed."));break;default:j()}}finally{x(ve,`RPC '${e}' ${o} completed.`)}});let f=JSON.stringify(i);x(ve,`RPC '${e}' ${o} sending request:`,i),h.send(t,"POST",f,r,15)})}Bo(e,t,r){let i=lc(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=uc(),l=cc(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.xmlHttpFactory=new sc({})),this.Oo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;let v=o.join("");x(ve,`Creating RPC '${e}' stream ${i}: ${v}`,h);let b=c.createWebChannel(v,h),S=!1,D=!1,k=new pu({Io:O=>{D?x(ve,`Not sending because RPC '${e}' stream ${i} is closed:`,O):(S||(x(ve,`Opening RPC '${e}' stream ${i} transport.`),b.open(),S=!0),x(ve,`RPC '${e}' stream ${i} sending:`,O),b.send(O))},To:()=>b.close()}),U=(O,J,K)=>{O.listen(J,Y=>{try{K(Y)}catch(se){setTimeout(()=>{throw se},0)}})};return U(b,Mn.EventType.OPEN,()=>{D||(x(ve,`RPC '${e}' stream ${i} transport opened.`),k.yo())}),U(b,Mn.EventType.CLOSE,()=>{D||(D=!0,x(ve,`RPC '${e}' stream ${i} transport closed`),k.So())}),U(b,Mn.EventType.ERROR,O=>{D||(D=!0,ws(ve,`RPC '${e}' stream ${i} transport errored:`,O),k.So(new M(C.UNAVAILABLE,"The operation could not be completed")))}),U(b,Mn.EventType.MESSAGE,O=>{var J;if(!D){let K=O.data[0];ae(!!K);let Y=K,se=Y.error||((J=Y[0])===null||J===void 0?void 0:J.error);if(se){x(ve,`RPC '${e}' stream ${i} received error:`,se);let Ge=se.status,ce=function(g){let y=te[g];if(y!==void 0)return DI(y)}(Ge),E=se.message;ce===void 0&&(ce=C.INTERNAL,E="Unknown error status: "+Ge+" with message "+se.message),D=!0,k.So(new M(ce,E)),b.close()}else x(ve,`RPC '${e}' stream ${i} received:`,K),k.bo(K)}}),U(l,ac.STAT_EVENT,O=>{O.stat===gs.PROXY?x(ve,`RPC '${e}' stream ${i} detected buffering proxy`):O.stat===gs.NOPROXY&&x(ve,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.wo()},0),k}};function hc(){return typeof document<"u"?document:null}function zs(n){return new jc(n,!0)}var xs=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&x("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var gu=class{constructor(e,t,r,i,o,c,l,h){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=l,this.listener=h,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new xs(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return _(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return _(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return _(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===C.RESOURCE_EXHAUSTED?(sn(t.toString()),sn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===C.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new M(C.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>_(this,null,function*(){this.state=0,this.start()}))}I_(e){return x("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(x("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}};var _u=class extends gu{constructor(e,t,r,i,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ae(!!e.streamToken),this.lastStreamToken=e.streamToken,ae(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=LI(e.writeResults,e.commitTime),r=Un(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=OI(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>FI(this.serializer,r))};this.a_(t)}};var yu=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new M(C.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Mo(e,$c(t,r),i,o,c)).catch(o=>{throw o.name==="FirebaseError"?(o.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new M(C.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,l])=>this.connection.Lo(e,$c(t,r),i,c,l,o)).catch(c=>{throw c.name==="FirebaseError"?(c.code===C.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new M(C.UNKNOWN,c.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},vu=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(sn(t),this.D_=!1):x("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Iu=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(c=>{r.enqueueAndForget(()=>_(this,null,function*(){li(this)&&(x("RemoteStore","Restarting streams for network reachability change."),yield function(h){return _(this,null,function*(){let f=Q(h);f.L_.add(4),yield ui(f),f.q_.set("Unknown"),f.L_.delete(4),yield Ws(f)})}(this))}))}),this.q_=new vu(r,i)}};function Ws(n){return _(this,null,function*(){if(li(n))for(let e of n.B_)yield e(!0)})}function ui(n){return _(this,null,function*(){for(let e of n.B_)yield e(!1)})}function li(n){return Q(n).L_.size===0}function op(n,e,t){return _(this,null,function*(){if(!$s(e))throw e;n.L_.add(1),yield ui(n),n.q_.set("Offline"),t||(t=()=>zI(n.localStore)),n.asyncQueue.enqueueRetryable(()=>_(this,null,function*(){x("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Ws(n)}))})}function ap(n,e){return e().catch(t=>op(n,t,e))}function Hs(n){return _(this,null,function*(){let e=Q(n),t=Mt(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;KI(e);)try{let i=yield WI(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,QI(e,i)}catch(i){yield op(e,i)}cp(e)&&up(e)})}function KI(n){return li(n)&&n.O_.length<10}function QI(n,e){n.O_.push(e);let t=Mt(n);t.r_()&&t.V_&&t.m_(e.mutations)}function cp(n){return li(n)&&!Mt(n).n_()&&n.O_.length>0}function up(n){Mt(n).start()}function JI(n){return _(this,null,function*(){Mt(n).p_()})}function YI(n){return _(this,null,function*(){let e=Mt(n);for(let t of n.O_)e.m_(t.mutations)})}function XI(n,e,t){return _(this,null,function*(){let r=n.O_.shift(),i=Bc.from(r,e,t);yield ap(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Hs(n)})}function ZI(n,e){return _(this,null,function*(){e&&Mt(n).V_&&(yield function(r,i){return _(this,null,function*(){if(function(c){return PI(c)&&c!==C.ABORTED}(i.code)){let o=r.O_.shift();Mt(r).s_(),yield ap(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Hs(r)}})}(n,e)),cp(n)&&up(n)})}function bf(n,e){return _(this,null,function*(){let t=Q(n);t.asyncQueue.verifyOperationInProgress(),x("RemoteStore","RemoteStore received new credentials");let r=li(t);t.L_.add(3),yield ui(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Ws(t)})}function eE(n,e){return _(this,null,function*(){let t=Q(n);e?(t.L_.delete(2),yield Ws(t)):e||(t.L_.add(2),yield ui(t),t.q_.set("Unknown"))})}function Mt(n){return n.U_||(n.U_=function(t,r,i){let o=Q(t);return o.w_(),new _u(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:JI.bind(null,n),mo:ZI.bind(null,n),f_:YI.bind(null,n),g_:XI.bind(null,n)}),n.B_.push(e=>_(this,null,function*(){e?(n.U_.s_(),yield Hs(n)):(yield n.U_.stop(),n.O_.length>0&&(x("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var Eu=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new lt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let c=Date.now()+r,l=new n(e,t,c,i,o);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new M(C.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function lp(n,e){if(sn("AsyncQueue",`${e}: ${n}`),$s(n))return new M(C.UNAVAILABLE,`${e}: ${n}`);throw n}var wu=class{constructor(){this.queries=Sf(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=Q(t),o=i.queries;i.queries=Sf(),o.forEach((c,l)=>{for(let h of l.j_)h.onError(r)})})(this,new M(C.ABORTED,"Firestore shutting down"))}};function Sf(){return new Ot(n=>Wf(n),zf)}function tE(n){n.Y_.forEach(e=>{e.next()})}var Cf,Rf;(Rf=Cf||(Cf={})).ea="default",Rf.Cache="cache";var Tu=class{constructor(e,t,r,i,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Ca={},this.Fa=new Ot(l=>Wf(l),zf),this.Ma=new Map,this.xa=new Set,this.Oa=new Ne(B.comparator),this.Na=new Map,this.La=new ai,this.Ba={},this.ka=new Map,this.qa=oi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function nE(n,e,t){return _(this,null,function*(){let r=oE(n);try{let i=yield function(c,l){let h=Q(c),f=Ee.now(),v=l.reduce((D,k)=>D.add(k.key),Ie()),b,S;return h.persistence.runTransaction("Locally write mutations","readwrite",D=>{let k=Ps(),U=Ie();return h.cs.getEntries(D,v).next(O=>{k=O,k.forEach((J,K)=>{K.isValidDocument()||(U=U.add(J))})}).next(()=>h.localDocuments.getOverlayedDocuments(D,k)).next(O=>{b=O;let J=[];for(let K of l){let Y=RI(K,b.get(K.key).overlayedDocument);Y!=null&&J.push(new ft(K.key,Y,Uf(Y.value.mapValue),nn.exists(!0)))}return h.mutationQueue.addMutationBatch(D,f,J,l)}).next(O=>{S=O;let J=O.applyToLocalDocumentSet(b,U);return h.documentOverlayCache.saveOverlays(D,O.batchId,J)})}).then(()=>({batchId:S.batchId,changes:Kf(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(c,l,h){let f=c.Ba[c.currentUser.toKey()];f||(f=new Ne(H)),f=f.insert(l,h),c.Ba[c.currentUser.toKey()]=f}(r,i.batchId,t),yield Ks(r,i.changes),yield Hs(r.remoteStore)}catch(i){let o=lp(i,"Failed to persist write");t.reject(o)}})}function Pf(n,e,t){let r=Q(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,c)=>{let l=c.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(c,l){let h=Q(c);h.onlineState=l;let f=!1;h.queries.forEach((v,b)=>{for(let S of b.j_)S.Z_(l)&&(f=!0)}),f&&tE(h)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function rE(n,e){return _(this,null,function*(){let t=Q(n),r=e.batch.batchId;try{let i=yield $I(t.localStore,e);dp(t,r,null),hp(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ks(t,i)}catch(i){yield xf(i)}})}function iE(n,e,t){return _(this,null,function*(){let r=Q(n);try{let i=yield function(c,l){let h=Q(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let v;return h.mutationQueue.lookupMutationBatch(f,l).next(b=>(ae(b!==null),v=b.keys(),h.mutationQueue.removeMutationBatch(f,b))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,v,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,v)).next(()=>h.localDocuments.getDocuments(f,v))})}(r.localStore,e);dp(r,e,t),hp(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ks(r,i)}catch(i){yield xf(i)}})}function hp(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function dp(n,e,t){let r=Q(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Ks(n,e,t){return _(this,null,function*(){let r=Q(n),i=[],o=[],c=[];r.Fa.isEmpty()||(r.Fa.forEach((l,h)=>{c.push(r.Ka(h,e,t).then(f=>{var v;if((f||t)&&r.isPrimaryClient){let b=f?!f.fromCache:(v=t?.targetChanges.get(h.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(h.targetId,b?"current":"not-current")}if(f){i.push(f);let b=cu.Wi(h.targetId,f);o.push(b)}}))}),yield Promise.all(c),r.Ca.d_(i),yield function(h,f){return _(this,null,function*(){let v=Q(h);try{yield v.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>R.forEach(f,S=>R.forEach(S.$i,D=>v.persistence.referenceDelegate.addReference(b,S.targetId,D)).next(()=>R.forEach(S.Ui,D=>v.persistence.referenceDelegate.removeReference(b,S.targetId,D)))))}catch(b){if(!$s(b))throw b;x("LocalStore","Failed to update sequence numbers: "+b)}for(let b of f){let S=b.targetId;if(!b.fromCache){let D=v.os.get(S),k=D.snapshotVersion,U=D.withLastLimboFreeSnapshotVersion(k);v.os=v.os.insert(S,U)}}})}(r.localStore,o))})}function sE(n,e){return _(this,null,function*(){let t=Q(n);if(!t.currentUser.isEqual(e)){x("SyncEngine","User change. New user:",e.toKey());let r=yield sp(t.localStore,e);t.currentUser=e,function(o,c){o.ka.forEach(l=>{l.forEach(h=>{h.reject(new M(C.CANCELLED,c))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ks(t,r.hs)}})}function oE(n){let e=Q(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rE.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iE.bind(null,e),e}var Os=class{constructor(){this.synchronizeTabs=!1}initialize(e){return _(this,null,function*(){this.serializer=zs(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return GI(this.persistence,new lu,e.initialUser,this.serializer)}createPersistence(e){return new su(au.Zr,this.serializer)}createSharedClientState(e){return new du}terminate(){return _(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Au=class{initialize(e,t){return _(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Pf(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=sE.bind(null,this.syncEngine),yield eE(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new wu}()}createDatastore(e){let t=zs(e.databaseInfo.databaseId),r=function(o){return new mu(o)}(e.databaseInfo);return function(o,c,l,h){return new yu(o,c,l,h)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,c,l){return new Iu(r,i,o,c,l)}(this.localStore,this.datastore,e.asyncQueue,t=>Pf(this.syncEngine,t,0),function(){return Vs.D()?new Vs:new fu}())}createSyncEngine(e,t){return function(i,o,c,l,h,f,v){let b=new Tu(i,o,c,l,h,f);return v&&(b.Qa=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return _(this,null,function*(){var e,t;yield function(i){return _(this,null,function*(){let o=Q(i);x("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield ui(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()})}};var bu=class{constructor(e,t,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=le.UNAUTHENTICATED,this.clientId=As.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>_(this,null,function*(){x("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(x("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new M(C.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new lt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=lp(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function dc(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),x("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>_(this,null,function*(){r.isEqual(i)||(yield sp(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function Df(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield cE(n);x("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>bf(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>bf(e.remoteStore,i)),n._onlineComponents=e})}function aE(n){return n.name==="FirebaseError"?n.code===C.FAILED_PRECONDITION||n.code===C.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function cE(n){return _(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){x("FirestoreClient","Using user provided OfflineComponentProvider");try{yield dc(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!aE(t))throw t;ws("Error using user provided cache. Falling back to memory cache: "+t),yield dc(n,new Os)}}else x("FirestoreClient","Using default OfflineComponentProvider"),yield dc(n,new Os);return n._offlineComponents})}function uE(n){return _(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(x("FirestoreClient","Using user provided OnlineComponentProvider"),yield Df(n,n._uninitializedComponentsProvider._online)):(x("FirestoreClient","Using default OnlineComponentProvider"),yield Df(n,new Au))),n._onlineComponents})}function lE(n){return uE(n).then(e=>e.syncEngine)}function fp(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var kf=new Map;function pp(n,e,t){if(!t)throw new M(C.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function hE(n,e,t,r){if(e===!0&&r===!0)throw new M(C.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Nf(n){if(!B.isDocumentKey(n))throw new M(C.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Vf(n){if(B.isDocumentKey(n))throw new M(C.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Uu(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":j()}function mp(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new M(C.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Uu(n);throw new M(C.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Ms=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new M(C.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new M(C.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fp((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new M(C.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new M(C.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new M(C.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Zn=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ms({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new M(C.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new M(C.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ms(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new fc;switch(r.type){case"firstParty":return new _c(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new M(C.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=kf.get(t);r&&(x("ComponentProvider","Removing Datastore"),kf.delete(t),r.terminate())}(this),Promise.resolve()}};function gp(n,e,t,r={}){var i;let o=(n=mp(n,Zn))._getSettings(),c=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==c&&ws("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:c,ssl:!1})),r.mockUserToken){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=le.MOCK_USER;else{l=Fh(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new M(C.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new le(f)}n._authCredentials=new pc(new Ts(l,h))}}var Su=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},ht=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Nt(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Nt=class n extends Su{constructor(e,t,r){super(e,t,fI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ht(this.firestore,null,new B(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function _p(n,e,...t){if(n=Ae(n),pp("collection","path",e),n instanceof Zn){let r=ie.fromString(e,...t);return Vf(r),new Nt(n,null,r)}{if(!(n instanceof ht||n instanceof Nt))throw new M(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ie.fromString(e,...t));return Vf(r),new Nt(n.firestore,null,r)}}function yp(n,e,...t){if(n=Ae(n),arguments.length===1&&(e=As.newId()),pp("doc","path",e),n instanceof Zn){let r=ie.fromString(e,...t);return Nf(r),new ht(n,null,new B(r))}{if(!(n instanceof ht||n instanceof Nt))throw new M(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ie.fromString(e,...t));return Nf(r),new ht(n.firestore,n instanceof Nt?n.converter:null,new B(r))}}var Cu=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new xs(this,"async_queue_retry"),this.Eu=()=>{let t=hc();t&&x("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()};let e=hc();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let t=hc();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let t=new lt;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return _(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!$s(e))throw e;x("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let t=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(c){let l=c.message||"";return c.stack&&(l=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),l}(r);throw sn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=t,t}enqueueAfterDelay(e,t,r){this.du(),this.Tu.indexOf(e)>-1&&(t=0);let i=Eu.createAndSchedule(this,e,t,r,o=>this.Vu(o));return this.lu.push(i),i}du(){this.hu&&j()}verifyOperationInProgress(){}mu(){return _(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let t of this.lu)if(t.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.lu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let t=this.lu.indexOf(e);this.lu.splice(t,1)}};var Fs=class extends Zn{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=function(){return new Cu}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Ip(this),this._firestoreClient.terminate()}};function vp(n,e){let t=typeof n=="object"?n:Dn(),r=typeof n=="string"?n:e||"(default)",i=Br(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=Mh("firestore");o&&gp(i,...o)}return i}function dE(n){return n._firestoreClient||Ip(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Ip(n){var e,t,r;let i=n._freezeSettings(),o=function(l,h,f,v){return new Tc(l,h,f,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,fp(v.experimentalLongPollingOptions),v.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new bu(n._authCredentials,n._appCheckCredentials,n._queue,o),!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Ls=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(dt.fromBase64String(e))}catch(t){throw new M(C.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(dt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Us=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new M(C.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ke(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Bs=class{constructor(e){this._methodName=e}};var qs=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new M(C.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new M(C.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return H(this._lat,e._lat)||H(this._long,e._long)}};var js=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var fE=/^__.*__$/,Ru=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ft(e,this.data,this.fieldMask,t,this.fieldTransforms):new un(e,this.data,t,this.fieldTransforms)}};function Ep(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw j()}}var Pu=class n{constructor(e,t,r,i,o,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.yu(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Gs(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(Ep(this.wu)&&fE.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},Du=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||zs(e)}Nu(e,t,r,i=!1){return new Pu({wu:e,methodName:t,Ou:r,path:ke.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function pE(n){let e=n._freezeSettings(),t=zs(n._databaseId);return new Du(n._databaseId,!!e.ignoreUndefinedProperties,t)}function mE(n,e,t,r,i,o={}){let c=n.Nu(o.merge||o.mergeFields?2:0,e,t,i);bp("Data must be an object, but it was:",c,r);let l=Tp(r,c),h,f;if(o.merge)h=new Qe(c.fieldMask),f=c.fieldTransforms;else if(o.mergeFields){let v=[];for(let b of o.mergeFields){let S=gE(e,b,t);if(!c.contains(S))throw new M(C.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);vE(v,S)||v.push(S)}h=new Qe(v),f=c.fieldTransforms.filter(b=>h.covers(b.field))}else h=null,f=c.fieldTransforms;return new Ru(new Ke(l),h,f)}function wp(n,e){if(Ap(n=Ae(n)))return bp("Unsupported field value:",e,n),Tp(n,e);if(n instanceof Bs)return function(r,i){if(!Ep(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let o=[],c=0;for(let l of r){let h=wp(l,i.Fu(c));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),c++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Ae(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return TI(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ee.fromDate(r);return{timestampValue:Gc(i.serializer,o)}}if(r instanceof Ee){let o=new Ee(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gc(i.serializer,o)}}if(r instanceof qs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ls)return{bytesValue:kI(i.serializer,r._byteString)};if(r instanceof ht){let o=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(o))throw i.Mu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:rp(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof js)return function(c,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map(h=>{if(typeof h!="number")throw l.Mu("VectorValues must only contain numeric values.");return Lu(l.serializer,h)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${Uu(r)}`)}(n,e)}function Tp(n,e){let t={};return Of(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ci(n,(r,i)=>{let o=wp(i,e.bu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function Ap(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ee||n instanceof qs||n instanceof Ls||n instanceof ht||n instanceof Bs||n instanceof js)}function bp(n,e,t){if(!Ap(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Uu(t);throw r==="an object"?e.Mu(n+" a custom object"):e.Mu(n+" "+r)}}function gE(n,e,t){if((e=Ae(e))instanceof Us)return e._internalPath;if(typeof e=="string")return yE(n,e);throw Gs("Field path arguments must be of type string or ",n,!1,void 0,t)}var _E=new RegExp("[~\\*/\\[\\]]");function yE(n,e,t){if(e.search(_E)>=0)throw Gs(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Us(...e.split("."))._internalPath}catch{throw Gs(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Gs(n,e,t,r,i){let o=r&&!r.isEmpty(),c=i!==void 0,l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let h="";return(o||c)&&(h+=" (found",o&&(h+=` in field ${r}`),c&&(h+=` in document ${i}`),h+=")"),new M(C.INVALID_ARGUMENT,l+n+h)}function vE(n,e){return n.some(t=>t.isEqual(e))}function IE(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}function Sp(n,e){let t=mp(n.firestore,Fs),r=yp(n),i=IE(n.converter,e);return EE(t,[mE(pE(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,nn.exists(!1))]).then(()=>r)}function EE(n,e){return function(r,i){let o=new lt;return r.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return nE(yield lE(r),i,o)})),o.promise}(dE(n),e)}(function(e,t=!0){(function(i){er=i})(Ct),St(new Le("firestore",(r,{instanceIdentifier:i,options:o})=>{let c=r.getProvider("app").getImmediate(),l=new Fs(new mc(r.getProvider("auth-internal")),new vc(r.getProvider("app-check-internal")),function(f,v){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new M(C.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ac(f.options.projectId,v)}(c,i),c);return o=Object.assign({useFetchStreams:t},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),oe(df,"4.7.1",e),oe(df,"4.7.1","esm2017")})();var ln=class{constructor(e){return e}},Cp="firestore",Bu=class{constructor(){return qr(Cp)}};var qu=new xe("angularfire2.firestore-instances");function wE(n,e){let t=Qi(Cp,n,e);return t&&new ln(t)}function TE(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new ln(r)}}var AE={provide:Bu,deps:[[new Oe,qu]]},bE={provide:ln,useFactory:wE,deps:[[new Oe,qu],st]};function Rp(n,...e){return oe("angularfire",Ht.full,"fst"),mn([bE,AE,{provide:qu,useFactory:TE(n),multi:!0,deps:[vt,jt,Vn,Kt,[new Oe,Jr],[new Oe,Nn],...e]}])}var Pp=je(Sp,!0);var Dp=je(_p,!0);var kp=je(vp,!0);var Ft=class n{constructor(e,t){this.auth=e;this.firestore=t}userSubject=new Wl(null);login(e,t){return af(this.auth,e,t).then(r=>(this.userSubject.next(r.user),this.logLogin(e),r.user))}logout(){return cf(this.auth).then(()=>{this.userSubject.next(null)})}register(e,t){return sf(this.auth,e,t).then(r=>(this.userSubject.next(r.user),r.user))}getUser(){return this.userSubject.asObservable()}logLogin(e){let t=Dp(this.firestore,"logins");Pp(t,{fecha:new Date,user:e}).then(()=>console.log("Login registrado correctamente")).catch(r=>console.log("Error al registrar el login: ",r))}static \u0275fac=function(t){return new(t||n)(wr(Zt),wr(ln))};static \u0275prov=Er({token:n,factory:n.\u0275fac,providedIn:"root"})};function CE(n,e){if(n&1&&(N(0,"div",18),F(1),V()),n&2){let t=Gt();ye(),Di(" ",t.msjError," ")}}var Qs=class n{constructor(e,t){this.authService=e;this.router=t}userMail="";userPWD="";errorLogin=!1;msjError="";Login(){this.authService.login(this.userMail,this.userPWD).then(()=>{this.errorLogin=!1,this.router.navigate(["/home"])}).catch(e=>{this.errorLogin=!0,this.manejarErrores(e)})}goTo(e){this.router.navigate([e])}manejarErrores(e){switch(e.code){case"auth/invalid-email":this.msjError="Email inv\xE1lido. Por favor, verifica el formato del correo.";break;case"auth/user-not-found":this.msjError="Usuario no encontrado. Por favor, revisa tus credenciales.";break;case"auth/wrong-password":this.msjError="Contrase\xF1a incorrecta. Vuelve a intentarlo.";break;default:this.msjError="Error: "+e.message;break}console.log("Error en el login: "+e.code)}CloseSession(){this.authService.logout().then(()=>console.log("Sesi\xF3n cerrada"))}setQuickAccess(e,t){this.userMail=e,this.userPWD=t,this.Login()}static \u0275fac=function(t){return new(t||n)(z(Ft),z(wt))};static \u0275cmp=Me({type:n,selectors:[["app-login"]],standalone:!0,features:[Fe],decls:30,vars:3,consts:[["loginForm","ngForm"],[1,"overlay","d-flex","justify-content-center","align-items-center","vh-100"],[1,"card","p-4","shadow-lg",2,"width","450px","border-radius","20px"],[1,"text-center","mb-4"],[3,"ngSubmit"],[1,"form-group"],["for","nombre"],["type","email","id","nombre","name","email","placeholder","Ingrese su email","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","clave"],["type","password","id","clave","name","password","placeholder","Ingrese su contrase\xF1a","required","",1,"form-control",3,"ngModelChange","ngModel"],["class","alert alert-danger text-center","role","alert",4,"ngIf"],[1,"text-center","mb-3"],["id","olvido-contrasena",1,"text-decoration-none"],["type","submit",1,"btn","btn-warning","btn-block","rounded-pill","font-weight-bold"],[1,"text-center","mt-3"],["type","button",1,"btn","btn-secondary","mr-2",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"],["id","registrarse",1,"text-decoration-none",3,"click"],["role","alert",1,"alert","alert-danger","text-center"]],template:function(t,r){if(t&1){let i=_n();N(0,"div",1)(1,"div",2)(2,"h1",3),F(3,"Inicio Sesi\xF3n"),V(),N(4,"form",4,0),fe("ngSubmit",function(){return Ce(i),Re(r.Login())}),N(6,"div",5)(7,"label",6),F(8,"Email"),V(),N(9,"input",7),In("ngModelChange",function(c){return Ce(i),vn(r.userMail,c)||(r.userMail=c),Re(c)}),V()(),N(10,"div",5)(11,"label",8),F(12,"Contrase\xF1a"),V(),N(13,"input",9),In("ngModelChange",function(c){return Ce(i),vn(r.userPWD,c)||(r.userPWD=c),Re(c)}),V()(),gn(14,CE,2,1,"div",10),N(15,"div",11)(16,"a",12),F(17,"\xBFOlvid\xF3 su contrase\xF1a?"),V()(),N(18,"button",13),F(19,"Ingresar"),V(),N(20,"div",14)(21,"button",15),fe("click",function(){return Ce(i),Re(r.setQuickAccess("lalala@gmail.com","123456"))}),F(22,"Login User 1"),V(),N(23,"button",16),fe("click",function(){return Ce(i),Re(r.setQuickAccess("papapa@gmail.com","123456"))}),F(24,"Login User 2"),V()(),N(25,"div",14)(26,"span"),F(27,"\xBFNo tienes una cuenta?"),V(),N(28,"a",17),fe("click",function(){return Ce(i),Re(r.goTo("/registro"))}),F(29,"Registrarse"),V()()()()()}t&2&&(ye(9),yn("ngModel",r.userMail),ye(4),yn("ngModel",r.userPWD),ye(),tt("ngIf",r.errorLogin))},dependencies:[wn,En,ji,qi,Cn,Li,Ui,Or,xr,Vr],styles:['@charset "UTF-8";.overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(#000000b3,#000000b3);z-index:-1}.card[_ngcontent-%COMP%]{background-color:#d0fac360;border:none;box-shadow:0 4px 8px #0003}.form-control[_ngcontent-%COMP%]{padding:15px;background-color:#fff;border-radius:10px;border:2px solid #ddd;transition:all .3s ease}.form-control[_ngcontent-%COMP%]:focus{border-color:#fc0;box-shadow:0 0 8px #ffcc0080}label[_ngcontent-%COMP%]{margin-bottom:5px;font-weight:700;display:block}#registrarse[_ngcontent-%COMP%], #olvido-contrasena[_ngcontent-%COMP%]{margin:5px 0;font-weight:700;color:#000;text-decoration:none}#registrarse[_ngcontent-%COMP%]:hover, #olvido-contrasena[_ngcontent-%COMP%]:hover{color:#fc0;cursor:pointer}span[_ngcontent-%COMP%]{font-weight:700}.alert[_ngcontent-%COMP%]{margin-top:10px;padding:10px;border-radius:5px}']})};var Js=class n{constructor(e){this.router=e}goTo(e){this.router.navigate([e])}static \u0275fac=function(t){return new(t||n)(z(wt))};static \u0275cmp=Me({type:n,selectors:[["app-home"]],standalone:!0,features:[Fe],decls:27,vars:0,consts:[[1,"seccion-juegos"],[1,"preguntados"],["src","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQfcCz3JlM4xlxLvDWPSj71xusZCerXq0QEpg&s","alt","preguntados",3,"click"],["href","scores"],[1,"mayor-menor"],["src","https://resizer.glanacion.com/resizer/v2/un-juego-con-cartas-espanolas-sin-comodines-ni-L4YAHBM6IVBLNEJA5E33NQTKHI.jpg?auth=c4b877fbfbe96ead5811742b26ba93b66a4e97730d76bc15e6920f84a1745fd4&width=768&quality=70&smart=false","alt","mayor o menor",3,"click"],[1,"ahorcado"],["src","https://cdn-icons-png.flaticon.com/512/2241/2241387.png","alt","ahorcado",3,"click"],[1,"juego-nuevo"],["src","https://img.freepik.com/vector-gratis/hoja-trabajo-juego-combinacion-creativo-animales_23-2148782846.jpg","alt","juego nuevo"]],template:function(t,r){t&1&&(N(0,"h1"),F(1,"Seccion de Juegos"),V(),N(2,"div",0)(3,"div",1)(4,"img",2),fe("click",function(){return r.goTo("preguntados")}),V(),N(5,"p"),F(6,"Preguntados"),V(),N(7,"a",3),F(8,"ver puntuacion"),V()(),N(9,"div",4)(10,"img",5),fe("click",function(){return r.goTo("mayor-menor")}),V(),N(11,"p"),F(12,"Mayor o Menor"),V(),N(13,"a",3),F(14,"ver puntuacion"),V()(),N(15,"div",6)(16,"img",7),fe("click",function(){return r.goTo("ahorcado")}),V(),N(17,"p"),F(18,"Ahorcado"),V(),N(19,"a",3),F(20,"ver puntuacion"),V()(),N(21,"div",8),nt(22,"img",9),N(23,"p"),F(24,"Juego Nuevo"),V(),N(25,"a",3),F(26,"ver puntuacion"),V()()())},styles:["h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:80px;font-size:3.5em;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif}p[_ngcontent-%COMP%]{text-align:center;font-size:1.5em;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif;font-weight:700;margin:40px 0}.seccion-juegos[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:100px;padding:20px;align-items:center}.seccion-juegos[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:10px;box-shadow:0 4px 8px #00000080;transition:transform .3s ease}.seccion-juegos[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.05);cursor:pointer;box-shadow:0 4px 8px #000}a[_ngcontent-%COMP%]{background-color:#deb887;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif;color:#fff;padding:10px 20px;margin-left:110px;text-decoration:none;border-radius:15px;font-size:1.2em;transition:background-color .3s,transform .3s}a[_ngcontent-%COMP%]:hover{background-color:#e6ab5e;transform:scale(1.05)}a[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 2px #007bff80}"]})};var Ys=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Me({type:n,selectors:[["app-error"]],standalone:!0,features:[Fe],decls:2,vars:0,template:function(t,r){t&1&&(N(0,"p"),F(1,"error works!"),V())}})};var Xs=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Me({type:n,selectors:[["app-quien-soy"]],standalone:!0,features:[Fe],decls:20,vars:0,consts:[[1,"container","mt-5","p-5","bg-light","rounded-5","shadow-lg",2,"background-size","cover","background-position","center"],[1,"row","align-items-center","bg-card","rounded-5","shadow","p-4"],[1,"col-md-4","text-center"],["src","../../../../public/quiensoy.jpeg","alt","Juan Pablo",1,"img-fluid","rounded-circle","shadow",2,"max-width","320px"],[1,"col-md-8"],[1,"mb-4","text-dark","display-4"],[1,"lead","text-dark"]],template:function(t,r){t&1&&(N(0,"div",0)(1,"div",1)(2,"div",2),nt(3,"img",3),V(),N(4,"div",4)(5,"h1",5),F(6,"Me llamo Juan Pablo De Maio"),V(),N(7,"p",6)(8,"strong"),F(9,"Edad:"),V(),F(10," 19 a\xF1os"),nt(11,"br"),N(12,"strong"),F(13,"Estudios:"),V(),F(14," Actualmente estudio en la UTN, cursando la carrera de T\xE9cnico en Programaci\xF3n."),nt(15,"br"),N(16,"strong"),F(17,"Juego con Cartas o Im\xE1genes"),V(),nt(18,"br"),F(19," Descripci\xF3n: Pensaba en mostrar una serie de cartas que se van a dar vuelta, despu\xE9s se volver\xEDan a dar vuelta y el jugador deber\xEDa ir clickeando en el orden que se fueron mostrando las cartas. Se deber\xEDa subir la dificultad ocultando las cartas m\xE1s r\xE1pido e ir sumando puntos. "),V()()()())},styles:[".container[_ngcontent-%COMP%]{border-radius:30px;background-size:cover;background-position:center;overflow:hidden}.bg-card[_ngcontent-%COMP%]{background-color:#7dd86299;border:1px solid rgba(208,250,195,.8);box-shadow:0 4px 8px #0003;padding:20px}h1[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:2.5rem;font-weight:700;color:#343a40}p.lead[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:1.2rem;line-height:1.8;color:#343a40}.img-fluid[_ngcontent-%COMP%]{max-width:100%;height:320px;border:5px solid #ffc107}.rounded-5[_ngcontent-%COMP%]{border-radius:30px!important}.bg-light[_ngcontent-%COMP%]{background-color:#d0fac399!important}.shadow-lg[_ngcontent-%COMP%]{box-shadow:0 10px 20px #0003}"]})};function RE(n,e){if(n&1&&(N(0,"h2",17),F(1),V()),n&2){let t=Gt();ye(),Di("Usuario registrado: ",t.loggedUser,"")}}function PE(n,e){if(n&1&&(N(0,"p",18),F(1),V()),n&2){let t=Gt();ye(),th(t.msjError)}}var Zs=class n{constructor(e,t){this.authService=e;this.router=t}nuevoEmail="";nuevaClave="";loggedUser="";flagError=!1;msjError="";Register(){this.authService.register(this.nuevoEmail,this.nuevaClave).then(e=>{e&&e.email&&(this.loggedUser=e.email),this.flagError=!1,this.router.navigate(["/home"])}).catch(e=>{this.flagError=!0,this.handleError(e)})}handleError(e){switch(e.code){case"auth/invalid-email":this.msjError="Email inv\xE1lido";break;case"auth/email-already-in-use":this.msjError="Este email ya est\xE1 en uso";break;case"auth/weak-password":this.msjError="La contrase\xF1a es muy d\xE9bil. Debe tener al menos 6 caracteres.";break;default:this.msjError="Error: "+e.message;break}console.log("Error en el registro: "+e.code)}goTo(e){this.router.navigate([e])}static \u0275fac=function(t){return new(t||n)(z(Ft),z(wt))};static \u0275cmp=Me({type:n,selectors:[["app-registro"]],standalone:!0,features:[Fe],decls:26,vars:4,consts:[["registerForm","ngForm"],[1,"overlay","d-flex","justify-content-center","align-items-center","vh-100"],[1,"card","p-4","shadow-lg",2,"width","450px","border-radius","20px"],[1,"text-center","mb-4"],[3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","placeholder","Ingrese su email","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","clave"],["type","password","id","clave","name","clave","placeholder","Ingrese una contrase\xF1a","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-center","mb-3"],["id","olvido-contrasena",1,"text-decoration-none"],["type","submit",1,"btn","btn-warning","btn-block","rounded-pill","font-weight-bold"],[1,"text-center","mt-3"],["id","iniciar-sesion",1,"text-decoration-none",3,"click"],["class","text-center text-primary",4,"ngIf"],["class","text-center text-danger",4,"ngIf"],[1,"text-center","text-primary"],[1,"text-center","text-danger"]],template:function(t,r){if(t&1){let i=_n();N(0,"div",1)(1,"div",2)(2,"h1",3),F(3,"Registrarse"),V(),N(4,"form",4,0),fe("ngSubmit",function(){return Ce(i),Re(r.Register())}),N(6,"div",5)(7,"label",6),F(8,"Email"),V(),N(9,"input",7),In("ngModelChange",function(c){return Ce(i),vn(r.nuevoEmail,c)||(r.nuevoEmail=c),Re(c)}),V()(),N(10,"div",5)(11,"label",8),F(12,"Contrase\xF1a"),V(),N(13,"input",9),In("ngModelChange",function(c){return Ce(i),vn(r.nuevaClave,c)||(r.nuevaClave=c),Re(c)}),V()(),N(14,"div",10)(15,"a",11),F(16,"\xBFOlvid\xF3 su contrase\xF1a?"),V()(),N(17,"button",12),F(18," Registrarse "),V(),N(19,"div",13)(20,"span"),F(21,"\xBFYa tienes una cuenta?"),V(),N(22,"a",14),fe("click",function(){return Ce(i),Re(r.goTo("/login"))}),F(23,"Iniciar sesi\xF3n"),V()()(),gn(24,RE,2,1,"h2",15)(25,PE,2,1,"p",16),V()()}t&2&&(ye(9),yn("ngModel",r.nuevoEmail),ye(4),yn("ngModel",r.nuevaClave),ye(11),tt("ngIf",r.loggedUser!==""),ye(),tt("ngIf",r.flagError))},dependencies:[wn,En,ji,qi,Cn,Li,Ui,Or,xr,Vr],styles:[".overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(#000000b3,#000000b3);z-index:-1}.card[_ngcontent-%COMP%]{background-color:#d0fac360;border:none}.form-control[_ngcontent-%COMP%]{padding:20px;background-color:#fff;border-radius:10px;border:2px solid #ddd;transition:all .3s ease}.form-control[_ngcontent-%COMP%]:focus{border-color:#fc0;box-shadow:0 0 10px #ffcc0080}label[_ngcontent-%COMP%]{margin-left:10px;font-weight:700}#iniciar-sesion[_ngcontent-%COMP%], #olvido-contrasena[_ngcontent-%COMP%]{margin-left:10px;font-weight:700;color:#000;text-decoration:none}#iniciar-sesion[_ngcontent-%COMP%]:hover, #olvido-contrasena[_ngcontent-%COMP%]:hover{color:#fc0;cursor:pointer}span[_ngcontent-%COMP%]{font-weight:700}"]})};var Vp=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"login",component:Qs},{path:"home",component:Js},{path:"quien-soy",component:Xs},{path:"registro",component:Zs},{path:"juegos",loadChildren:()=>import("./chunk-VK6TIA55.js").then(n=>n.JuegosModule)},{path:"**",component:Ys}];var xp={projectId:"sala-juegos-ab9cb",appId:"1:639687055629:web:6ec8a897ad3ef0f988b844",storageBucket:"sala-juegos-ab9cb.appspot.com",apiKey:"AIzaSyD_AqRMAi5HFadu1U_VaF4wAZPHBskjQWs",authDomain:"sala-juegos-ab9cb.firebaseapp.com",messagingSenderId:"639687055629"};var Op={providers:[ih({eventCoalescing:!0}),lh(Vp),od(()=>ad(xp)),rf(()=>of()),Rp(()=>kp())]};function DE(n,e){n&1&&(N(0,"a",7),F(1,"PERFIL"),V())}function kE(n,e){if(n&1){let t=_n();N(0,"a",8),fe("click",function(){Ce(t);let i=Gt();return Re(i.logout())}),F(1,"LOGOUT"),V()}}function NE(n,e){n&1&&(N(0,"a",9),F(1,"LOGIN"),V())}var eo=class n{constructor(e,t){this.authService=e;this.router=t}isLoggedIn=!1;ngOnInit(){this.authService.getUser().subscribe(e=>{this.isLoggedIn=!!e})}logout(){this.authService.logout().then(()=>{this.goTo("/login")})}goTo(e){this.router.navigate([e])}static \u0275fac=function(t){return new(t||n)(z(Ft),z(wt))};static \u0275cmp=Me({type:n,selectors:[["app-root"]],standalone:!0,features:[Fe],decls:10,vars:3,consts:[[1,"navbar"],["routerLink","home","routerLinkActive","active-route",1,"nav-link"],["routerLink","quien-soy","routerLinkActive","active-route",1,"nav-link"],[1,"nav-links-derecha"],["class","nav-link-perfil",4,"ngIf"],["class","nav-link-logout",3,"click",4,"ngIf"],["class","nav-link-login","routerLink","login","routerLinkActive","active-route",4,"ngIf"],[1,"nav-link-perfil"],[1,"nav-link-logout",3,"click"],["routerLink","login","routerLinkActive","active-route",1,"nav-link-login"]],template:function(t,r){t&1&&(N(0,"nav",0)(1,"a",1),F(2,"HOME"),V(),N(3,"a",2),F(4,"QUI\xC9N SOY"),V(),N(5,"div",3),gn(6,DE,2,0,"a",4)(7,kE,2,0,"a",5)(8,NE,2,0,"a",6),V()(),nt(9,"router-outlet")),t&2&&(ye(6),tt("ngIf",r.isLoggedIn),ye(),tt("ngIf",r.isLoggedIn),ye(),tt("ngIf",!r.isLoggedIn))},dependencies:[ah,ch,uh,wn,En],styles:["a[_ngcontent-%COMP%]{text-decoration:none;color:#000;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif;background-color:#deb887;border-radius:20px;padding:5px 10px;transition:background-color .3s,transform .3s}a[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#e6ab5e}.navbar[_ngcontent-%COMP%]{display:flex;align-items:center;padding:20px}.nav-link[_ngcontent-%COMP%]{margin:0 50px;font-size:1.5em}.nav-links-derecha[_ngcontent-%COMP%]{margin-left:auto;display:flex;gap:100px}.nav-link-login[_ngcontent-%COMP%], .nav-link-perfil[_ngcontent-%COMP%]{font-size:1.5em}.nav-link-login[_ngcontent-%COMP%]{margin-right:50px}"]})};oh(eo,Op).catch(n=>console.error(n));
