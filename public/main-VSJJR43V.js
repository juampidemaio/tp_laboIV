import{$ as _e,A as Ze,Aa as Bf,B as wa,Ba as jt,C as Et,Ca as jf,D as yi,Da as qf,E as Sl,Ea as $f,F as ht,G as dt,H as Pl,I as Tr,J as Ar,K as jn,L as Rl,M as Rf,O as Se,P as oe,Q as Dl,R as ks,S as qn,T as Cr,U as Df,V as Ft,W as kl,X as j,Y as $,Z as sn,_ as _i,a as He,aa as Ut,b as ct,ba as G,c as B_,ca as xl,d as ma,da as va,e as Bn,f as b,fa as $n,g as Ps,ga as zn,h as bf,ha as Gn,i as ga,ia as xs,j as Tf,ja as et,k as Af,ka as kf,l as bl,la as xf,m as Tl,ma as Vl,n as Al,na as Vf,o as Cl,oa as Nf,p as Rs,pa as Of,q as Cf,qa as Mf,r as Sf,ra as Nl,s as Pf,sa as Vs,t as ya,ta as Wn,u as Ds,ua as Ol,v as rn,va as Lf,w as _a,wa as wi,x as lt,xa as Ff,y as Lt,ya as Bt,z as ut,za as Uf}from"./chunk-5Z3375Y4.js";var qs=B_((qt,$l)=>{"use strict";(function(n,e){typeof qt=="object"&&typeof $l<"u"?$l.exports=e():typeof define=="function"&&define.amd?define(e):(n=typeof globalThis<"u"?globalThis:n||self,n.Sweetalert2=e())})(qt,function(){"use strict";function n(c,l,f){if(typeof c=="function"?c===l:c.has(l))return arguments.length<3?l:f;throw new TypeError("Private element is not present on this object")}function e(c,l){if(l.has(c))throw new TypeError("Cannot initialize the same private elements twice on an object")}function t(c,l){return c.get(n(c,l))}function r(c,l,f){e(c,l),l.set(c,f)}function i(c,l,f){return c.set(n(c,l),f),f}let s=100,a={},h=()=>{a.previousActiveElement instanceof HTMLElement?(a.previousActiveElement.focus(),a.previousActiveElement=null):document.body&&document.body.focus()},p=c=>new Promise(l=>{if(!c)return l();let f=window.scrollX,_=window.scrollY;a.restoreFocusTimeout=setTimeout(()=>{h(),l()},s),window.scrollTo(f,_)}),m="swal2-",y=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"].reduce((c,l)=>(c[l]=m+l,c),{}),x=["success","warning","info","question","error"].reduce((c,l)=>(c[l]=m+l,c),{}),L="SweetAlert2:",B=c=>c.charAt(0).toUpperCase()+c.slice(1),N=c=>{console.warn(`${L} ${typeof c=="object"?c.join(" "):c}`)},K=c=>{console.error(`${L} ${c}`)},Y=[],Z=c=>{Y.includes(c)||(Y.push(c),N(c))},ue=function(c){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Z(`"${c}" is deprecated and will be removed in the next major release.${l?` Use "${l}" instead.`:""}`)},be=c=>typeof c=="function"?c():c,se=c=>c&&typeof c.toPromise=="function",S=c=>se(c)?c.toPromise():Promise.resolve(c),v=c=>c&&Promise.resolve(c)===c,I=()=>document.body.querySelector(`.${y.container}`),T=c=>{let l=I();return l?l.querySelector(c):null},A=c=>T(`.${c}`),C=()=>A(y.popup),E=()=>A(y.icon),mt=()=>A(y["icon-content"]),vn=()=>A(y.title),is=()=>A(y["html-container"]),In=()=>A(y.image),Xt=()=>A(y["progress-steps"]),En=()=>A(y["validation-message"]),tt=()=>T(`.${y.actions} .${y.confirm}`),bn=()=>T(`.${y.actions} .${y.cancel}`),$e=()=>T(`.${y.actions} .${y.deny}`),Ve=()=>A(y["input-label"]),Tn=()=>T(`.${y.loader}`),gt=()=>A(y.actions),xo=()=>A(y.footer),Pt=()=>A(y["timer-progress-bar"]),ss=()=>A(y.close),rl=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,An=()=>{let c=C();if(!c)return[];let l=c.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),f=Array.from(l).sort((F,X)=>{let ce=parseInt(F.getAttribute("tabindex")||"0"),ye=parseInt(X.getAttribute("tabindex")||"0");return ce>ye?1:ce<ye?-1:0}),_=c.querySelectorAll(rl),R=Array.from(_).filter(F=>F.getAttribute("tabindex")!=="-1");return[...new Set(f.concat(R))].filter(F=>Ue(F))},Cn=()=>nt(document.body,y.shown)&&!nt(document.body,y["toast-shown"])&&!nt(document.body,y["no-backdrop"]),Sn=()=>{let c=C();return c?nt(c,y.toast):!1},os=()=>{let c=C();return c?c.hasAttribute("data-loading"):!1},Fe=(c,l)=>{if(c.textContent="",l){let _=new DOMParser().parseFromString(l,"text/html"),R=_.querySelector("head");R&&Array.from(R.childNodes).forEach(X=>{c.appendChild(X)});let F=_.querySelector("body");F&&Array.from(F.childNodes).forEach(X=>{X instanceof HTMLVideoElement||X instanceof HTMLAudioElement?c.appendChild(X.cloneNode(!0)):c.appendChild(X)})}},nt=(c,l)=>{if(!l)return!1;let f=l.split(/\s+/);for(let _=0;_<f.length;_++)if(!c.classList.contains(f[_]))return!1;return!0},Vo=(c,l)=>{Array.from(c.classList).forEach(f=>{!Object.values(y).includes(f)&&!Object.values(x).includes(f)&&!Object.values(l.showClass||{}).includes(f)&&c.classList.remove(f)})},ze=(c,l,f)=>{if(Vo(c,l),!l.customClass)return;let _=l.customClass[f];if(_){if(typeof _!="string"&&!_.forEach){N(`Invalid type of customClass.${f}! Expected string or iterable object, got "${typeof _}"`);return}ee(c,_)}},Jr=(c,l)=>{if(!l)return null;switch(l){case"select":case"textarea":case"file":return c.querySelector(`.${y.popup} > .${y[l]}`);case"checkbox":return c.querySelector(`.${y.popup} > .${y.checkbox} input`);case"radio":return c.querySelector(`.${y.popup} > .${y.radio} input:checked`)||c.querySelector(`.${y.popup} > .${y.radio} input:first-child`);case"range":return c.querySelector(`.${y.popup} > .${y.range} input`);default:return c.querySelector(`.${y.popup} > .${y.input}`)}},as=c=>{if(c.focus(),c.type!=="file"){let l=c.value;c.value="",c.value=l}},cs=(c,l,f)=>{!c||!l||(typeof l=="string"&&(l=l.split(/\s+/).filter(Boolean)),l.forEach(_=>{Array.isArray(c)?c.forEach(R=>{f?R.classList.add(_):R.classList.remove(_)}):f?c.classList.add(_):c.classList.remove(_)}))},ee=(c,l)=>{cs(c,l,!0)},rt=(c,l)=>{cs(c,l,!1)},Rt=(c,l)=>{let f=Array.from(c.children);for(let _=0;_<f.length;_++){let R=f[_];if(R instanceof HTMLElement&&nt(R,l))return R}},yt=(c,l,f)=>{f===`${parseInt(f)}`&&(f=parseInt(f)),f||parseInt(f)===0?c.style.setProperty(l,typeof f=="number"?`${f}px`:f):c.style.removeProperty(l)},ve=function(c){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";c&&(c.style.display=l)},Te=c=>{c&&(c.style.display="none")},Ae=function(c){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";c&&new MutationObserver(()=>{Dt(c,c.innerHTML,l)}).observe(c,{childList:!0,subtree:!0})},Ne=(c,l,f,_)=>{let R=c.querySelector(l);R&&R.style.setProperty(f,_)},Dt=function(c,l){let f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";l?ve(c,f):Te(c)},Ue=c=>!!(c&&(c.offsetWidth||c.offsetHeight||c.getClientRects().length)),No=()=>!Ue(tt())&&!Ue($e())&&!Ue(bn()),Oo=c=>c.scrollHeight>c.clientHeight,Pn=c=>{let l=window.getComputedStyle(c),f=parseFloat(l.getPropertyValue("animation-duration")||"0"),_=parseFloat(l.getPropertyValue("transition-duration")||"0");return f>0||_>0},Yr=function(c){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,f=Pt();f&&Ue(f)&&(l&&(f.style.transition="none",f.style.width="100%"),setTimeout(()=>{f.style.transition=`width ${c/1e3}s linear`,f.style.width="0%"},10))},Mo=()=>{let c=Pt();if(!c)return;let l=parseInt(window.getComputedStyle(c).width);c.style.removeProperty("transition"),c.style.width="100%";let f=parseInt(window.getComputedStyle(c).width),_=l/f*100;c.style.width=`${_}%`},Xr=()=>typeof window>"u"||typeof document>"u",il=`
 <div aria-labelledby="${y.title}" aria-describedby="${y["html-container"]}" class="${y.popup}" tabindex="-1">
   <button type="button" class="${y.close}"></button>
   <ul class="${y["progress-steps"]}"></ul>
   <div class="${y.icon}"></div>
   <img class="${y.image}" />
   <h2 class="${y.title}" id="${y.title}"></h2>
   <div class="${y["html-container"]}" id="${y["html-container"]}"></div>
   <input class="${y.input}" id="${y.input}" />
   <input type="file" class="${y.file}" />
   <div class="${y.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${y.select}" id="${y.select}"></select>
   <div class="${y.radio}"></div>
   <label class="${y.checkbox}">
     <input type="checkbox" id="${y.checkbox}" />
     <span class="${y.label}"></span>
   </label>
   <textarea class="${y.textarea}" id="${y.textarea}"></textarea>
   <div class="${y["validation-message"]}" id="${y["validation-message"]}"></div>
   <div class="${y.actions}">
     <div class="${y.loader}"></div>
     <button type="button" class="${y.confirm}"></button>
     <button type="button" class="${y.deny}"></button>
     <button type="button" class="${y.cancel}"></button>
   </div>
   <div class="${y.footer}"></div>
   <div class="${y["timer-progress-bar-container"]}">
     <div class="${y["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),sl=()=>{let c=I();return c?(c.remove(),rt([document.documentElement,document.body],[y["no-backdrop"],y["toast-shown"],y["has-column"]]),!0):!1},_t=()=>{a.currentInstance.resetValidationMessage()},Lo=()=>{let c=C(),l=Rt(c,y.input),f=Rt(c,y.file),_=c.querySelector(`.${y.range} input`),R=c.querySelector(`.${y.range} output`),F=Rt(c,y.select),X=c.querySelector(`.${y.checkbox} input`),ce=Rt(c,y.textarea);l.oninput=_t,f.onchange=_t,F.onchange=_t,X.onchange=_t,ce.oninput=_t,_.oninput=()=>{_t(),R.value=_.value},_.onchange=()=>{_t(),R.value=_.value}},Fo=c=>typeof c=="string"?document.querySelector(c):c,cr=c=>{let l=C();l.setAttribute("role",c.toast?"alert":"dialog"),l.setAttribute("aria-live",c.toast?"polite":"assertive"),c.toast||l.setAttribute("aria-modal","true")},ls=c=>{window.getComputedStyle(c).direction==="rtl"&&ee(I(),y.rtl)},us=c=>{let l=sl();if(Xr()){K("SweetAlert2 requires document to initialize");return}let f=document.createElement("div");f.className=y.container,l&&ee(f,y["no-transition"]),Fe(f,il);let _=Fo(c.target);_.appendChild(f),cr(c),ls(_),Lo()},wt=(c,l)=>{c instanceof HTMLElement?l.appendChild(c):typeof c=="object"?Uo(c,l):c&&Fe(l,c)},Uo=(c,l)=>{c.jquery?Zr(l,c):Fe(l,c.toString())},Zr=(c,l)=>{if(c.textContent="",0 in l)for(let f=0;f in l;f++)c.appendChild(l[f].cloneNode(!0));else c.appendChild(l.cloneNode(!0))},kt=(()=>{if(Xr())return!1;let c=document.createElement("div");return typeof c.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof c.style.animation<"u"?"animationend":!1})(),lr=(c,l)=>{let f=gt(),_=Tn();!f||!_||(!l.showConfirmButton&&!l.showDenyButton&&!l.showCancelButton?Te(f):ve(f),ze(f,l,"actions"),Bo(f,_,l),Fe(_,l.loaderHtml||""),ze(_,l,"loader"))};function Bo(c,l,f){let _=tt(),R=$e(),F=bn();!_||!R||!F||(ei(_,"confirm",f),ei(R,"deny",f),ei(F,"cancel",f),Be(_,R,F,f),f.reverseButtons&&(f.toast?(c.insertBefore(F,_),c.insertBefore(R,_)):(c.insertBefore(F,l),c.insertBefore(R,l),c.insertBefore(_,l))))}function Be(c,l,f,_){if(!_.buttonsStyling){rt([c,l,f],y.styled);return}ee([c,l,f],y.styled),_.confirmButtonColor&&(c.style.backgroundColor=_.confirmButtonColor,ee(c,y["default-outline"])),_.denyButtonColor&&(l.style.backgroundColor=_.denyButtonColor,ee(l,y["default-outline"])),_.cancelButtonColor&&(f.style.backgroundColor=_.cancelButtonColor,ee(f,y["default-outline"]))}function ei(c,l,f){let _=B(l);Dt(c,f[`show${_}Button`],"inline-block"),Fe(c,f[`${l}ButtonText`]||""),c.setAttribute("aria-label",f[`${l}ButtonAriaLabel`]||""),c.className=y[l],ze(c,f,`${l}Button`)}let ur=(c,l)=>{let f=ss();f&&(Fe(f,l.closeButtonHtml||""),ze(f,l,"closeButton"),Dt(f,l.showCloseButton),f.setAttribute("aria-label",l.closeButtonAriaLabel||""))},hr=(c,l)=>{let f=I();f&&(ol(f,l.backdrop),al(f,l.position),Rn(f,l.grow),ze(f,l,"container"))};function ol(c,l){typeof l=="string"?c.style.background=l:l||ee([document.documentElement,document.body],y["no-backdrop"])}function al(c,l){l&&(l in y?ee(c,y[l]):(N('The "position" parameter is not valid, defaulting to "center"'),ee(c,y.center)))}function Rn(c,l){l&&ee(c,y[`grow-${l}`])}var he={innerParams:new WeakMap,domCache:new WeakMap};let cl=["input","file","range","select","radio","checkbox","textarea"],ti=(c,l)=>{let f=C();if(!f)return;let _=he.innerParams.get(c),R=!_||l.input!==_.input;cl.forEach(F=>{let X=Rt(f,y[F]);X&&(ni(F,l.inputAttributes),X.className=y[F],R&&Te(X))}),l.input&&(R&&jo(l),xt(l))},jo=c=>{if(!c.input)return;if(!pe[c.input]){K(`Unexpected type of input! Expected ${Object.keys(pe).join(" | ")}, got "${c.input}"`);return}let l=ii(c.input);if(!l)return;let f=pe[c.input](l,c);ve(l),c.inputAutoFocus&&setTimeout(()=>{as(f)})},hs=c=>{for(let l=0;l<c.attributes.length;l++){let f=c.attributes[l].name;["id","type","value","style"].includes(f)||c.removeAttribute(f)}},ni=(c,l)=>{let f=C();if(!f)return;let _=Jr(f,c);if(_){hs(_);for(let R in l)_.setAttribute(R,l[R])}},xt=c=>{if(!c.input)return;let l=ii(c.input);l&&ze(l,c,"input")},ri=(c,l)=>{!c.placeholder&&l.inputPlaceholder&&(c.placeholder=l.inputPlaceholder)},Dn=(c,l,f)=>{if(f.inputLabel){let _=document.createElement("label"),R=y["input-label"];_.setAttribute("for",c.id),_.className=R,typeof f.customClass=="object"&&ee(_,f.customClass.inputLabel),_.innerText=f.inputLabel,l.insertAdjacentElement("beforebegin",_)}},ii=c=>{let l=C();if(l)return Rt(l,y[c]||y.input)},kn=(c,l)=>{["string","number"].includes(typeof l)?c.value=`${l}`:v(l)||N(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof l}"`)},pe={};pe.text=pe.email=pe.password=pe.number=pe.tel=pe.url=pe.search=pe.date=pe["datetime-local"]=pe.time=pe.week=pe.month=(c,l)=>(kn(c,l.inputValue),Dn(c,c,l),ri(c,l),c.type=l.input,c),pe.file=(c,l)=>(Dn(c,c,l),ri(c,l),c),pe.range=(c,l)=>{let f=c.querySelector("input"),_=c.querySelector("output");return kn(f,l.inputValue),f.type=l.input,kn(_,l.inputValue),Dn(f,c,l),c},pe.select=(c,l)=>{if(c.textContent="",l.inputPlaceholder){let f=document.createElement("option");Fe(f,l.inputPlaceholder),f.value="",f.disabled=!0,f.selected=!0,c.appendChild(f)}return Dn(c,c,l),c},pe.radio=c=>(c.textContent="",c),pe.checkbox=(c,l)=>{let f=Jr(C(),"checkbox");f.value="1",f.checked=!!l.inputValue;let _=c.querySelector("span");return Fe(_,l.inputPlaceholder||l.inputLabel),f},pe.textarea=(c,l)=>{kn(c,l.inputValue),ri(c,l),Dn(c,c,l);let f=_=>parseInt(window.getComputedStyle(_).marginLeft)+parseInt(window.getComputedStyle(_).marginRight);return setTimeout(()=>{if("MutationObserver"in window){let _=parseInt(window.getComputedStyle(C()).width),R=()=>{if(!document.body.contains(c))return;let F=c.offsetWidth+f(c);F>_?C().style.width=`${F}px`:yt(C(),"width",l.width)};new MutationObserver(R).observe(c,{attributes:!0,attributeFilter:["style"]})}}),c};let qo=(c,l)=>{let f=is();f&&(Ae(f),ze(f,l,"htmlContainer"),l.html?(wt(l.html,f),ve(f,"block")):l.text?(f.textContent=l.text,ve(f,"block")):Te(f),ti(c,l))},ll=(c,l)=>{let f=xo();f&&(Ae(f),Dt(f,l.footer,"block"),l.footer&&wt(l.footer,f),ze(f,l,"footer"))},si=(c,l)=>{let f=he.innerParams.get(c),_=E();if(_){if(f&&l.icon===f.icon){oi(_,l),ds(_,l);return}if(!l.icon&&!l.iconHtml){Te(_);return}if(l.icon&&Object.keys(x).indexOf(l.icon)===-1){K(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${l.icon}"`),Te(_);return}ve(_),oi(_,l),ds(_,l),ee(_,l.showClass&&l.showClass.icon)}},ds=(c,l)=>{for(let[f,_]of Object.entries(x))l.icon!==f&&rt(c,_);ee(c,l.icon&&x[l.icon]),ul(c,l),fs(),ze(c,l,"icon")},fs=()=>{let c=C();if(!c)return;let l=window.getComputedStyle(c).getPropertyValue("background-color"),f=c.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let _=0;_<f.length;_++)f[_].style.backgroundColor=l},dr=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,Zt=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,oi=(c,l)=>{if(!l.icon&&!l.iconHtml)return;let f=c.innerHTML,_="";l.iconHtml?_=ps(l.iconHtml):l.icon==="success"?(_=dr,f=f.replace(/ style=".*?"/g,"")):l.icon==="error"?_=Zt:l.icon&&(_=ps({question:"?",warning:"!",info:"i"}[l.icon])),f.trim()!==_.trim()&&Fe(c,_)},ul=(c,l)=>{if(l.iconColor){c.style.color=l.iconColor,c.style.borderColor=l.iconColor;for(let f of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Ne(c,f,"background-color",l.iconColor);Ne(c,".swal2-success-ring","border-color",l.iconColor)}},ps=c=>`<div class="${y["icon-content"]}">${c}</div>`,$o=(c,l)=>{let f=In();if(f){if(!l.imageUrl){Te(f);return}ve(f,""),f.setAttribute("src",l.imageUrl),f.setAttribute("alt",l.imageAlt||""),yt(f,"width",l.imageWidth),yt(f,"height",l.imageHeight),f.className=y.image,ze(f,l,"image")}},zo=(c,l)=>{let f=I(),_=C();if(!(!f||!_)){if(l.toast){yt(f,"width",l.width),_.style.width="100%";let R=Tn();R&&_.insertBefore(R,E())}else yt(_,"width",l.width);yt(_,"padding",l.padding),l.color&&(_.style.color=l.color),l.background&&(_.style.background=l.background),Te(En()),ms(_,l)}},ms=(c,l)=>{let f=l.showClass||{};c.className=`${y.popup} ${Ue(c)?f.popup:""}`,l.toast?(ee([document.documentElement,document.body],y["toast-shown"]),ee(c,y.toast)):ee(c,y.modal),ze(c,l,"popup"),typeof l.customClass=="string"&&ee(c,l.customClass),l.icon&&ee(c,y[`icon-${l.icon}`])},gs=(c,l)=>{let f=Xt();if(!f)return;let{progressSteps:_,currentProgressStep:R}=l;if(!_||_.length===0||R===void 0){Te(f);return}ve(f),f.textContent="",R>=_.length&&N("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),_.forEach((F,X)=>{let ce=Go(F);if(f.appendChild(ce),X===R&&ee(ce,y["active-progress-step"]),X!==_.length-1){let ye=Wo(l);f.appendChild(ye)}})},Go=c=>{let l=document.createElement("li");return ee(l,y["progress-step"]),Fe(l,c),l},Wo=c=>{let l=document.createElement("li");return ee(l,y["progress-step-line"]),c.progressStepsDistance&&yt(l,"width",c.progressStepsDistance),l},hl=(c,l)=>{let f=vn();f&&(Ae(f),Dt(f,l.title||l.titleText,"block"),l.title&&wt(l.title,f),l.titleText&&(f.innerText=l.titleText),ze(f,l,"title"))},Ho=(c,l)=>{zo(c,l),hr(c,l),gs(c,l),si(c,l),$o(c,l),hl(c,l),ur(c,l),qo(c,l),lr(c,l),ll(c,l);let f=C();typeof l.didRender=="function"&&f&&l.didRender(f),a.eventEmitter.emit("didRender",f)},Ko=()=>Ue(C()),ys=()=>{var c;return(c=tt())===null||c===void 0?void 0:c.click()},dl=()=>{var c;return(c=$e())===null||c===void 0?void 0:c.click()},en=()=>{var c;return(c=bn())===null||c===void 0?void 0:c.click()},Ge=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),fr=c=>{c.keydownTarget&&c.keydownHandlerAdded&&(c.keydownTarget.removeEventListener("keydown",c.keydownHandler,{capture:c.keydownListenerCapture}),c.keydownHandlerAdded=!1)},ai=(c,l,f)=>{fr(c),l.toast||(c.keydownHandler=_=>pr(l,_,f),c.keydownTarget=l.keydownListenerCapture?window:C(),c.keydownListenerCapture=l.keydownListenerCapture,c.keydownTarget.addEventListener("keydown",c.keydownHandler,{capture:c.keydownListenerCapture}),c.keydownHandlerAdded=!0)},ci=(c,l)=>{var f;let _=An();if(_.length){c=c+l,c===_.length?c=0:c===-1&&(c=_.length-1),_[c].focus();return}(f=C())===null||f===void 0||f.focus()},de=["ArrowRight","ArrowDown"],li=["ArrowLeft","ArrowUp"],pr=(c,l,f)=>{c&&(l.isComposing||l.keyCode===229||(c.stopKeydownPropagation&&l.stopPropagation(),l.key==="Enter"?mr(l,c):l.key==="Tab"?fl(l):[...de,...li].includes(l.key)?Qo(l.key):l.key==="Escape"&&pl(l,c,f)))},mr=(c,l)=>{if(!be(l.allowEnterKey))return;let f=Jr(C(),l.input);if(c.target&&f&&c.target instanceof HTMLElement&&c.target.outerHTML===f.outerHTML){if(["textarea","file"].includes(l.input))return;ys(),c.preventDefault()}},fl=c=>{let l=c.target,f=An(),_=-1;for(let R=0;R<f.length;R++)if(l===f[R]){_=R;break}c.shiftKey?ci(_,-1):ci(_,1),c.stopPropagation(),c.preventDefault()},Qo=c=>{let l=gt(),f=tt(),_=$e(),R=bn();if(!l||!f||!_||!R)return;let F=[f,_,R];if(document.activeElement instanceof HTMLElement&&!F.includes(document.activeElement))return;let X=de.includes(c)?"nextElementSibling":"previousElementSibling",ce=document.activeElement;if(ce){for(let ye=0;ye<l.children.length;ye++){if(ce=ce[X],!ce)return;if(ce instanceof HTMLButtonElement&&Ue(ce))break}ce instanceof HTMLButtonElement&&ce.focus()}},pl=(c,l,f)=>{be(l.allowEscapeKey)&&(c.preventDefault(),f(Ge.esc))};var xn={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};let ml=()=>{let c=I();Array.from(document.body.children).forEach(f=>{f.contains(c)||(f.hasAttribute("aria-hidden")&&f.setAttribute("data-previous-aria-hidden",f.getAttribute("aria-hidden")||""),f.setAttribute("aria-hidden","true"))})},Jo=()=>{Array.from(document.body.children).forEach(l=>{l.hasAttribute("data-previous-aria-hidden")?(l.setAttribute("aria-hidden",l.getAttribute("data-previous-aria-hidden")||""),l.removeAttribute("data-previous-aria-hidden")):l.removeAttribute("aria-hidden")})},Vn=typeof window<"u"&&!!window.GestureEvent,Vt=()=>{if(Vn&&!nt(document.body,y.iosfix)){let c=document.body.scrollTop;document.body.style.top=`${c*-1}px`,ee(document.body,y.iosfix),Yo()}},Yo=()=>{let c=I();if(!c)return;let l;c.ontouchstart=f=>{l=Xo(f)},c.ontouchmove=f=>{l&&(f.preventDefault(),f.stopPropagation())}},Xo=c=>{let l=c.target,f=I(),_=is();return!f||!_||Zo(c)||Nn(c)?!1:l===f||!Oo(f)&&l instanceof HTMLElement&&l.tagName!=="INPUT"&&l.tagName!=="TEXTAREA"&&!(Oo(_)&&_.contains(l))},Zo=c=>c.touches&&c.touches.length&&c.touches[0].touchType==="stylus",Nn=c=>c.touches&&c.touches.length>1,gl=()=>{if(nt(document.body,y.iosfix)){let c=parseInt(document.body.style.top,10);rt(document.body,y.iosfix),document.body.style.top="",document.body.scrollTop=c*-1}},yl=()=>{let c=document.createElement("div");c.className=y["scrollbar-measure"],document.body.appendChild(c);let l=c.getBoundingClientRect().width-c.clientWidth;return document.body.removeChild(c),l},On=null,Nt=c=>{On===null&&(document.body.scrollHeight>window.innerHeight||c==="scroll")&&(On=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${On+yl()}px`)},_l=()=>{On!==null&&(document.body.style.paddingRight=`${On}px`,On=null)};function ea(c,l,f,_){Sn()?ra(c,_):(p(f).then(()=>ra(c,_)),fr(a)),Vn?(l.setAttribute("style","display:none !important"),l.removeAttribute("class"),l.innerHTML=""):l.remove(),Cn()&&(_l(),gl(),Jo()),gr()}function gr(){rt([document.documentElement,document.body],[y.shown,y["height-auto"],y["no-backdrop"],y["toast-shown"]])}function it(c){c=na(c);let l=xn.swalPromiseResolve.get(this),f=ta(this);this.isAwaitingPromise?c.isDismissed||(vt(this),l(c)):f&&l(c)}let ta=c=>{let l=C();if(!l)return!1;let f=he.innerParams.get(c);if(!f||nt(l,f.hideClass.popup))return!1;rt(l,f.showClass.popup),ee(l,f.hideClass.popup);let _=I();return rt(_,f.showClass.backdrop),ee(_,f.hideClass.backdrop),_s(c,l,f),!0};function Mn(c){let l=xn.swalPromiseReject.get(this);vt(this),l&&l(c)}let vt=c=>{c.isAwaitingPromise&&(delete c.isAwaitingPromise,he.innerParams.get(c)||c._destroy())},na=c=>typeof c>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},c),_s=(c,l,f)=>{let _=I(),R=kt&&Pn(l);typeof f.willClose=="function"&&f.willClose(l),a.eventEmitter.emit("willClose",l),R?me(c,l,_,f.returnFocus,f.didClose):ea(c,_,f.returnFocus,f.didClose)},me=(c,l,f,_,R)=>{kt&&(a.swalCloseEventFinishedCallback=ea.bind(null,c,f,_,R),l.addEventListener(kt,function(F){F.target===l&&(a.swalCloseEventFinishedCallback(),delete a.swalCloseEventFinishedCallback)}))},ra=(c,l)=>{setTimeout(()=>{typeof l=="function"&&l.bind(c.params)(),a.eventEmitter.emit("didClose"),c._destroy&&c._destroy()})},Ln=c=>{let l=C();if(l||new pa,l=C(),!l)return;let f=Tn();Sn()?Te(E()):ia(l,c),ve(f),l.setAttribute("data-loading","true"),l.setAttribute("aria-busy","true"),l.focus()},ia=(c,l)=>{let f=gt(),_=Tn();!f||!_||(!l&&Ue(tt())&&(l=tt()),ve(f),l&&(Te(l),_.setAttribute("data-button-to-replace",l.className),f.insertBefore(_,l)),ee([c,f],y.loading))},sa=(c,l)=>{l.input==="select"||l.input==="radio"?ca(c,l):["text","email","number","tel","textarea"].some(f=>f===l.input)&&(se(l.inputValue)||v(l.inputValue))&&(Ln(tt()),wl(c,l))},oa=(c,l)=>{let f=c.getInput();if(!f)return null;switch(l.input){case"checkbox":return ui(f);case"radio":return aa(f);case"file":return It(f);default:return l.inputAutoTrim?f.value.trim():f.value}},ui=c=>c.checked?1:0,aa=c=>c.checked?c.value:null,It=c=>c.files&&c.files.length?c.getAttribute("multiple")!==null?c.files:c.files[0]:null,ca=(c,l)=>{let f=C();if(!f)return;let _=R=>{l.input==="select"?yr(f,Fn(R),l):l.input==="radio"&&la(f,Fn(R),l)};se(l.inputOptions)||v(l.inputOptions)?(Ln(tt()),S(l.inputOptions).then(R=>{c.hideLoading(),_(R)})):typeof l.inputOptions=="object"?_(l.inputOptions):K(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof l.inputOptions}`)},wl=(c,l)=>{let f=c.getInput();f&&(Te(f),S(l.inputValue).then(_=>{f.value=l.input==="number"?`${parseFloat(_)||0}`:`${_}`,ve(f),f.focus(),c.hideLoading()}).catch(_=>{K(`Error in inputValue promise: ${_}`),f.value="",ve(f),f.focus(),c.hideLoading()}))};function yr(c,l,f){let _=Rt(c,y.select);if(!_)return;let R=(F,X,ce)=>{let ye=document.createElement("option");ye.value=ce,Fe(ye,X),ye.selected=_r(ce,f.inputValue),F.appendChild(ye)};l.forEach(F=>{let X=F[0],ce=F[1];if(Array.isArray(ce)){let ye=document.createElement("optgroup");ye.label=X,ye.disabled=!1,_.appendChild(ye),ce.forEach(gi=>R(ye,gi[1],gi[0]))}else R(_,ce,X)}),_.focus()}function la(c,l,f){let _=Rt(c,y.radio);if(!_)return;l.forEach(F=>{let X=F[0],ce=F[1],ye=document.createElement("input"),gi=document.createElement("label");ye.type="radio",ye.name=y.radio,ye.value=X,_r(X,f.inputValue)&&(ye.checked=!0);let El=document.createElement("span");Fe(El,ce),El.className=y.label,gi.appendChild(ye),gi.appendChild(El),_.appendChild(gi)});let R=_.querySelectorAll("input");R.length&&R[0].focus()}let Fn=c=>{let l=[];return c instanceof Map?c.forEach((f,_)=>{let R=f;typeof R=="object"&&(R=Fn(R)),l.push([_,R])}):Object.keys(c).forEach(f=>{let _=c[f];typeof _=="object"&&(_=Fn(_)),l.push([f,_])}),l},_r=(c,l)=>!!l&&l.toString()===c.toString(),ua=c=>{let l=he.innerParams.get(c);c.disableButtons(),l.input?ws(c,"confirm"):vr(c,!0)},hi=c=>{let l=he.innerParams.get(c);c.disableButtons(),l.returnInputValueOnDeny?ws(c,"deny"):di(c,!1)},vl=(c,l)=>{c.disableButtons(),l(Ge.cancel)},ws=(c,l)=>{let f=he.innerParams.get(c);if(!f.input){K(`The "input" parameter is needed to be set when using returnInputValueOn${B(l)}`);return}let _=c.getInput(),R=oa(c,f);f.inputValidator?wr(c,R,l):_&&!_.checkValidity()?(c.enableButtons(),c.showValidationMessage(f.validationMessage||_.validationMessage)):l==="deny"?di(c,R):vr(c,R)},wr=(c,l,f)=>{let _=he.innerParams.get(c);c.disableInput(),Promise.resolve().then(()=>S(_.inputValidator(l,_.validationMessage))).then(F=>{c.enableButtons(),c.enableInput(),F?c.showValidationMessage(F):f==="deny"?di(c,l):vr(c,l)})},di=(c,l)=>{let f=he.innerParams.get(c||void 0);f.showLoaderOnDeny&&Ln($e()),f.preDeny?(c.isAwaitingPromise=!0,Promise.resolve().then(()=>S(f.preDeny(l,f.validationMessage))).then(R=>{R===!1?(c.hideLoading(),vt(c)):c.close({isDenied:!0,value:typeof R>"u"?l:R})}).catch(R=>fi(c||void 0,R))):c.close({isDenied:!0,value:l})},vs=(c,l)=>{c.close({isConfirmed:!0,value:l})},fi=(c,l)=>{c.rejectPromise(l)},vr=(c,l)=>{let f=he.innerParams.get(c||void 0);f.showLoaderOnConfirm&&Ln(),f.preConfirm?(c.resetValidationMessage(),c.isAwaitingPromise=!0,Promise.resolve().then(()=>S(f.preConfirm(l,f.validationMessage))).then(R=>{Ue(En())||R===!1?(c.hideLoading(),vt(c)):vs(c,typeof R>"u"?l:R)}).catch(R=>fi(c||void 0,R))):vs(c,l)};function Ir(){let c=he.innerParams.get(this);if(!c)return;let l=he.domCache.get(this);Te(l.loader),Sn()?c.icon&&ve(E()):pi(l),rt([l.popup,l.actions],y.loading),l.popup.removeAttribute("aria-busy"),l.popup.removeAttribute("data-loading"),l.confirmButton.disabled=!1,l.denyButton.disabled=!1,l.cancelButton.disabled=!1}let pi=c=>{let l=c.popup.getElementsByClassName(c.loader.getAttribute("data-button-to-replace"));l.length?ve(l[0],"inline-block"):No()&&Te(c.actions)};function Is(){let c=he.innerParams.get(this),l=he.domCache.get(this);return l?Jr(l.popup,c.input):null}function Es(c,l,f){let _=he.domCache.get(c);l.forEach(R=>{_[R].disabled=f})}function Ot(c,l){let f=C();if(!(!f||!c))if(c.type==="radio"){let _=f.querySelectorAll(`[name="${y.radio}"]`);for(let R=0;R<_.length;R++)_[R].disabled=l}else c.disabled=l}function bs(){Es(this,["confirmButton","denyButton","cancelButton"],!1)}function Ts(){Es(this,["confirmButton","denyButton","cancelButton"],!0)}function As(){Ot(this.getInput(),!1)}function Cs(){Ot(this.getInput(),!0)}function Er(c){let l=he.domCache.get(this),f=he.innerParams.get(this);Fe(l.validationMessage,c),l.validationMessage.className=y["validation-message"],f.customClass&&f.customClass.validationMessage&&ee(l.validationMessage,f.customClass.validationMessage),ve(l.validationMessage);let _=this.getInput();_&&(_.setAttribute("aria-invalid","true"),_.setAttribute("aria-describedby",y["validation-message"]),as(_),ee(_,y.inputerror))}function We(){let c=he.domCache.get(this);c.validationMessage&&Te(c.validationMessage);let l=this.getInput();l&&(l.removeAttribute("aria-invalid"),l.removeAttribute("aria-describedby"),rt(l,y.inputerror))}let tn={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},ha=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],Un={allowEnterKey:void 0},o=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],u=c=>Object.prototype.hasOwnProperty.call(tn,c),d=c=>ha.indexOf(c)!==-1,g=c=>Un[c],P=c=>{u(c)||N(`Unknown parameter "${c}"`)},D=c=>{o.includes(c)&&N(`The parameter "${c}" is incompatible with toasts`)},M=c=>{let l=g(c);l&&ue(c,l)},le=c=>{c.backdrop===!1&&c.allowOutsideClick&&N('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(let l in c)P(l),c.toast&&D(l),M(l)};function Ce(c){let l=C(),f=he.innerParams.get(this);if(!l||nt(l,f.hideClass.popup)){N("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}let _=re(c),R=Object.assign({},f,_);Ho(this,R),he.innerParams.set(this,R),Object.defineProperties(this,{params:{value:Object.assign({},this.params,c),writable:!1,enumerable:!0}})}let re=c=>{let l={};return Object.keys(c).forEach(f=>{d(f)?l[f]=c[f]:N(`Invalid parameter to update: ${f}`)}),l};function xe(){let c=he.domCache.get(this),l=he.innerParams.get(this);if(!l){nn(this);return}c.popup&&a.swalCloseEventFinishedCallback&&(a.swalCloseEventFinishedCallback(),delete a.swalCloseEventFinishedCallback),typeof l.didDestroy=="function"&&l.didDestroy(),a.eventEmitter.emit("didDestroy"),Oe(this)}let Oe=c=>{nn(c),delete c.params,delete a.keydownHandler,delete a.keydownTarget,delete a.currentInstance},nn=c=>{c.isAwaitingPromise?(Ye(he,c),c.isAwaitingPromise=!0):(Ye(xn,c),Ye(he,c),delete c.isAwaitingPromise,delete c.disableButtons,delete c.enableButtons,delete c.getInput,delete c.disableInput,delete c.enableInput,delete c.hideLoading,delete c.disableLoading,delete c.showValidationMessage,delete c.resetValidationMessage,delete c.close,delete c.closePopup,delete c.closeModal,delete c.closeToast,delete c.rejectPromise,delete c.update,delete c._destroy)},Ye=(c,l)=>{for(let f in c)c[f].delete(l)};var mi=Object.freeze({__proto__:null,_destroy:xe,close:it,closeModal:it,closePopup:it,closeToast:it,disableButtons:Ts,disableInput:Cs,disableLoading:Ir,enableButtons:bs,enableInput:As,getInput:Is,handleAwaitingPromise:vt,hideLoading:Ir,rejectPromise:Mn,resetValidationMessage:We,showValidationMessage:Er,update:Ce});let Ss=(c,l,f)=>{c.toast?Xy(c,l,f):(e_(l),t_(l),n_(c,l,f))},Xy=(c,l,f)=>{l.popup.onclick=()=>{c&&(Zy(c)||c.timer||c.input)||f(Ge.close)}},Zy=c=>!!(c.showConfirmButton||c.showDenyButton||c.showCancelButton||c.showCloseButton),da=!1,e_=c=>{c.popup.onmousedown=()=>{c.container.onmouseup=function(l){c.container.onmouseup=()=>{},l.target===c.container&&(da=!0)}}},t_=c=>{c.container.onmousedown=l=>{l.target===c.container&&l.preventDefault(),c.popup.onmouseup=function(f){c.popup.onmouseup=()=>{},(f.target===c.popup||f.target instanceof HTMLElement&&c.popup.contains(f.target))&&(da=!0)}}},n_=(c,l,f)=>{l.container.onclick=_=>{if(da){da=!1;return}_.target===l.container&&be(c.allowOutsideClick)&&f(Ge.backdrop)}},r_=c=>typeof c=="object"&&c.jquery,mf=c=>c instanceof Element||r_(c),i_=c=>{let l={};return typeof c[0]=="object"&&!mf(c[0])?Object.assign(l,c[0]):["title","html","icon"].forEach((f,_)=>{let R=c[_];typeof R=="string"||mf(R)?l[f]=R:R!==void 0&&K(`Unexpected type of ${f}! Expected "string" or "Element", got ${typeof R}`)}),l};function s_(){for(var c=arguments.length,l=new Array(c),f=0;f<c;f++)l[f]=arguments[f];return new this(...l)}function o_(c){class l extends this{_main(_,R){return super._main(_,Object.assign({},c,R))}}return l}let a_=()=>a.timeout&&a.timeout.getTimerLeft(),gf=()=>{if(a.timeout)return Mo(),a.timeout.stop()},yf=()=>{if(a.timeout){let c=a.timeout.start();return Yr(c),c}},c_=()=>{let c=a.timeout;return c&&(c.running?gf():yf())},l_=c=>{if(a.timeout){let l=a.timeout.increase(c);return Yr(l,!0),l}},u_=()=>!!(a.timeout&&a.timeout.isRunning()),_f=!1,Il={};function h_(){let c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";Il[c]=this,_f||(document.body.addEventListener("click",d_),_f=!0)}let d_=c=>{for(let l=c.target;l&&l!==document;l=l.parentNode)for(let f in Il){let _=l.getAttribute(f);if(_){Il[f].fire({template:_});return}}};class f_{constructor(){this.events={}}_getHandlersByEventName(l){return typeof this.events[l]>"u"&&(this.events[l]=[]),this.events[l]}on(l,f){let _=this._getHandlersByEventName(l);_.includes(f)||_.push(f)}once(l,f){var _=this;let R=function(){_.removeListener(l,R);for(var F=arguments.length,X=new Array(F),ce=0;ce<F;ce++)X[ce]=arguments[ce];f.apply(_,X)};this.on(l,R)}emit(l){for(var f=arguments.length,_=new Array(f>1?f-1:0),R=1;R<f;R++)_[R-1]=arguments[R];this._getHandlersByEventName(l).forEach(F=>{try{F.apply(this,_)}catch(X){console.error(X)}})}removeListener(l,f){let _=this._getHandlersByEventName(l),R=_.indexOf(f);R>-1&&_.splice(R,1)}removeAllListeners(l){this.events[l]!==void 0&&(this.events[l].length=0)}reset(){this.events={}}}a.eventEmitter=new f_;var p_=Object.freeze({__proto__:null,argsToParams:i_,bindClickHandler:h_,clickCancel:en,clickConfirm:ys,clickDeny:dl,enableLoading:Ln,fire:s_,getActions:gt,getCancelButton:bn,getCloseButton:ss,getConfirmButton:tt,getContainer:I,getDenyButton:$e,getFocusableElements:An,getFooter:xo,getHtmlContainer:is,getIcon:E,getIconContent:mt,getImage:In,getInputLabel:Ve,getLoader:Tn,getPopup:C,getProgressSteps:Xt,getTimerLeft:a_,getTimerProgressBar:Pt,getTitle:vn,getValidationMessage:En,increaseTimer:l_,isDeprecatedParameter:g,isLoading:os,isTimerRunning:u_,isUpdatableParameter:d,isValidParameter:u,isVisible:Ko,mixin:o_,off:(c,l)=>{if(!c){a.eventEmitter.reset();return}l?a.eventEmitter.removeListener(c,l):a.eventEmitter.removeAllListeners(c)},on:(c,l)=>{a.eventEmitter.on(c,l)},once:(c,l)=>{a.eventEmitter.once(c,l)},resumeTimer:yf,showLoading:Ln,stopTimer:gf,toggleTimer:c_});class m_{constructor(l,f){this.callback=l,this.remaining=f,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(l){let f=this.running;return f&&this.stop(),this.remaining+=l,f&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}let wf=["swal-title","swal-html","swal-footer"],g_=c=>{let l=typeof c.template=="string"?document.querySelector(c.template):c.template;if(!l)return{};let f=l.content;return T_(f),Object.assign(y_(f),__(f),w_(f),v_(f),I_(f),E_(f),b_(f,wf))},y_=c=>{let l={};return Array.from(c.querySelectorAll("swal-param")).forEach(_=>{br(_,["name","value"]);let R=_.getAttribute("name"),F=_.getAttribute("value");!R||!F||(typeof tn[R]=="boolean"?l[R]=F!=="false":typeof tn[R]=="object"?l[R]=JSON.parse(F):l[R]=F)}),l},__=c=>{let l={};return Array.from(c.querySelectorAll("swal-function-param")).forEach(_=>{let R=_.getAttribute("name"),F=_.getAttribute("value");!R||!F||(l[R]=new Function(`return ${F}`)())}),l},w_=c=>{let l={};return Array.from(c.querySelectorAll("swal-button")).forEach(_=>{br(_,["type","color","aria-label"]);let R=_.getAttribute("type");!R||!["confirm","cancel","deny"].includes(R)||(l[`${R}ButtonText`]=_.innerHTML,l[`show${B(R)}Button`]=!0,_.hasAttribute("color")&&(l[`${R}ButtonColor`]=_.getAttribute("color")),_.hasAttribute("aria-label")&&(l[`${R}ButtonAriaLabel`]=_.getAttribute("aria-label")))}),l},v_=c=>{let l={},f=c.querySelector("swal-image");return f&&(br(f,["src","width","height","alt"]),f.hasAttribute("src")&&(l.imageUrl=f.getAttribute("src")||void 0),f.hasAttribute("width")&&(l.imageWidth=f.getAttribute("width")||void 0),f.hasAttribute("height")&&(l.imageHeight=f.getAttribute("height")||void 0),f.hasAttribute("alt")&&(l.imageAlt=f.getAttribute("alt")||void 0)),l},I_=c=>{let l={},f=c.querySelector("swal-icon");return f&&(br(f,["type","color"]),f.hasAttribute("type")&&(l.icon=f.getAttribute("type")),f.hasAttribute("color")&&(l.iconColor=f.getAttribute("color")),l.iconHtml=f.innerHTML),l},E_=c=>{let l={},f=c.querySelector("swal-input");f&&(br(f,["type","label","placeholder","value"]),l.input=f.getAttribute("type")||"text",f.hasAttribute("label")&&(l.inputLabel=f.getAttribute("label")),f.hasAttribute("placeholder")&&(l.inputPlaceholder=f.getAttribute("placeholder")),f.hasAttribute("value")&&(l.inputValue=f.getAttribute("value")));let _=Array.from(c.querySelectorAll("swal-input-option"));return _.length&&(l.inputOptions={},_.forEach(R=>{br(R,["value"]);let F=R.getAttribute("value");if(!F)return;let X=R.innerHTML;l.inputOptions[F]=X})),l},b_=(c,l)=>{let f={};for(let _ in l){let R=l[_],F=c.querySelector(R);F&&(br(F,[]),f[R.replace(/^swal-/,"")]=F.innerHTML.trim())}return f},T_=c=>{let l=wf.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(c.children).forEach(f=>{let _=f.tagName.toLowerCase();l.includes(_)||N(`Unrecognized element <${_}>`)})},br=(c,l)=>{Array.from(c.attributes).forEach(f=>{l.indexOf(f.name)===-1&&N([`Unrecognized attribute "${f.name}" on <${c.tagName.toLowerCase()}>.`,`${l.length?`Allowed attributes are: ${l.join(", ")}`:"To set the value, use HTML within the element."}`])})},vf=10,A_=c=>{let l=I(),f=C();typeof c.willOpen=="function"&&c.willOpen(f),a.eventEmitter.emit("willOpen",f);let R=window.getComputedStyle(document.body).overflowY;P_(l,f,c),setTimeout(()=>{C_(l,f)},vf),Cn()&&(S_(l,c.scrollbarPadding,R),ml()),!Sn()&&!a.previousActiveElement&&(a.previousActiveElement=document.activeElement),typeof c.didOpen=="function"&&setTimeout(()=>c.didOpen(f)),a.eventEmitter.emit("didOpen",f),rt(l,y["no-transition"])},If=c=>{let l=C();if(c.target!==l||!kt)return;let f=I();l.removeEventListener(kt,If),f.style.overflowY="auto"},C_=(c,l)=>{kt&&Pn(l)?(c.style.overflowY="hidden",l.addEventListener(kt,If)):c.style.overflowY="auto"},S_=(c,l,f)=>{Vt(),l&&f!=="hidden"&&Nt(f),setTimeout(()=>{c.scrollTop=0})},P_=(c,l,f)=>{ee(c,f.showClass.backdrop),f.animation?(l.style.setProperty("opacity","0","important"),ve(l,"grid"),setTimeout(()=>{ee(l,f.showClass.popup),l.style.removeProperty("opacity")},vf)):ve(l,"grid"),ee([document.documentElement,document.body],y.shown),f.heightAuto&&f.backdrop&&!f.toast&&ee([document.documentElement,document.body],y["height-auto"])};var Ef={email:(c,l)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(c)?Promise.resolve():Promise.resolve(l||"Invalid email address"),url:(c,l)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(c)?Promise.resolve():Promise.resolve(l||"Invalid URL")};function R_(c){c.inputValidator||(c.input==="email"&&(c.inputValidator=Ef.email),c.input==="url"&&(c.inputValidator=Ef.url))}function D_(c){(!c.target||typeof c.target=="string"&&!document.querySelector(c.target)||typeof c.target!="string"&&!c.target.appendChild)&&(N('Target parameter is not valid, defaulting to "body"'),c.target="body")}function k_(c){R_(c),c.showLoaderOnConfirm&&!c.preConfirm&&N(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),D_(c),typeof c.title=="string"&&(c.title=c.title.split(`
`).join("<br />")),us(c)}let Mt;var fa=new WeakMap;class Ee{constructor(){if(r(this,fa,void 0),typeof window>"u")return;Mt=this;for(var l=arguments.length,f=new Array(l),_=0;_<l;_++)f[_]=arguments[_];let R=Object.freeze(this.constructor.argsToParams(f));this.params=R,this.isAwaitingPromise=!1,i(fa,this,this._main(Mt.params))}_main(l){let f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(le(Object.assign({},f,l)),a.currentInstance){let F=xn.swalPromiseResolve.get(a.currentInstance),{isAwaitingPromise:X}=a.currentInstance;a.currentInstance._destroy(),X||F({isDismissed:!0}),Cn()&&Jo()}a.currentInstance=Mt;let _=V_(l,f);k_(_),Object.freeze(_),a.timeout&&(a.timeout.stop(),delete a.timeout),clearTimeout(a.restoreFocusTimeout);let R=N_(Mt);return Ho(Mt,_),he.innerParams.set(Mt,_),x_(Mt,R,_)}then(l){return t(fa,this).then(l)}finally(l){return t(fa,this).finally(l)}}let x_=(c,l,f)=>new Promise((_,R)=>{let F=X=>{c.close({isDismissed:!0,dismiss:X})};xn.swalPromiseResolve.set(c,_),xn.swalPromiseReject.set(c,R),l.confirmButton.onclick=()=>{ua(c)},l.denyButton.onclick=()=>{hi(c)},l.cancelButton.onclick=()=>{vl(c,F)},l.closeButton.onclick=()=>{F(Ge.close)},Ss(f,l,F),ai(a,f,F),sa(c,f),A_(f),O_(a,f,F),M_(l,f),setTimeout(()=>{l.container.scrollTop=0})}),V_=(c,l)=>{let f=g_(c),_=Object.assign({},tn,l,f,c);return _.showClass=Object.assign({},tn.showClass,_.showClass),_.hideClass=Object.assign({},tn.hideClass,_.hideClass),_.animation===!1&&(_.showClass={backdrop:"swal2-noanimation"},_.hideClass={}),_},N_=c=>{let l={popup:C(),container:I(),actions:gt(),confirmButton:tt(),denyButton:$e(),cancelButton:bn(),loader:Tn(),closeButton:ss(),validationMessage:En(),progressSteps:Xt()};return he.domCache.set(c,l),l},O_=(c,l,f)=>{let _=Pt();Te(_),l.timer&&(c.timeout=new m_(()=>{f("timer"),delete c.timeout},l.timer),l.timerProgressBar&&(ve(_),ze(_,l,"timerProgressBar"),setTimeout(()=>{c.timeout&&c.timeout.running&&Yr(l.timer)})))},M_=(c,l)=>{if(!l.toast){if(!be(l.allowEnterKey)){ue("allowEnterKey"),U_();return}L_(c)||F_(c,l)||ci(-1,1)}},L_=c=>{let l=c.popup.querySelectorAll("[autofocus]");for(let f of l)if(f instanceof HTMLElement&&Ue(f))return f.focus(),!0;return!1},F_=(c,l)=>l.focusDeny&&Ue(c.denyButton)?(c.denyButton.focus(),!0):l.focusCancel&&Ue(c.cancelButton)?(c.cancelButton.focus(),!0):l.focusConfirm&&Ue(c.confirmButton)?(c.confirmButton.focus(),!0):!1,U_=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){let c=new Date,l=localStorage.getItem("swal-initiation");l?(c.getTime()-Date.parse(l))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";let f=document.createElement("audio");f.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",f.loop=!0,document.body.appendChild(f),setTimeout(()=>{f.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${c}`)}Ee.prototype.disableButtons=Ts,Ee.prototype.enableButtons=bs,Ee.prototype.getInput=Is,Ee.prototype.disableInput=Cs,Ee.prototype.enableInput=As,Ee.prototype.hideLoading=Ir,Ee.prototype.disableLoading=Ir,Ee.prototype.showValidationMessage=Er,Ee.prototype.resetValidationMessage=We,Ee.prototype.close=it,Ee.prototype.closePopup=it,Ee.prototype.closeModal=it,Ee.prototype.closeToast=it,Ee.prototype.rejectPromise=Mn,Ee.prototype.update=Ce,Ee.prototype._destroy=xe,Object.assign(Ee,p_),Object.keys(mi).forEach(c=>{Ee[c]=function(){return Mt&&Mt[c]?Mt[c](...arguments):null}}),Ee.DismissReason=Ge,Ee.version="11.14.0";let pa=Ee;return pa.default=pa,pa});typeof qt<"u"&&qt.Sweetalert2&&(qt.swal=qt.sweetAlert=qt.Swal=qt.SweetAlert=qt.Sweetalert2);typeof document<"u"&&function(n,e){var t=n.createElement("style");if(n.getElementsByTagName("head")[0].appendChild(t),t.styleSheet)t.styleSheet.disabled||(t.styleSheet.cssText=e);else try{t.innerHTML=e}catch{t.innerText=e}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}')});var Xf=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(oe(Dl),oe(Rl))},e.\u0275dir=Et({type:e});let n=e;return n})(),j_=(()=>{let e=class e extends Xf{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Pl(e)))(s||e)}})(),e.\u0275dir=Et({type:e,features:[qn]});let n=e;return n})(),Zf=new lt("");var q_={provide:Zf,useExisting:Ds(()=>Hn),multi:!0};function $_(){let n=Ol()?Ol().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var z_=new lt(""),Hn=(()=>{let e=class e extends Xf{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!$_())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(oe(Dl),oe(Rl),oe(z_,8))},e.\u0275dir=Et({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&_e("input",function(h){return s._handleInput(h.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(h){return s._compositionEnd(h.target.value)})},features:[xs([q_]),qn]});let n=e;return n})();function G_(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var Ll=new lt(""),ep=new lt("");function W_(n){return G_(n.value)?{required:!0}:null}function zf(n){return null}function tp(n){return n!=null}function np(n){return Nf(n)?Cl(n):n}function rp(n){let e={};return n.forEach(t=>{e=t!=null?He(He({},e),t):e}),Object.keys(e).length===0?null:e}function ip(n,e){return e.map(t=>t(n))}function H_(n){return!n.validate}function sp(n){return n.map(e=>H_(e)?e:t=>e.validate(t))}function K_(n){if(!n)return null;let e=n.filter(tp);return e.length==0?null:function(t){return rp(ip(t,e))}}function Fl(n){return n!=null?K_(sp(n)):null}function Q_(n){if(!n)return null;let e=n.filter(tp);return e.length==0?null:function(t){let r=ip(t,e).map(np);return Cf(r).pipe(Rs(rp))}}function Ul(n){return n!=null?Q_(sp(n)):null}function Gf(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function J_(n){return n._rawValidators}function Y_(n){return n._rawAsyncValidators}function Ml(n){return n?Array.isArray(n)?n:[n]:[]}function Ea(n,e){return Array.isArray(n)?n.includes(e):n===e}function Wf(n,e){let t=Ml(e);return Ml(n).forEach(i=>{Ea(t,i)||t.push(i)}),t}function Hf(n,e){return Ml(e).filter(t=>!Ea(n,t))}var ba=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Fl(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ul(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ei=class extends ba{get formDirective(){return null}get path(){return null}},Us=class extends ba{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Ta=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},X_={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},qT=ct(He({},X_),{"[class.ng-submitted]":"isSubmitted"}),Ti=(()=>{let e=class e extends Ta{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(oe(Us,2))},e.\u0275dir=Et({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&kl("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[qn]});let n=e;return n})(),Pa=(()=>{let e=class e extends Ta{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(oe(Ei,10))},e.\u0275dir=Et({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&kl("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[qn]});let n=e;return n})();var Ns="VALID",Ia="INVALID",vi="PENDING",Os="DISABLED",bi=class{},Aa=class extends bi{constructor(e,t){super(),this.value=e,this.source=t}},Ls=class extends bi{constructor(e,t){super(),this.pristine=e,this.source=t}},Fs=class extends bi{constructor(e,t){super(),this.touched=e,this.source=t}},Ii=class extends bi{constructor(e,t){super(),this.status=e,this.source=t}};function op(n){return(Ra(n)?n.validators:n)||null}function Z_(n){return Array.isArray(n)?Fl(n):n||null}function ap(n,e){return(Ra(e)?e.asyncValidators:n)||null}function ew(n){return Array.isArray(n)?Ul(n):n||null}function Ra(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function tw(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new ya(1e3,"");if(!r[t])throw new ya(1001,"")}function nw(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new ya(1002,"")})}var Ca=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Vs(()=>this.statusReactive()),this.statusReactive=ks(void 0),this._pristine=Vs(()=>this.pristineReactive()),this.pristineReactive=ks(!0),this._touched=Vs(()=>this.touchedReactive()),this.touchedReactive=ks(!1),this._events=new bf,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Wn(this.statusReactive)}set status(e){Wn(()=>this.statusReactive.set(e))}get valid(){return this.status===Ns}get invalid(){return this.status===Ia}get pending(){return this.status==vi}get disabled(){return this.status===Os}get enabled(){return this.status!==Os}get pristine(){return Wn(this.pristineReactive)}set pristine(e){Wn(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Wn(this.touchedReactive)}set touched(e){Wn(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Wf(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Wf(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Hf(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Hf(e,this._rawAsyncValidators))}hasValidator(e){return Ea(this._rawValidators,e)}hasAsyncValidator(e){return Ea(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(ct(He({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Fs(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new Fs(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(ct(He({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Ls(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Ls(!0,r))}markAsPending(e={}){this.status=vi;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ii(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(ct(He({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Os,this.errors=null,this._forEachChild(i=>{i.disable(ct(He({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Aa(this.value,r)),this._events.next(new Ii(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(ct(He({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ns,this._forEachChild(r=>{r.enable(ct(He({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(ct(He({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ns||this.status===vi)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Aa(this.value,t)),this._events.next(new Ii(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(ct(He({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Os:Ns}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=vi,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=np(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Ii(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Ar,this.statusChanges=new Ar}_calculateStatus(){return this._allControlsDisabled()?Os:this.errors?Ia:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(vi)?vi:this._anyControlsHaveStatus(Ia)?Ia:Ns}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Ls(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new Fs(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ra(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Z_(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=ew(this._rawAsyncValidators)}},Sa=class extends Ca{constructor(e,t,r){super(op(t),ap(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){nw(this,!0,e),Object.keys(e).forEach(r=>{tw(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Bl=new lt("CallSetDisabledState",{providedIn:"root",factory:()=>jl}),jl="always";function rw(n,e){return[...e.path,n]}function cp(n,e,t=jl){lp(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),sw(n,e),aw(n,e),ow(n,e),iw(n,e)}function Kf(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function iw(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function lp(n,e){let t=J_(n);e.validator!==null?n.setValidators(Gf(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=Y_(n);e.asyncValidator!==null?n.setAsyncValidators(Gf(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();Kf(e._rawValidators,i),Kf(e._rawAsyncValidators,i)}function sw(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&up(n,e)})}function ow(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&up(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function up(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function aw(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function cw(n,e){n==null,lp(n,e)}function lw(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function uw(n){return Object.getPrototypeOf(n.constructor)===j_}function hw(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function dw(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(s=>{s.constructor===Hn?t=s:uw(s)?r=s:i=s}),i||r||t||null}var fw={provide:Ei,useExisting:Ds(()=>Bs)},Ms=Promise.resolve(),Bs=(()=>{let e=class e extends Ei{get submitted(){return Wn(this.submittedReactive)}constructor(r,i,s){super(),this.callSetDisabledState=s,this._submitted=Vs(()=>this.submittedReactive()),this.submittedReactive=ks(!1),this._directives=new Set,this.ngSubmit=new Ar,this.form=new Sa({},Fl(r),Ul(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){Ms.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),cp(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){Ms.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){Ms.then(()=>{let i=this._findContainer(r.path),s=new Sa({});cw(s,r),i.registerControl(r.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){Ms.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){Ms.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submittedReactive.set(!0),hw(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(oe(Ll,10),oe(ep,10),oe(Bl,8))},e.\u0275dir=Et({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,s){i&1&&_e("submit",function(h){return s.onSubmit(h)})("reset",function(){return s.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[xs([fw]),qn]});let n=e;return n})();function Qf(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Jf(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var pw=class extends Ca{constructor(e=null,t,r){super(op(t),ap(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ra(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Jf(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Qf(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Qf(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Jf(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var mw={provide:Us,useExisting:Ds(()=>Sr)},Yf=Promise.resolve(),Sr=(()=>{let e=class e extends Us{constructor(r,i,s,a,h,p){super(),this._changeDetectorRef=h,this.callSetDisabledState=p,this.control=new pw,this._registered=!1,this.name="",this.update=new Ar,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=dw(this,a)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),lw(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){cp(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){Yf.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,s=i!==0&&Nl(i);Yf.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?rw(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(oe(Ei,9),oe(Ll,10),oe(ep,10),oe(Zf,10),oe(Mf,8),oe(Bl,8))},e.\u0275dir=Et({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[xs([mw]),qn,Sl]});let n=e;return n})(),Da=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Et({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let n=e;return n})();var gw=(()=>{let e=class e{constructor(){this._validator=zf}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):zf,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Et({type:e,features:[Sl]});let n=e;return n})();var yw={provide:Ll,useExisting:Ds(()=>js),multi:!0};var js=(()=>{let e=class e extends gw{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Nl,this.createValidator=r=>W_}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=Pl(e)))(s||e)}})(),e.\u0275dir=Et({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,s){i&2&&Df("required",s._enabled?"":null)},inputs:{required:"required"},features:[xs([yw]),qn]});let n=e;return n})();var _w=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=wa({type:e}),e.\u0275inj=_a({});let n=e;return n})();var Ai=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Bl,useValue:r.callSetDisabledState??jl}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=wa({type:e}),e.\u0275inj=_a({imports:[_w]});let n=e;return n})();var ff=ma(qs());var dp=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},ww=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=n[t++],a=n[t++],h=n[t++],p=((i&7)<<18|(s&63)<<12|(a&63)<<6|h&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{let s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},fp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let s=n[i],a=i+1<n.length,h=a?n[i+1]:0,p=i+2<n.length,m=p?n[i+2]:0,w=s>>2,y=(s&3)<<4|h>>4,k=(h&15)<<2|m>>6,x=m&63;p||(x=64,a||(k=64)),r.push(t[w],t[y],t[k],t[x])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(dp(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):ww(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let s=t[n.charAt(i++)],h=i<n.length?t[n.charAt(i)]:0;++i;let m=i<n.length?t[n.charAt(i)]:64;++i;let y=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||h==null||m==null||y==null)throw new Gl;let k=s<<2|h>>4;if(r.push(k),m!==64){let x=h<<4&240|m>>2;if(r.push(x),y!==64){let L=m<<6&192|y;r.push(L)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Gl=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},vw=function(n){let e=dp(n);return fp.encodeByteArray(e,!0)},$s=function(n){return vw(n).replace(/\./g,"")},Hl=function(n){try{return fp.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Iw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Ew=()=>Iw().__FIREBASE_DEFAULTS__,bw=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Tw=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Hl(n[1]);return e&&JSON.parse(e)},xa=()=>{try{return Ew()||bw()||Tw()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Kl=n=>{var e,t;return(t=(e=xa())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},pp=n=>{let e=Kl(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Ql=()=>{var n;return(n=xa())===null||n===void 0?void 0:n.config},Jl=n=>{var e;return(e=xa())===null||e===void 0?void 0:e[`_${n}`]};var ka=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function mp(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[$s(JSON.stringify(t)),$s(JSON.stringify(a)),""].join(".")}function Me(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function gp(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Me())}function Aw(){var n;let e=(n=xa())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yp(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function _p(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wp(){let n=Me();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function vp(){return!Aw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Yl(){try{return typeof indexedDB=="object"}catch{return!1}}function Ip(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}var Cw="FirebaseError",st=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Cw,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,on.prototype.create)}},on=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?Sw(s,r):"Error",h=`${this.serviceName}: ${a} (${i}).`;return new st(i,h,r)}};function Sw(n,e){return n.replace(Pw,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var Pw=/\{\$([^}]+)}/g;function Ep(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Pr(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let s=n[i],a=e[i];if(hp(s)&&hp(a)){if(!Pr(s,a))return!1}else if(s!==a)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function hp(n){return n!==null&&typeof n=="object"}function zs(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ci(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Si(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function bp(n,e){let t=new Wl(n,e);return t.subscribe.bind(t)}var Wl=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Rw(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=zl),i.error===void 0&&(i.error=zl),i.complete===void 0&&(i.complete=zl);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Rw(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function zl(){}var GT=4*60*60*1e3;function je(n){return n&&n._delegate?n._delegate:n}var ft=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Rr="[DEFAULT]";var Xl=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new ka;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kw(e))try{this.getOrInitializeService({instanceIdentifier:Rr})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Rr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return b(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Rr){return this.instances.has(e)}getOptions(e=Rr){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[s,a]of this.instancesDeferred.entries()){let h=this.normalizeInstanceIdentifier(s);r===h&&a.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Dw(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Rr){return this.component?this.component.multipleInstances?e:Rr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Dw(n){return n===Rr?void 0:n}function kw(n){return n.instantiationMode==="EAGER"}var Va=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Xl(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var xw=[],te=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(te||{}),Vw={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},Nw=te.INFO,Ow={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},Mw=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Ow[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Kn=class{constructor(e){this.name=e,this._logLevel=Nw,this._logHandler=Mw,this._userLogHandler=null,xw.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Vw[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...e),this._logHandler(this,te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...e),this._logHandler(this,te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,te.INFO,...e),this._logHandler(this,te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,te.WARN,...e),this._logHandler(this,te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...e),this._logHandler(this,te.ERROR,...e)}};var Lw=(n,e)=>e.some(t=>n instanceof t),Tp,Ap;function Fw(){return Tp||(Tp=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Uw(){return Ap||(Ap=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Cp=new WeakMap,eu=new WeakMap,Sp=new WeakMap,Zl=new WeakMap,nu=new WeakMap;function Bw(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t($t(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&Cp.set(t,n)}).catch(()=>{}),nu.set(e,n),e}function jw(n){if(eu.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});eu.set(n,e)}var tu={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return eu.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Sp.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return $t(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Pp(n){tu=n(tu)}function qw(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Na(this),e,...t);return Sp.set(r,e.sort?e.sort():[e]),$t(r)}:Uw().includes(n)?function(...e){return n.apply(Na(this),e),$t(Cp.get(this))}:function(...e){return $t(n.apply(Na(this),e))}}function $w(n){return typeof n=="function"?qw(n):(n instanceof IDBTransaction&&jw(n),Lw(n,Fw())?new Proxy(n,tu):n)}function $t(n){if(n instanceof IDBRequest)return Bw(n);if(Zl.has(n))return Zl.get(n);let e=$w(n);return e!==n&&(Zl.set(n,e),nu.set(e,n)),e}var Na=n=>nu.get(n);function Dp(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){let a=indexedDB.open(n,e),h=$t(a);return r&&a.addEventListener("upgradeneeded",p=>{r($t(a.result),p.oldVersion,p.newVersion,$t(a.transaction),p)}),t&&a.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),h.then(p=>{s&&p.addEventListener("close",()=>s()),i&&p.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}var zw=["get","getKey","getAll","getAllKeys","count"],Gw=["put","add","delete","clear"],ru=new Map;function Rp(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ru.get(e))return ru.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=Gw.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||zw.includes(t)))return;let s=function(a,...h){return b(this,null,function*(){let p=this.transaction(a,i?"readwrite":"readonly"),m=p.store;return r&&(m=m.index(h.shift())),(yield Promise.all([m[t](...h),i&&p.done]))[0]})};return ru.set(e,s),s}Pp(n=>ct(He({},n),{get:(e,t,r)=>Rp(e,t)||n.get(e,t,r),has:(e,t)=>!!Rp(e,t)||n.has(e,t)}));var su=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Ww(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Ww(n){let e=n.getComponent();return e?.type==="VERSION"}var ou="@firebase/app",kp="0.10.10";var an=new Kn("@firebase/app"),Hw="@firebase/app-compat",Kw="@firebase/analytics-compat",Qw="@firebase/analytics",Jw="@firebase/app-check-compat",Yw="@firebase/app-check",Xw="@firebase/auth",Zw="@firebase/auth-compat",ev="@firebase/database",tv="@firebase/database-compat",nv="@firebase/functions",rv="@firebase/functions-compat",iv="@firebase/installations",sv="@firebase/installations-compat",ov="@firebase/messaging",av="@firebase/messaging-compat",cv="@firebase/performance",lv="@firebase/performance-compat",uv="@firebase/remote-config",hv="@firebase/remote-config-compat",dv="@firebase/storage",fv="@firebase/storage-compat",pv="@firebase/firestore",mv="@firebase/vertexai-preview",gv="@firebase/firestore-compat",yv="firebase",_v="10.13.1";var au="[DEFAULT]",wv={[ou]:"fire-core",[Hw]:"fire-core-compat",[Qw]:"fire-analytics",[Kw]:"fire-analytics-compat",[Yw]:"fire-app-check",[Jw]:"fire-app-check-compat",[Xw]:"fire-auth",[Zw]:"fire-auth-compat",[ev]:"fire-rtdb",[tv]:"fire-rtdb-compat",[nv]:"fire-fn",[rv]:"fire-fn-compat",[iv]:"fire-iid",[sv]:"fire-iid-compat",[ov]:"fire-fcm",[av]:"fire-fcm-compat",[cv]:"fire-perf",[lv]:"fire-perf-compat",[uv]:"fire-rc",[hv]:"fire-rc-compat",[dv]:"fire-gcs",[fv]:"fire-gcs-compat",[pv]:"fire-fst",[gv]:"fire-fst-compat",[mv]:"fire-vertex","fire-js":"fire-js",[yv]:"fire-js-all"};var Gs=new Map,vv=new Map,cu=new Map;function xp(n,e){try{n.container.addComponent(e)}catch(t){an.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Jn(n){let e=n.name;if(cu.has(e))return an.debug(`There were multiple attempts to register component ${e}.`),!1;cu.set(e,n);for(let t of Gs.values())xp(t,n);for(let t of vv.values())xp(t,n);return!0}function Hs(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Tt(n){return n.settings!==void 0}var Iv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Qn=new on("app","Firebase",Iv);var lu=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ft("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Qn.create("app-deleted",{appName:this._name})}};var Yn=_v;function du(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:au,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Qn.create("bad-app-name",{appName:String(i)});if(t||(t=Ql()),!t)throw Qn.create("no-options");let s=Gs.get(i);if(s){if(Pr(t,s.options)&&Pr(r,s.config))return s;throw Qn.create("duplicate-app",{appName:i})}let a=new Va(i);for(let p of cu.values())a.addComponent(p);let h=new lu(t,r,a);return Gs.set(i,h),h}function Pi(n=au){let e=Gs.get(n);if(!e&&n===au&&Ql())return du();if(!e)throw Qn.create("no-app",{appName:n});return e}function Oa(){return Array.from(Gs.values())}function Pe(n,e,t){var r;let i=(r=wv[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){let h=[`Unable to register library "${i}" with version "${e}":`];s&&h.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&h.push("and"),a&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),an.warn(h.join(" "));return}Jn(new ft(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var Ev="firebase-heartbeat-database",bv=1,Ws="firebase-heartbeat-store",iu=null;function Mp(){return iu||(iu=Dp(Ev,bv,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ws)}catch(t){console.warn(t)}}}}).catch(n=>{throw Qn.create("idb-open",{originalErrorMessage:n.message})})),iu}function Tv(n){return b(this,null,function*(){try{let t=(yield Mp()).transaction(Ws),r=yield t.objectStore(Ws).get(Lp(n));return yield t.done,r}catch(e){if(e instanceof st)an.warn(e.message);else{let t=Qn.create("idb-get",{originalErrorMessage:e?.message});an.warn(t.message)}}})}function Vp(n,e){return b(this,null,function*(){try{let r=(yield Mp()).transaction(Ws,"readwrite");yield r.objectStore(Ws).put(e,Lp(n)),yield r.done}catch(t){if(t instanceof st)an.warn(t.message);else{let r=Qn.create("idb-set",{originalErrorMessage:t?.message});an.warn(r.message)}}})}function Lp(n){return`${n.name}!${n.options.appId}`}var Av=1024,Cv=30*24*60*60*1e3,uu=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new hu(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return b(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Np();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{let h=new Date(a.date).valueOf();return Date.now()-h<=Cv}),this._storage.overwrite(this._heartbeatsCache))}catch(r){an.warn(r)}})}getHeartbeatsHeader(){return b(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Np(),{heartbeatsToSend:r,unsentEntries:i}=Sv(this._heartbeatsCache.heartbeats),s=$s(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return an.warn(t),""}})}};function Np(){return new Date().toISOString().substring(0,10)}function Sv(n,e=Av){let t=[],r=n.slice();for(let i of n){let s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),Op(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Op(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var hu=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return b(this,null,function*(){return Yl()?Ip().then(()=>!0).catch(()=>!1):!1})}read(){return b(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield Tv(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Vp(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Vp(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Op(n){return $s(JSON.stringify({version:2,heartbeats:n})).length}function Pv(n){Jn(new ft("platform-logger",e=>new su(e),"PRIVATE")),Jn(new ft("heartbeat",e=>new uu(e),"PRIVATE")),Pe(ou,kp,n),Pe(ou,kp,"esm2017"),Pe("fire-js","")}Pv("");var Rv="firebase",Dv="10.13.1";Pe(Rv,Dv,"app");var kr=new Vl("ANGULARFIRE2_VERSION");function La(n,e,t){if(e){if(e.length===1)return e[0];let s=e.filter(a=>a.app===t);if(s.length===1)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Ks=(n,e)=>{let t=e?[e]:Oa(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(a=>{r.includes(a)||r.push(a)})}),r},Di=class{constructor(){return Ks(kv)}},kv="app-check";function Ri(){}var Ma=class{zone;delegate;constructor(e,t=Af){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,s=function(a){i.runGuarded(()=>{e.apply(this,[a])})};return this.delegate.schedule(s,t,r)}},fu=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ri,{},Ri,Ri)),t.pipe(Pf({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ki=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Ma(Zone.current)),this.insideAngular=t.run(()=>new Ma(Zone.current,Tf)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(Lt(jn))};static \u0275prov=rn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Fa(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function xv(n){return Fa().ngZone.runOutsideAngular(()=>n())}function Dr(n){return Fa().ngZone.run(()=>n())}function Vv(n){return Nv(Fa())(n)}function Nv(n){return function(t){return t=t.lift(new fu(n.ngZone)),t.pipe(Al(n.outsideAngular),Tl(n.insideAngular))}}var Ov=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Dr(()=>n.apply(void 0,r))},Xe=(n,e)=>function(){let t,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(t||=Dr(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ri,{},Ri,Ri))),r[s]=Ov(r[s],t));let i=xv(()=>n.apply(this,r));if(!e)if(i instanceof Ps){let s=Fa();return i.pipe(Al(s.outsideAngular),Tl(s.insideAngular))}else return Dr(()=>i);return i instanceof Ps?i.pipe(Vv):i instanceof Promise?Dr(()=>new Promise((s,a)=>i.then(h=>Dr(()=>s(h)),h=>Dr(()=>a(h))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Dr(()=>i)};var cn=class{constructor(e){return e}},xr=class{constructor(){return Oa()}};function Mv(n){return n&&n.length===1?n[0]:new cn(Pi())}var pu=new lt("angularfire2._apps"),Lv={provide:cn,useFactory:Mv,deps:[[new ut,pu]]},Fv={provide:xr,deps:[[new ut,pu]]};function Uv(n){return(e,t)=>{let r=t.get(Rf);Pe("angularfire",kr.full,"core"),Pe("angularfire",kr.full,"app"),Pe("angular",Vf.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new cn(i)}}function Fp(n,...e){return yi([Lv,Fv,{provide:pu,useFactory:Uv(n),multi:!0,deps:[jn,Tr,ki,...e]}])}var Up=Xe(du,!0);function nm(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var rm=nm,im=new on("auth","Firebase",nm());var za=new Kn("@firebase/auth");function Bv(n,...e){za.logLevel<=te.WARN&&za.warn(`Auth (${Yn}): ${n}`,...e)}function Ba(n,...e){za.logLevel<=te.ERROR&&za.error(`Auth (${Yn}): ${n}`,...e)}function Gt(n,...e){throw Lu(n,...e)}function Vr(n,...e){return Lu(n,...e)}function sm(n,e,t){let r=Object.assign(Object.assign({},rm()),{[e]:t});return new on("auth","Firebase",r).create(e,{appName:n.name})}function hn(n){return sm(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Lu(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return im.create(n,...e)}function W(n,e,...t){if(!n)throw Lu(e,...t)}function ln(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Ba(e),new Error(e)}function Zn(n,e){n||ln(e)}function _u(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function jv(){return Bp()==="http:"||Bp()==="https:"}function Bp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function qv(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jv()||yp()||"connection"in navigator)?navigator.onLine:!0}function $v(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Nr=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Zn(t>e,"Short delay should be less than long delay!"),this.isMobile=gp()||_p()}get(){return qv()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Fu(n,e){Zn(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Ga=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ln("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ln("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ln("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var zv={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Gv=new Nr(3e4,6e4);function er(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function tr(s,a,h,p){return b(this,arguments,function*(n,e,t,r,i={}){return om(n,i,()=>b(this,null,function*(){let m={},w={};r&&(e==="GET"?w=r:m={body:JSON.stringify(r)});let y=zs(Object.assign({key:n.config.apiKey},w)).slice(1),k=yield n._getAdditionalHeaders();return k["Content-Type"]="application/json",n.languageCode&&(k["X-Firebase-Locale"]=n.languageCode),Ga.fetch()(am(n,n.config.apiHost,t,y),Object.assign({method:e,headers:k,referrerPolicy:"no-referrer"},m))}))})}function om(n,e,t){return b(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},zv),e);try{let i=new wu(n),s=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let a=yield s.json();if("needConfirmation"in a)throw Ua(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{let h=s.ok?a.errorMessage:a.error.message,[p,m]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ua(n,"credential-already-in-use",a);if(p==="EMAIL_EXISTS")throw Ua(n,"email-already-in-use",a);if(p==="USER_DISABLED")throw Ua(n,"user-disabled",a);let w=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw sm(n,w,m);Gt(n,w)}}catch(i){if(i instanceof st)throw i;Gt(n,"network-request-failed",{message:String(i)})}})}function no(s,a,h,p){return b(this,arguments,function*(n,e,t,r,i={}){let m=yield tr(n,e,t,r,i);return"mfaPendingCredential"in m&&Gt(n,"multi-factor-auth-required",{_serverResponse:m}),m})}function am(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?Fu(n.config,i):`${n.config.apiScheme}://${i}`}function Wv(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var wu=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Vr(this.auth,"network-request-failed")),Gv.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Ua(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Vr(n,e,r);return i.customData._tokenResponse=t,i}function jp(n){return n!==void 0&&n.enterprise!==void 0}var vu=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Wv(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function Hv(n,e){return b(this,null,function*(){return tr(n,"GET","/v2/recaptchaConfig",er(n,e))})}function Kv(n,e){return b(this,null,function*(){return tr(n,"POST","/v1/accounts:delete",e)})}function cm(n,e){return b(this,null,function*(){return tr(n,"POST","/v1/accounts:lookup",e)})}function Qs(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Uu(n,e=!1){return b(this,null,function*(){let t=je(n),r=yield t.getIdToken(e),i=Bu(r);W(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,a=s?.sign_in_provider;return{claims:i,token:r,authTime:Qs(mu(i.auth_time)),issuedAtTime:Qs(mu(i.iat)),expirationTime:Qs(mu(i.exp)),signInProvider:a||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function mu(n){return Number(n)*1e3}function Bu(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return Ba("JWT malformed, contained fewer than 3 sections"),null;try{let i=Hl(t);return i?JSON.parse(i):(Ba("Failed to decode base64 JWT payload"),null)}catch(i){return Ba("Caught error parsing JWT payload as JSON",i?.toString()),null}}function qp(n){let e=Bu(n);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ys(n,e,t=!1){return b(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof st&&Qv(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function Qv({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Iu=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>b(this,null,function*(){yield this.iteration()}),t)}iteration(){return b(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Xs=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qs(this.lastLoginAt),this.creationTime=Qs(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Wa(n){return b(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Ys(n,cm(t,{idToken:r}));W(i?.users.length,t,"internal-error");let s=i.users[0];n._notifyReloadListener(s);let a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?lm(s.providerUserInfo):[],h=Jv(n.providerData,a),p=n.isAnonymous,m=!(n.email&&s.passwordHash)&&!h?.length,w=p?m:!1,y={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:h,metadata:new Xs(s.createdAt,s.lastLoginAt),isAnonymous:w};Object.assign(n,y)})}function ju(n){return b(this,null,function*(){let e=je(n);yield Wa(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Jv(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function lm(n){return n.map(e=>{var{providerId:t}=e,r=bl(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Yv(n,e){return b(this,null,function*(){let t=yield om(n,{},()=>b(this,null,function*(){let r=zs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=am(n,i,"/v1/token",`key=${s}`),h=yield n._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",Ga.fetch()(a,{method:"POST",headers:h,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function Xv(n,e){return b(this,null,function*(){return tr(n,"POST","/v2/accounts:revokeToken",er(n,e))})}var Js=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qp(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){W(e.length!==0,"internal-error");let t=qp(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return b(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return b(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield Yv(e,t);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new n;return r&&(W(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(W(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(W(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return ln("not implemented")}};function Xn(n,e){W(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var xi=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=bl(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Iu(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Xs(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return b(this,null,function*(){let t=yield Ys(this,this.stsTokenManager.getToken(this.auth,e));return W(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Uu(this,e)}reload(){return ju(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return b(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Wa(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return b(this,null,function*(){if(Tt(this.auth.app))return Promise.reject(hn(this.auth));let e=yield this.getIdToken();return yield Ys(this,Kv(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,h,p,m,w;let y=(r=t.displayName)!==null&&r!==void 0?r:void 0,k=(i=t.email)!==null&&i!==void 0?i:void 0,x=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,L=(a=t.photoURL)!==null&&a!==void 0?a:void 0,B=(h=t.tenantId)!==null&&h!==void 0?h:void 0,N=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,K=(m=t.createdAt)!==null&&m!==void 0?m:void 0,Y=(w=t.lastLoginAt)!==null&&w!==void 0?w:void 0,{uid:Z,emailVerified:ue,isAnonymous:be,providerData:se,stsTokenManager:S}=t;W(Z&&S,e,"internal-error");let v=Js.fromJSON(this.name,S);W(typeof Z=="string",e,"internal-error"),Xn(y,e.name),Xn(k,e.name),W(typeof ue=="boolean",e,"internal-error"),W(typeof be=="boolean",e,"internal-error"),Xn(x,e.name),Xn(L,e.name),Xn(B,e.name),Xn(N,e.name),Xn(K,e.name),Xn(Y,e.name);let I=new n({uid:Z,auth:e,email:k,emailVerified:ue,displayName:y,isAnonymous:be,photoURL:L,phoneNumber:x,tenantId:B,stsTokenManager:v,createdAt:K,lastLoginAt:Y});return se&&Array.isArray(se)&&(I.providerData=se.map(T=>Object.assign({},T))),N&&(I._redirectEventId=N),I}static _fromIdTokenResponse(e,t,r=!1){return b(this,null,function*(){let i=new Js;i.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Wa(s),s})}static _fromGetAccountInfoResponse(e,t,r){return b(this,null,function*(){let i=t.users[0];W(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?lm(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!s?.length,h=new Js;h.updateFromIdToken(r);let p=new n({uid:i.localId,auth:e,stsTokenManager:h,isAnonymous:a}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Xs(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(p,m),p})}};var $p=new Map;function un(n){Zn(n instanceof Function,"Expected a class definition");let e=$p.get(n);return e?(Zn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,$p.set(n,e),e)}var Zv=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return b(this,null,function*(){return!0})}_set(t,r){return b(this,null,function*(){this.storage[t]=r})}_get(t){return b(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return b(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Eu=Zv;function ja(n,e,t){return`firebase:${n}:${e}:${t}`}var Ha=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=ja(this.userKey,i.apiKey,s),this.fullPersistenceKey=ja("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return b(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?xi._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return b(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return b(this,null,function*(){if(!t.length)return new n(un(Eu),e,r);let i=(yield Promise.all(t.map(m=>b(this,null,function*(){if(yield m._isAvailable())return m})))).filter(m=>m),s=i[0]||un(Eu),a=ja(r,e.config.apiKey,e.name),h=null;for(let m of t)try{let w=yield m._get(a);if(w){let y=xi._fromJSON(e,w);m!==s&&(h=y),s=m;break}}catch{}let p=i.filter(m=>m._shouldAllowMigration);return!s._shouldAllowMigration||!p.length?new n(s,e,r):(s=p[0],h&&(yield s._set(a,h.toJSON())),yield Promise.all(t.map(m=>b(this,null,function*(){if(m!==s)try{yield m._remove(a)}catch{}}))),new n(s,e,r))})}};function zp(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fm(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(um(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mm(e))return"Blackberry";if(gm(e))return"Webos";if(hm(e))return"Safari";if((e.includes("chrome/")||dm(e))&&!e.includes("edge/"))return"Chrome";if(pm(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function um(n=Me()){return/firefox\//i.test(n)}function hm(n=Me()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dm(n=Me()){return/crios\//i.test(n)}function fm(n=Me()){return/iemobile/i.test(n)}function pm(n=Me()){return/android/i.test(n)}function mm(n=Me()){return/blackberry/i.test(n)}function gm(n=Me()){return/webos/i.test(n)}function qu(n=Me()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function eI(n=Me()){var e;return qu(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function tI(){return wp()&&document.documentMode===10}function ym(n=Me()){return qu(n)||pm(n)||gm(n)||mm(n)||/windows phone/i.test(n)||fm(n)}function _m(n,e=[]){let t;switch(n){case"Browser":t=zp(Me());break;case"Worker":t=`${zp(Me())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Yn}/${r}`}var bu=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=s=>new Promise((a,h)=>{try{let p=e(s);a(p)}catch(p){h(p)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return b(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function nI(t){return b(this,arguments,function*(n,e={}){return tr(n,"GET","/v2/passwordPolicy",er(n,e))})}var rI=6,Tu=class{constructor(e){var t,r,i,s;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:rI,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,h;let p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(r=p.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),p.isValid&&(p.isValid=(i=p.containsLowercaseLetter)!==null&&i!==void 0?i:!0),p.isValid&&(p.isValid=(s=p.containsUppercaseLetter)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(a=p.containsNumericCharacter)!==null&&a!==void 0?a:!0),p.isValid&&(p.isValid=(h=p.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),p}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Au=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ka(this),this.idTokenSubscription=new Ka(this),this.beforeStateQueue=new bu(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=im,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=un(t)),this._initializationPromise=this.queue(()=>b(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Ha.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return b(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return b(this,null,function*(){try{let t=yield cm(this,{idToken:e}),r=yield xi._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return b(this,null,function*(){var t;if(Tt(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(h,h))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,h=i?._redirectEventId,p=yield this.tryRedirectSignIn(e);(!a||a===h)&&p?.user&&(i=p.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return b(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return b(this,null,function*(){try{yield Wa(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=$v()}_delete(){return b(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return b(this,null,function*(){if(Tt(this.app))return Promise.reject(hn(this));let t=e?je(e):null;return t&&W(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return b(this,null,function*(){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>b(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return b(this,null,function*(){return Tt(this.app)?Promise.reject(hn(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Tt(this.app)?Promise.reject(hn(this)):this.queue(()=>b(this,null,function*(){yield this.assertedPersistence.setPersistence(un(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return b(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return b(this,null,function*(){let e=yield nI(this),t=new Tu(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new on("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return b(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Xv(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return b(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return b(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&un(e)||this._popupRedirectResolver;W(t,this,"argument-error"),this.redirectPersistenceManager=yield Ha.create(this,[un(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return b(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>b(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return b(this,null,function*(){if(e===this.currentUser)return this.queue(()=>b(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),a=!1,h=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(h,this,"internal-error"),h.then(()=>{a||s(this.currentUser)}),typeof t=="function"){let p=e.addObserver(t,r,i);return()=>{a=!0,p()}}else{let p=e.addObserver(t);return()=>{a=!0,p()}}}directlySetCurrentUser(e){return b(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_m(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return b(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return b(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&Bv(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Mr(n){return je(n)}var Ka=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=bp(t=>this.observer=t)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var tc={loadJS(){return b(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function iI(n){tc=n}function wm(n){return tc.loadJS(n)}function sI(){return tc.recaptchaEnterpriseScript}function oI(){return tc.gapiScript}function vm(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var aI="recaptcha-enterprise",cI="NO_RECAPTCHA",Cu=class{constructor(e){this.type=aI,this.auth=Mr(e)}verify(e="verify",t=!1){return b(this,null,function*(){function r(s){return b(this,null,function*(){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((a,h)=>b(this,null,function*(){Hv(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{let m=new vu(p);return s.tenantId==null?s._agentRecaptchaConfig=m:s._tenantRecaptchaConfigs[s.tenantId]=m,a(m.siteKey)}}).catch(p=>{h(p)})}))})}function i(s,a,h){let p=window.grecaptcha;jp(p)?p.enterprise.ready(()=>{p.enterprise.execute(s,{action:e}).then(m=>{a(m)}).catch(()=>{a(cI)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{r(this.auth).then(h=>{if(!t&&jp(window.grecaptcha))i(h,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let p=sI();p.length!==0&&(p+=h),wm(p).then(()=>{i(h,s,a)}).catch(m=>{a(m)})}}).catch(h=>{a(h)})})})}};function Gp(n,e,t,r=!1){return b(this,null,function*(){let i=new Cu(n),s;try{s=yield i.verify(t)}catch{s=yield i.verify(t,!0)}let a=Object.assign({},e);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a})}function Su(n,e,t,r){return b(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield Gp(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(s=>b(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let a=yield Gp(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(s)}))})}function $u(n,e){let t=Hs(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),s=t.getOptions();if(Pr(s,e??{}))return i;Gt(i,"already-initialized")}return t.initialize({options:e})}function lI(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(un);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function zu(n,e,t){let r=Mr(n);W(r._canInitEmulator,r,"emulator-config-failed"),W(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,s=Im(e),{host:a,port:h}=uI(e),p=h===null?"":`:${h}`;r.config.emulator={url:`${s}//${a}${p}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:h,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||hI()}function Im(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function uI(n){let e=Im(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:Wp(r.substr(s.length+1))}}else{let[s,a]=r.split(":");return{host:s,port:Wp(a)}}}function Wp(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function hI(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Zs=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ln("not implemented")}_getIdTokenResponse(e){return ln("not implemented")}_linkToIdToken(e,t){return ln("not implemented")}_getReauthenticationResolver(e){return ln("not implemented")}};function dI(n,e){return b(this,null,function*(){return tr(n,"POST","/v1/accounts:signUp",e)})}function fI(n,e){return b(this,null,function*(){return no(n,"POST","/v1/accounts:signInWithPassword",er(n,e))})}function pI(n,e){return b(this,null,function*(){return no(n,"POST","/v1/accounts:signInWithEmailLink",er(n,e))})}function mI(n,e){return b(this,null,function*(){return no(n,"POST","/v1/accounts:signInWithEmailLink",er(n,e))})}var eo=class n extends Zs{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return b(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Su(e,t,"signInWithPassword",fI);case"emailLink":return pI(e,{email:this._email,oobCode:this._password});default:Gt(e,"internal-error")}})}_linkToIdToken(e,t){return b(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Su(e,r,"signUpPassword",dI);case"emailLink":return mI(e,{idToken:t,email:this._email,oobCode:this._password});default:Gt(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function gu(n,e){return b(this,null,function*(){return no(n,"POST","/v1/accounts:signInWithIdp",er(n,e))})}function gI(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function yI(n){let e=Ci(Si(n)).link,t=e?Ci(Si(e)).deep_link_id:null,r=Ci(Si(n)).deep_link_id;return(r?Ci(Si(r)).link:null)||r||t||e||n}var Qa=class n{constructor(e){var t,r,i,s,a,h;let p=Ci(Si(e)),m=(t=p.apiKey)!==null&&t!==void 0?t:null,w=(r=p.oobCode)!==null&&r!==void 0?r:null,y=gI((i=p.mode)!==null&&i!==void 0?i:null);W(m&&w&&y,"argument-error"),this.apiKey=m,this.operation=y,this.code=w,this.continueUrl=(s=p.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=p.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(h=p.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){let t=yI(e);try{return new n(t)}catch{return null}}};var Em=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return eo._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=Qa.parseLink(r);return W(i,"argument-error"),eo._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Ja=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Pu=class extends Ja{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function _I(n,e){return b(this,null,function*(){return no(n,"POST","/v1/accounts:signUp",er(n,e))})}var Vi=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return b(this,null,function*(){let s=yield xi._fromIdTokenResponse(e,r,i),a=Hp(r);return new n({user:s,providerId:a,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return b(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Hp(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function Hp(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Ru=class n extends st{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function bm(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ru._fromErrorAndOperation(n,s,e,r):s})}function wI(n,e,t=!1){return b(this,null,function*(){let r=yield Ys(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Vi._forOperation(n,"link",r)})}function vI(n,e,t=!1){return b(this,null,function*(){let{auth:r}=n;if(Tt(r.app))return Promise.reject(hn(r));let i="reauthenticate";try{let s=yield Ys(n,bm(r,i,e,n),t);W(s.idToken,r,"internal-error");let a=Bu(s.idToken);W(a,r,"internal-error");let{sub:h}=a;return W(n.uid===h,r,"user-mismatch"),Vi._forOperation(n,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Gt(r,"user-mismatch"),s}})}function Tm(n,e,t=!1){return b(this,null,function*(){if(Tt(n.app))return Promise.reject(hn(n));let r="signIn",i=yield bm(n,r,e),s=yield Vi._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(s.user)),s})}function Gu(n,e){return b(this,null,function*(){return Tm(Mr(n),e)})}function Am(n){return b(this,null,function*(){let e=Mr(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Wu(n,e,t){return b(this,null,function*(){if(Tt(n.app))return Promise.reject(hn(n));let r=Mr(n),a=yield Su(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",_I).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&Am(n),p}),h=yield Vi._fromIdTokenResponse(r,"signIn",a);return yield r._updateCurrentUser(h.user),h})}function Hu(n,e,t){return Tt(n.app)?Promise.reject(hn(n)):Gu(je(n),Em.credential(e,t)).catch(r=>b(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&Am(n),r}))}function ro(n,e,t,r){return je(n).onIdTokenChanged(e,t,r)}function Ku(n,e,t){return je(n).beforeAuthStateChanged(e,t)}function Qu(n){return je(n).signOut()}var Ya="__sak";var Xa=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ya,"1"),this.storage.removeItem(Ya),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var II=1e3,EI=10,bI=(()=>{class n extends Xa{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=ym(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&t(r,s,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((h,p,m)=>{this.notifyListeners(h,m)});return}let i=t.key;r?this.detachListener():this.stopPolling();let s=()=>{let h=this.storage.getItem(i);!r&&this.localCache[i]===h||this.notifyListeners(i,h)},a=this.storage.getItem(i);tI()&&a!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,EI):s()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},II)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return b(this,null,function*(){yield Bn(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return b(this,null,function*(){let r=yield Bn(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return b(this,null,function*(){yield Bn(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),Cm=bI;var TI=(()=>{class n extends Xa{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Ju=TI;function AI(n){return Promise.all(n.map(e=>b(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var CI=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(s=>s.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return b(this,null,function*(){let r=t,{eventId:i,eventType:s,data:a}=r.data,h=this.handlersMap[s];if(!h?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let p=Array.from(h).map(w=>b(this,null,function*(){return w(r.origin,a)})),m=yield AI(p);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:m})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Sm(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var Du=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return b(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((h,p)=>{let m=Sm("",20);i.port1.start();let w=setTimeout(()=>{p(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(y){let k=y;if(k.data.eventId===m)switch(k.data.status){case"ack":clearTimeout(w),s=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),h(k.data.response);break;default:clearTimeout(w),clearTimeout(s),p(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})})}};function zt(){return window}function SI(n){zt().location.href=n}function Pm(){return typeof zt().WorkerGlobalScope<"u"&&typeof zt().importScripts=="function"}function PI(){return b(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function RI(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function DI(){return Pm()?self:null}var Rm="firebaseLocalStorageDb",kI=1,Za="firebaseLocalStorage",Dm="fbase_key",Or=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function nc(n,e){return n.transaction([Za],e?"readwrite":"readonly").objectStore(Za)}function xI(){let n=indexedDB.deleteDatabase(Rm);return new Or(n).toPromise()}function ku(){let n=indexedDB.open(Rm,kI);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(Za,{keyPath:Dm})}catch(i){t(i)}}),n.addEventListener("success",()=>b(this,null,function*(){let r=n.result;r.objectStoreNames.contains(Za)?e(r):(r.close(),yield xI(),e(yield ku()))}))})}function Kp(n,e,t){return b(this,null,function*(){let r=nc(n,!0).put({[Dm]:e,value:t});return new Or(r).toPromise()})}function VI(n,e){return b(this,null,function*(){let t=nc(n,!1).get(e),r=yield new Or(t).toPromise();return r===void 0?null:r.value})}function Qp(n,e){let t=nc(n,!0).delete(e);return new Or(t).toPromise()}var NI=800,OI=3,MI=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return b(this,null,function*(){return this.db?this.db:(this.db=yield ku(),this.db)})}_withRetries(t){return b(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>OI)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return b(this,null,function*(){return Pm()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return b(this,null,function*(){this.receiver=CI._getInstance(DI()),this.receiver._subscribe("keyChanged",(t,r)=>b(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>b(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return b(this,null,function*(){var t,r;if(this.activeServiceWorker=yield PI(),!this.activeServiceWorker)return;this.sender=new Du(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return b(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||RI()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return b(this,null,function*(){try{if(!indexedDB)return!1;let t=yield ku();return yield Kp(t,Ya,"1"),yield Qp(t,Ya),!0}catch{}return!1})}_withPendingWrite(t){return b(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(i=>Kp(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return b(this,null,function*(){let r=yield this._withRetries(i=>VI(i,t));return this.localCache[t]=r,r})}_remove(t){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(r=>Qp(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return b(this,null,function*(){let t=yield this._withRetries(s=>{let a=nc(s,!1).getAll();return new Or(a).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:s,value:a}of t)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>b(this,null,function*(){return this._poll()}),NI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),km=MI;var FA=vm("rcb"),UA=new Nr(3e4,6e4);function LI(n,e){return e?un(e):(W(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var to=class extends Zs{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gu(e,this._buildIdpRequest())}_linkToIdToken(e,t){return gu(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return gu(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function FI(n){return Tm(n.auth,new to(n),n.bypassAuthState)}function UI(n){let{auth:e,user:t}=n;return W(t,e,"internal-error"),vI(t,new to(n),n.bypassAuthState)}function BI(n){return b(this,null,function*(){let{auth:e,user:t}=n;return W(t,e,"internal-error"),wI(t,new to(n),n.bypassAuthState)})}var xu=class{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>b(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return b(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:h}=e;if(a){this.reject(a);return}let p={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(h)(p))}catch(m){this.reject(m)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FI;case"linkViaPopup":case"linkViaRedirect":return BI;case"reauthViaPopup":case"reauthViaRedirect":return UI;default:Gt(this.auth,"internal-error")}}resolve(e){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var BA=new Nr(2e3,1e4);var jI="pendingRedirect",qa=new Map,Vu=class n extends xu{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return b(this,null,function*(){let e=qa.get(this.auth._key());if(!e){try{let r=(yield qI(this.resolver,this.auth))?yield Bn(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}qa.set(this.auth._key(),e)}return this.bypassAuthState||qa.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return b(this,null,function*(){if(e.type==="signInViaRedirect")return Bn(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Bn(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return b(this,null,function*(){})}cleanUp(){}};function qI(n,e){return b(this,null,function*(){let t=GI(e),r=zI(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function $I(n,e){qa.set(n._key(),e)}function zI(n){return un(n._redirectPersistence)}function GI(n){return ja(jI,n.config.apiKey,n.name)}function WI(n,e,t=!1){return b(this,null,function*(){if(Tt(n.app))return Promise.reject(hn(n));let r=Mr(n),i=LI(r,e),a=yield new Vu(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,yield r._persistUserIfCurrent(a.user),yield r._setRedirectUser(null,e)),a})}var HI=10*60*1e3,Nu=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!KI(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!xm(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Vr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=HI&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jp(e))}saveEventToCache(e){this.cachedEventUids.add(Jp(e)),this.lastProcessedEventTime=Date.now()}};function Jp(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function xm({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function KI(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xm(n);default:return!1}}function QI(t){return b(this,arguments,function*(n,e={}){return tr(n,"GET","/v1/projects",e)})}var JI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YI=/^https?/;function XI(n){return b(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield QI(n);for(let t of e)try{if(ZI(t))return}catch{}Gt(n,"unauthorized-domain")})}function ZI(n){let e=_u(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!YI.test(t))return!1;if(JI.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var e0=new Nr(3e4,6e4);function Yp(){let n=zt().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function t0(n){return new Promise((e,t)=>{var r,i,s;function a(){Yp(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Yp(),t(Vr(n,"network-request-failed"))},timeout:e0.get()})}if(!((i=(r=zt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=zt().gapi)===null||s===void 0)&&s.load)a();else{let h=vm("iframefcb");return zt()[h]=()=>{gapi.load?a():t(Vr(n,"network-request-failed"))},wm(`${oI()}?onload=${h}`).catch(p=>t(p))}}).catch(e=>{throw $a=null,e})}var $a=null;function n0(n){return $a=$a||t0(n),$a}var r0=new Nr(5e3,15e3),i0="__/auth/iframe",s0="emulator/auth/iframe",o0={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},a0=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function c0(n){let e=n.config;W(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Fu(e,s0):`https://${n.config.authDomain}/${i0}`,r={apiKey:e.apiKey,appName:n.name,v:Yn},i=a0.get(n.config.apiHost);i&&(r.eid=i);let s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${zs(r).slice(1)}`}function l0(n){return b(this,null,function*(){let e=yield n0(n),t=zt().gapi;return W(t,n,"internal-error"),e.open({where:document.body,url:c0(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:o0,dontclear:!0},r=>new Promise((i,s)=>b(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let a=Vr(n,"network-request-failed"),h=zt().setTimeout(()=>{s(a)},r0.get());function p(){zt().clearTimeout(h),i(r)}r.ping(p).then(p,()=>{s(a)})})))})}var u0={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},h0=500,d0=600,f0="_blank",p0="http://localhost",ec=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function m0(n,e,t,r=h0,i=d0){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString(),h="",p=Object.assign(Object.assign({},u0),{width:r.toString(),height:i.toString(),top:s,left:a}),m=Me().toLowerCase();t&&(h=dm(m)?f0:t),um(m)&&(e=e||p0,p.scrollbars="yes");let w=Object.entries(p).reduce((k,[x,L])=>`${k}${x}=${L},`,"");if(eI(m)&&h!=="_self")return g0(e||"",h),new ec(null);let y=window.open(e||"",h,w);W(y,n,"popup-blocked");try{y.focus()}catch{}return new ec(y)}function g0(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var y0="__/auth/handler",_0="emulator/auth/handler",w0=encodeURIComponent("fac");function Xp(n,e,t,r,i,s){return b(this,null,function*(){W(n.config.authDomain,n,"auth-domain-config-required"),W(n.config.apiKey,n,"invalid-api-key");let a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Yn,eventId:i};if(e instanceof Ja){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",Ep(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(let[w,y]of Object.entries(s||{}))a[w]=y}if(e instanceof Pu){let w=e.getScopes().filter(y=>y!=="");w.length>0&&(a.scopes=w.join(","))}n.tenantId&&(a.tid=n.tenantId);let h=a;for(let w of Object.keys(h))h[w]===void 0&&delete h[w];let p=yield n._getAppCheckToken(),m=p?`#${w0}=${encodeURIComponent(p)}`:"";return`${v0(n)}?${zs(h).slice(1)}${m}`})}function v0({config:n}){return n.emulator?Fu(n,_0):`https://${n.authDomain}/${y0}`}var yu="webStorageSupport",Ou=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ju,this._completeRedirectFn=WI,this._overrideRedirectResult=$I}_openPopup(e,t,r,i){return b(this,null,function*(){var s;Zn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let a=yield Xp(e,t,r,_u(),i);return m0(e,a,Sm())})}_openRedirect(e,t,r,i){return b(this,null,function*(){yield this._originValidation(e);let s=yield Xp(e,t,r,_u(),i);return SI(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Zn(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return b(this,null,function*(){let t=yield l0(e),r=new Nu(e);return t.register("authEvent",i=>(W(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(yu,{type:yu},i=>{var s;let a=(s=i?.[0])===null||s===void 0?void 0:s[yu];a!==void 0&&t(!!a),Gt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=XI(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ym()||hm()||qu()}},Vm=Ou;var Zp="@firebase/auth",em="1.7.8";var Mu=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return b(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function I0(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function E0(n){Jn(new ft("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:h}=r.options;W(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});let p={apiKey:a,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_m(n)},m=new Au(r,i,s,p);return lI(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Jn(new ft("auth-internal",e=>{let t=Mr(e.getProvider("auth").getImmediate());return(r=>new Mu(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pe(Zp,em,I0(n)),Pe(Zp,em,"esm2017")}var b0=5*60,T0=Jl("authIdTokenMaxAge")||b0,tm=null,A0=n=>e=>b(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>T0)return;let i=t?.token;tm!==i&&(tm=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Yu(n=Pi()){let e=Hs(n,"auth");if(e.isInitialized())return e.getImmediate();let t=$u(n,{popupRedirectResolver:Vm,persistence:[km,Cm,Ju]}),r=Jl("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let a=A0(s.toString());Ku(t,a,()=>a(t.currentUser)),ro(t,h=>a(h))}}let i=Kl("auth");return i&&zu(t,`http://${i}`),t}function C0(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}iI({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let s=Vr("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",C0().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});E0("Browser");function Mm(n){return new Ps(function(e){var t=ro(n,e.next.bind(e),e.error.bind(e),e.complete.bind(e));return{unsubscribe:t}})}var Lm="auth",dn=class{constructor(e){return e}},io=class{constructor(){return Ks(Lm)}};var Xu=new lt("angularfire2.auth-instances");function pE(n,e){let t=La(Lm,n,e);return t&&new dn(t)}function mE(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new dn(r)}}var gE={provide:io,deps:[[new ut,Xu]]},yE={provide:dn,useFactory:pE,deps:[[new ut,Xu],cn]};function Fm(n,...e){return Pe("angularfire",kr.full,"auth"),yi([yE,gE,{provide:Xu,useFactory:mE(n),multi:!0,deps:[jn,Tr,ki,xr,[new ut,Di],...e]}])}var Um=Xe(Mm,!0);var Bm=Xe(Wu,!0);var jm=Xe(Yu,!0);var qm=Xe(Hu,!0);var $m=Xe(Qu,!0);var Gm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wm={};var nr,Zu;(function(){var n;function e(S,v){function I(){}I.prototype=v.prototype,S.D=v.prototype,S.prototype=new I,S.prototype.constructor=S,S.C=function(T,A,C){for(var E=Array(arguments.length-2),mt=2;mt<arguments.length;mt++)E[mt-2]=arguments[mt];return v.prototype[A].apply(T,E)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,v,I){I||(I=0);var T=Array(16);if(typeof v=="string")for(var A=0;16>A;++A)T[A]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(A=0;16>A;++A)T[A]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=S.g[0],I=S.g[1],A=S.g[2];var C=S.g[3],E=v+(C^I&(A^C))+T[0]+3614090360&4294967295;v=I+(E<<7&4294967295|E>>>25),E=C+(A^v&(I^A))+T[1]+3905402710&4294967295,C=v+(E<<12&4294967295|E>>>20),E=A+(I^C&(v^I))+T[2]+606105819&4294967295,A=C+(E<<17&4294967295|E>>>15),E=I+(v^A&(C^v))+T[3]+3250441966&4294967295,I=A+(E<<22&4294967295|E>>>10),E=v+(C^I&(A^C))+T[4]+4118548399&4294967295,v=I+(E<<7&4294967295|E>>>25),E=C+(A^v&(I^A))+T[5]+1200080426&4294967295,C=v+(E<<12&4294967295|E>>>20),E=A+(I^C&(v^I))+T[6]+2821735955&4294967295,A=C+(E<<17&4294967295|E>>>15),E=I+(v^A&(C^v))+T[7]+4249261313&4294967295,I=A+(E<<22&4294967295|E>>>10),E=v+(C^I&(A^C))+T[8]+1770035416&4294967295,v=I+(E<<7&4294967295|E>>>25),E=C+(A^v&(I^A))+T[9]+2336552879&4294967295,C=v+(E<<12&4294967295|E>>>20),E=A+(I^C&(v^I))+T[10]+4294925233&4294967295,A=C+(E<<17&4294967295|E>>>15),E=I+(v^A&(C^v))+T[11]+2304563134&4294967295,I=A+(E<<22&4294967295|E>>>10),E=v+(C^I&(A^C))+T[12]+1804603682&4294967295,v=I+(E<<7&4294967295|E>>>25),E=C+(A^v&(I^A))+T[13]+4254626195&4294967295,C=v+(E<<12&4294967295|E>>>20),E=A+(I^C&(v^I))+T[14]+2792965006&4294967295,A=C+(E<<17&4294967295|E>>>15),E=I+(v^A&(C^v))+T[15]+1236535329&4294967295,I=A+(E<<22&4294967295|E>>>10),E=v+(A^C&(I^A))+T[1]+4129170786&4294967295,v=I+(E<<5&4294967295|E>>>27),E=C+(I^A&(v^I))+T[6]+3225465664&4294967295,C=v+(E<<9&4294967295|E>>>23),E=A+(v^I&(C^v))+T[11]+643717713&4294967295,A=C+(E<<14&4294967295|E>>>18),E=I+(C^v&(A^C))+T[0]+3921069994&4294967295,I=A+(E<<20&4294967295|E>>>12),E=v+(A^C&(I^A))+T[5]+3593408605&4294967295,v=I+(E<<5&4294967295|E>>>27),E=C+(I^A&(v^I))+T[10]+38016083&4294967295,C=v+(E<<9&4294967295|E>>>23),E=A+(v^I&(C^v))+T[15]+3634488961&4294967295,A=C+(E<<14&4294967295|E>>>18),E=I+(C^v&(A^C))+T[4]+3889429448&4294967295,I=A+(E<<20&4294967295|E>>>12),E=v+(A^C&(I^A))+T[9]+568446438&4294967295,v=I+(E<<5&4294967295|E>>>27),E=C+(I^A&(v^I))+T[14]+3275163606&4294967295,C=v+(E<<9&4294967295|E>>>23),E=A+(v^I&(C^v))+T[3]+4107603335&4294967295,A=C+(E<<14&4294967295|E>>>18),E=I+(C^v&(A^C))+T[8]+1163531501&4294967295,I=A+(E<<20&4294967295|E>>>12),E=v+(A^C&(I^A))+T[13]+2850285829&4294967295,v=I+(E<<5&4294967295|E>>>27),E=C+(I^A&(v^I))+T[2]+4243563512&4294967295,C=v+(E<<9&4294967295|E>>>23),E=A+(v^I&(C^v))+T[7]+1735328473&4294967295,A=C+(E<<14&4294967295|E>>>18),E=I+(C^v&(A^C))+T[12]+2368359562&4294967295,I=A+(E<<20&4294967295|E>>>12),E=v+(I^A^C)+T[5]+4294588738&4294967295,v=I+(E<<4&4294967295|E>>>28),E=C+(v^I^A)+T[8]+2272392833&4294967295,C=v+(E<<11&4294967295|E>>>21),E=A+(C^v^I)+T[11]+1839030562&4294967295,A=C+(E<<16&4294967295|E>>>16),E=I+(A^C^v)+T[14]+4259657740&4294967295,I=A+(E<<23&4294967295|E>>>9),E=v+(I^A^C)+T[1]+2763975236&4294967295,v=I+(E<<4&4294967295|E>>>28),E=C+(v^I^A)+T[4]+1272893353&4294967295,C=v+(E<<11&4294967295|E>>>21),E=A+(C^v^I)+T[7]+4139469664&4294967295,A=C+(E<<16&4294967295|E>>>16),E=I+(A^C^v)+T[10]+3200236656&4294967295,I=A+(E<<23&4294967295|E>>>9),E=v+(I^A^C)+T[13]+681279174&4294967295,v=I+(E<<4&4294967295|E>>>28),E=C+(v^I^A)+T[0]+3936430074&4294967295,C=v+(E<<11&4294967295|E>>>21),E=A+(C^v^I)+T[3]+3572445317&4294967295,A=C+(E<<16&4294967295|E>>>16),E=I+(A^C^v)+T[6]+76029189&4294967295,I=A+(E<<23&4294967295|E>>>9),E=v+(I^A^C)+T[9]+3654602809&4294967295,v=I+(E<<4&4294967295|E>>>28),E=C+(v^I^A)+T[12]+3873151461&4294967295,C=v+(E<<11&4294967295|E>>>21),E=A+(C^v^I)+T[15]+530742520&4294967295,A=C+(E<<16&4294967295|E>>>16),E=I+(A^C^v)+T[2]+3299628645&4294967295,I=A+(E<<23&4294967295|E>>>9),E=v+(A^(I|~C))+T[0]+4096336452&4294967295,v=I+(E<<6&4294967295|E>>>26),E=C+(I^(v|~A))+T[7]+1126891415&4294967295,C=v+(E<<10&4294967295|E>>>22),E=A+(v^(C|~I))+T[14]+2878612391&4294967295,A=C+(E<<15&4294967295|E>>>17),E=I+(C^(A|~v))+T[5]+4237533241&4294967295,I=A+(E<<21&4294967295|E>>>11),E=v+(A^(I|~C))+T[12]+1700485571&4294967295,v=I+(E<<6&4294967295|E>>>26),E=C+(I^(v|~A))+T[3]+2399980690&4294967295,C=v+(E<<10&4294967295|E>>>22),E=A+(v^(C|~I))+T[10]+4293915773&4294967295,A=C+(E<<15&4294967295|E>>>17),E=I+(C^(A|~v))+T[1]+2240044497&4294967295,I=A+(E<<21&4294967295|E>>>11),E=v+(A^(I|~C))+T[8]+1873313359&4294967295,v=I+(E<<6&4294967295|E>>>26),E=C+(I^(v|~A))+T[15]+4264355552&4294967295,C=v+(E<<10&4294967295|E>>>22),E=A+(v^(C|~I))+T[6]+2734768916&4294967295,A=C+(E<<15&4294967295|E>>>17),E=I+(C^(A|~v))+T[13]+1309151649&4294967295,I=A+(E<<21&4294967295|E>>>11),E=v+(A^(I|~C))+T[4]+4149444226&4294967295,v=I+(E<<6&4294967295|E>>>26),E=C+(I^(v|~A))+T[11]+3174756917&4294967295,C=v+(E<<10&4294967295|E>>>22),E=A+(v^(C|~I))+T[2]+718787259&4294967295,A=C+(E<<15&4294967295|E>>>17),E=I+(C^(A|~v))+T[9]+3951481745&4294967295,S.g[0]=S.g[0]+v&4294967295,S.g[1]=S.g[1]+(A+(E<<21&4294967295|E>>>11))&4294967295,S.g[2]=S.g[2]+A&4294967295,S.g[3]=S.g[3]+C&4294967295}r.prototype.u=function(S,v){v===void 0&&(v=S.length);for(var I=v-this.blockSize,T=this.B,A=this.h,C=0;C<v;){if(A==0)for(;C<=I;)i(this,S,C),C+=this.blockSize;if(typeof S=="string"){for(;C<v;)if(T[A++]=S.charCodeAt(C++),A==this.blockSize){i(this,T),A=0;break}}else for(;C<v;)if(T[A++]=S[C++],A==this.blockSize){i(this,T),A=0;break}}this.h=A,this.o+=v},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var v=1;v<S.length-8;++v)S[v]=0;var I=8*this.o;for(v=S.length-8;v<S.length;++v)S[v]=I&255,I/=256;for(this.u(S),S=Array(16),v=I=0;4>v;++v)for(var T=0;32>T;T+=8)S[I++]=this.g[v]>>>T&255;return S};function s(S,v){var I=h;return Object.prototype.hasOwnProperty.call(I,S)?I[S]:I[S]=v(S)}function a(S,v){this.h=v;for(var I=[],T=!0,A=S.length-1;0<=A;A--){var C=S[A]|0;T&&C==v||(I[A]=C,T=!1)}this.g=I}var h={};function p(S){return-128<=S&&128>S?s(S,function(v){return new a([v|0],0>v?-1:0)}):new a([S|0],0>S?-1:0)}function m(S){if(isNaN(S)||!isFinite(S))return y;if(0>S)return N(m(-S));for(var v=[],I=1,T=0;S>=I;T++)v[T]=S/I|0,I*=4294967296;return new a(v,0)}function w(S,v){if(S.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(S.charAt(0)=="-")return N(w(S.substring(1),v));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=m(Math.pow(v,8)),T=y,A=0;A<S.length;A+=8){var C=Math.min(8,S.length-A),E=parseInt(S.substring(A,A+C),v);8>C?(C=m(Math.pow(v,C)),T=T.j(C).add(m(E))):(T=T.j(I),T=T.add(m(E)))}return T}var y=p(0),k=p(1),x=p(16777216);n=a.prototype,n.m=function(){if(B(this))return-N(this).m();for(var S=0,v=1,I=0;I<this.g.length;I++){var T=this.i(I);S+=(0<=T?T:4294967296+T)*v,v*=4294967296}return S},n.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(L(this))return"0";if(B(this))return"-"+N(this).toString(S);for(var v=m(Math.pow(S,6)),I=this,T="";;){var A=ue(I,v).g;I=K(I,A.j(v));var C=((0<I.g.length?I.g[0]:I.h)>>>0).toString(S);if(I=A,L(I))return C+T;for(;6>C.length;)C="0"+C;T=C+T}},n.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function L(S){if(S.h!=0)return!1;for(var v=0;v<S.g.length;v++)if(S.g[v]!=0)return!1;return!0}function B(S){return S.h==-1}n.l=function(S){return S=K(this,S),B(S)?-1:L(S)?0:1};function N(S){for(var v=S.g.length,I=[],T=0;T<v;T++)I[T]=~S.g[T];return new a(I,~S.h).add(k)}n.abs=function(){return B(this)?N(this):this},n.add=function(S){for(var v=Math.max(this.g.length,S.g.length),I=[],T=0,A=0;A<=v;A++){var C=T+(this.i(A)&65535)+(S.i(A)&65535),E=(C>>>16)+(this.i(A)>>>16)+(S.i(A)>>>16);T=E>>>16,C&=65535,E&=65535,I[A]=E<<16|C}return new a(I,I[I.length-1]&-2147483648?-1:0)};function K(S,v){return S.add(N(v))}n.j=function(S){if(L(this)||L(S))return y;if(B(this))return B(S)?N(this).j(N(S)):N(N(this).j(S));if(B(S))return N(this.j(N(S)));if(0>this.l(x)&&0>S.l(x))return m(this.m()*S.m());for(var v=this.g.length+S.g.length,I=[],T=0;T<2*v;T++)I[T]=0;for(T=0;T<this.g.length;T++)for(var A=0;A<S.g.length;A++){var C=this.i(T)>>>16,E=this.i(T)&65535,mt=S.i(A)>>>16,vn=S.i(A)&65535;I[2*T+2*A]+=E*vn,Y(I,2*T+2*A),I[2*T+2*A+1]+=C*vn,Y(I,2*T+2*A+1),I[2*T+2*A+1]+=E*mt,Y(I,2*T+2*A+1),I[2*T+2*A+2]+=C*mt,Y(I,2*T+2*A+2)}for(T=0;T<v;T++)I[T]=I[2*T+1]<<16|I[2*T];for(T=v;T<2*v;T++)I[T]=0;return new a(I,0)};function Y(S,v){for(;(S[v]&65535)!=S[v];)S[v+1]+=S[v]>>>16,S[v]&=65535,v++}function Z(S,v){this.g=S,this.h=v}function ue(S,v){if(L(v))throw Error("division by zero");if(L(S))return new Z(y,y);if(B(S))return v=ue(N(S),v),new Z(N(v.g),N(v.h));if(B(v))return v=ue(S,N(v)),new Z(N(v.g),v.h);if(30<S.g.length){if(B(S)||B(v))throw Error("slowDivide_ only works with positive integers.");for(var I=k,T=v;0>=T.l(S);)I=be(I),T=be(T);var A=se(I,1),C=se(T,1);for(T=se(T,2),I=se(I,2);!L(T);){var E=C.add(T);0>=E.l(S)&&(A=A.add(I),C=E),T=se(T,1),I=se(I,1)}return v=K(S,A.j(v)),new Z(A,v)}for(A=y;0<=S.l(v);){for(I=Math.max(1,Math.floor(S.m()/v.m())),T=Math.ceil(Math.log(I)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),C=m(I),E=C.j(v);B(E)||0<E.l(S);)I-=T,C=m(I),E=C.j(v);L(C)&&(C=k),A=A.add(C),S=K(S,E)}return new Z(A,S)}n.A=function(S){return ue(this,S).h},n.and=function(S){for(var v=Math.max(this.g.length,S.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)&S.i(T);return new a(I,this.h&S.h)},n.or=function(S){for(var v=Math.max(this.g.length,S.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)|S.i(T);return new a(I,this.h|S.h)},n.xor=function(S){for(var v=Math.max(this.g.length,S.g.length),I=[],T=0;T<v;T++)I[T]=this.i(T)^S.i(T);return new a(I,this.h^S.h)};function be(S){for(var v=S.g.length+1,I=[],T=0;T<v;T++)I[T]=S.i(T)<<1|S.i(T-1)>>>31;return new a(I,S.h)}function se(S,v){var I=v>>5;v%=32;for(var T=S.g.length-I,A=[],C=0;C<T;C++)A[C]=0<v?S.i(C+I)>>>v|S.i(C+I+1)<<32-v:S.i(C+I);return new a(A,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Zu=Wm.Md5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=m,a.fromString=w,nr=Wm.Integer=a}).apply(typeof Gm<"u"?Gm:typeof self<"u"?self:typeof window<"u"?window:{});var rc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fn={};var eh,th,Ni,nh,so,ic,rh,ih,sh;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,d){return o==Array.prototype||o==Object.prototype||(o[u]=d.value),o};function t(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof rc=="object"&&rc];for(var u=0;u<o.length;++u){var d=o[u];if(d&&d.Math==Math)return d}throw Error("Cannot find global object")}var r=t(this);function i(o,u){if(u)e:{var d=r;o=o.split(".");for(var g=0;g<o.length-1;g++){var P=o[g];if(!(P in d))break e;d=d[P]}o=o[o.length-1],g=d[o],u=u(g),u!=g&&u!=null&&e(d,o,{configurable:!0,writable:!0,value:u})}}function s(o,u){o instanceof String&&(o+="");var d=0,g=!1,P={next:function(){if(!g&&d<o.length){var D=d++;return{value:u(D,o[D]),done:!1}}return g=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}i("Array.prototype.values",function(o){return o||function(){return s(this,function(u,d){return d})}});var a=a||{},h=this||self;function p(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function m(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function w(o,u,d){return o.call.apply(o.bind,arguments)}function y(o,u,d){if(!o)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,g),o.apply(u,P)}}return function(){return o.apply(u,arguments)}}function k(o,u,d){return k=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?w:y,k.apply(null,arguments)}function x(o,u){var d=Array.prototype.slice.call(arguments,1);return function(){var g=d.slice();return g.push.apply(g,arguments),o.apply(this,g)}}function L(o,u){function d(){}d.prototype=u.prototype,o.aa=u.prototype,o.prototype=new d,o.prototype.constructor=o,o.Qb=function(g,P,D){for(var M=Array(arguments.length-2),le=2;le<arguments.length;le++)M[le-2]=arguments[le];return u.prototype[P].apply(g,M)}}function B(o){let u=o.length;if(0<u){let d=Array(u);for(let g=0;g<u;g++)d[g]=o[g];return d}return[]}function N(o,u){for(let d=1;d<arguments.length;d++){let g=arguments[d];if(p(g)){let P=o.length||0,D=g.length||0;o.length=P+D;for(let M=0;M<D;M++)o[P+M]=g[M]}else o.push(g)}}class K{constructor(u,d){this.i=u,this.j=d,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function Y(o){return/^[\s\xa0]*$/.test(o)}function Z(){var o=h.navigator;return o&&(o=o.userAgent)?o:""}function ue(o){return ue[" "](o),o}ue[" "]=function(){};var be=Z().indexOf("Gecko")!=-1&&!(Z().toLowerCase().indexOf("webkit")!=-1&&Z().indexOf("Edge")==-1)&&!(Z().indexOf("Trident")!=-1||Z().indexOf("MSIE")!=-1)&&Z().indexOf("Edge")==-1;function se(o,u,d){for(let g in o)u.call(d,o[g],g,o)}function S(o,u){for(let d in o)u.call(void 0,o[d],d,o)}function v(o){let u={};for(let d in o)u[d]=o[d];return u}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(o,u){let d,g;for(let P=1;P<arguments.length;P++){g=arguments[P];for(d in g)o[d]=g[d];for(let D=0;D<I.length;D++)d=I[D],Object.prototype.hasOwnProperty.call(g,d)&&(o[d]=g[d])}}function A(o){var u=1;o=o.split(":");let d=[];for(;0<u&&o.length;)d.push(o.shift()),u--;return o.length&&d.push(o.join(":")),d}function C(o){h.setTimeout(()=>{throw o},0)}function E(){var o=En;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class mt{constructor(){this.h=this.g=null}add(u,d){let g=vn.get();g.set(u,d),this.h?this.h.next=g:this.g=g,this.h=g}}var vn=new K(()=>new is,o=>o.reset());class is{constructor(){this.next=this.g=this.h=null}set(u,d){this.h=u,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}}let In,Xt=!1,En=new mt,tt=()=>{let o=h.Promise.resolve(void 0);In=()=>{o.then(bn)}};var bn=()=>{for(var o;o=E();){try{o.h.call(o.g)}catch(d){C(d)}var u=vn;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}Xt=!1};function $e(){this.s=this.s,this.C=this.C}$e.prototype.s=!1,$e.prototype.ma=function(){this.s||(this.s=!0,this.N())},$e.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ve(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}Ve.prototype.h=function(){this.defaultPrevented=!0};var Tn=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{let d=()=>{};h.addEventListener("test",d,u),h.removeEventListener("test",d,u)}catch{}return o}();function gt(o,u){if(Ve.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var d=this.type=o.type,g=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(be){e:{try{ue(u.nodeName);var P=!0;break e}catch{}P=!1}P||(u=null)}}else d=="mouseover"?u=o.fromElement:d=="mouseout"&&(u=o.toElement);this.relatedTarget=u,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:xo[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&gt.aa.h.call(this)}}L(gt,Ve);var xo={2:"touch",3:"pen",4:"mouse"};gt.prototype.h=function(){gt.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Pt="closure_listenable_"+(1e6*Math.random()|0),ss=0;function rl(o,u,d,g,P){this.listener=o,this.proxy=null,this.src=u,this.type=d,this.capture=!!g,this.ha=P,this.key=++ss,this.da=this.fa=!1}function An(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Cn(o){this.src=o,this.g={},this.h=0}Cn.prototype.add=function(o,u,d,g,P){var D=o.toString();o=this.g[D],o||(o=this.g[D]=[],this.h++);var M=os(o,u,g,P);return-1<M?(u=o[M],d||(u.fa=!1)):(u=new rl(u,this.src,D,!!g,P),u.fa=d,o.push(u)),u};function Sn(o,u){var d=u.type;if(d in o.g){var g=o.g[d],P=Array.prototype.indexOf.call(g,u,void 0),D;(D=0<=P)&&Array.prototype.splice.call(g,P,1),D&&(An(u),o.g[d].length==0&&(delete o.g[d],o.h--))}}function os(o,u,d,g){for(var P=0;P<o.length;++P){var D=o[P];if(!D.da&&D.listener==u&&D.capture==!!d&&D.ha==g)return P}return-1}var Fe="closure_lm_"+(1e6*Math.random()|0),nt={};function Vo(o,u,d,g,P){if(g&&g.once)return as(o,u,d,g,P);if(Array.isArray(u)){for(var D=0;D<u.length;D++)Vo(o,u[D],d,g,P);return null}return d=Te(d),o&&o[Pt]?o.K(u,d,m(g)?!!g.capture:!!g,P):ze(o,u,d,!1,g,P)}function ze(o,u,d,g,P,D){if(!u)throw Error("Invalid event type");var M=m(P)?!!P.capture:!!P,le=yt(o);if(le||(o[Fe]=le=new Cn(o)),d=le.add(u,d,g,M,D),d.proxy)return d;if(g=Jr(),d.proxy=g,g.src=o,g.listener=d,o.addEventListener)Tn||(P=M),P===void 0&&(P=!1),o.addEventListener(u.toString(),g,P);else if(o.attachEvent)o.attachEvent(rt(u.toString()),g);else if(o.addListener&&o.removeListener)o.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return d}function Jr(){function o(d){return u.call(o.src,o.listener,d)}let u=Rt;return o}function as(o,u,d,g,P){if(Array.isArray(u)){for(var D=0;D<u.length;D++)as(o,u[D],d,g,P);return null}return d=Te(d),o&&o[Pt]?o.L(u,d,m(g)?!!g.capture:!!g,P):ze(o,u,d,!0,g,P)}function cs(o,u,d,g,P){if(Array.isArray(u))for(var D=0;D<u.length;D++)cs(o,u[D],d,g,P);else g=m(g)?!!g.capture:!!g,d=Te(d),o&&o[Pt]?(o=o.i,u=String(u).toString(),u in o.g&&(D=o.g[u],d=os(D,d,g,P),-1<d&&(An(D[d]),Array.prototype.splice.call(D,d,1),D.length==0&&(delete o.g[u],o.h--)))):o&&(o=yt(o))&&(u=o.g[u.toString()],o=-1,u&&(o=os(u,d,g,P)),(d=-1<o?u[o]:null)&&ee(d))}function ee(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[Pt])Sn(u.i,o);else{var d=o.type,g=o.proxy;u.removeEventListener?u.removeEventListener(d,g,o.capture):u.detachEvent?u.detachEvent(rt(d),g):u.addListener&&u.removeListener&&u.removeListener(g),(d=yt(u))?(Sn(d,o),d.h==0&&(d.src=null,u[Fe]=null)):An(o)}}}function rt(o){return o in nt?nt[o]:nt[o]="on"+o}function Rt(o,u){if(o.da)o=!0;else{u=new gt(u,this);var d=o.listener,g=o.ha||o.src;o.fa&&ee(o),o=d.call(g,u)}return o}function yt(o){return o=o[Fe],o instanceof Cn?o:null}var ve="__closure_events_fn_"+(1e9*Math.random()>>>0);function Te(o){return typeof o=="function"?o:(o[ve]||(o[ve]=function(u){return o.handleEvent(u)}),o[ve])}function Ae(){$e.call(this),this.i=new Cn(this),this.M=this,this.F=null}L(Ae,$e),Ae.prototype[Pt]=!0,Ae.prototype.removeEventListener=function(o,u,d,g){cs(this,o,u,d,g)};function Ne(o,u){var d,g=o.F;if(g)for(d=[];g;g=g.F)d.push(g);if(o=o.M,g=u.type||u,typeof u=="string")u=new Ve(u,o);else if(u instanceof Ve)u.target=u.target||o;else{var P=u;u=new Ve(g,o),T(u,P)}if(P=!0,d)for(var D=d.length-1;0<=D;D--){var M=u.g=d[D];P=Dt(M,g,!0,u)&&P}if(M=u.g=o,P=Dt(M,g,!0,u)&&P,P=Dt(M,g,!1,u)&&P,d)for(D=0;D<d.length;D++)M=u.g=d[D],P=Dt(M,g,!1,u)&&P}Ae.prototype.N=function(){if(Ae.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var d=o.g[u],g=0;g<d.length;g++)An(d[g]);delete o.g[u],o.h--}}this.F=null},Ae.prototype.K=function(o,u,d,g){return this.i.add(String(o),u,!1,d,g)},Ae.prototype.L=function(o,u,d,g){return this.i.add(String(o),u,!0,d,g)};function Dt(o,u,d,g){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var P=!0,D=0;D<u.length;++D){var M=u[D];if(M&&!M.da&&M.capture==d){var le=M.listener,Ce=M.ha||M.src;M.fa&&Sn(o.i,M),P=le.call(Ce,g)!==!1&&P}}return P&&!g.defaultPrevented}function Ue(o,u,d){if(typeof o=="function")d&&(o=k(o,d));else if(o&&typeof o.handleEvent=="function")o=k(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:h.setTimeout(o,u||0)}function No(o){o.g=Ue(()=>{o.g=null,o.i&&(o.i=!1,No(o))},o.l);let u=o.h;o.h=null,o.m.apply(null,u)}class Oo extends $e{constructor(u,d){super(),this.m=u,this.l=d,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:No(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pn(o){$e.call(this),this.h=o,this.g={}}L(Pn,$e);var Yr=[];function Mo(o){se(o.g,function(u,d){this.g.hasOwnProperty(d)&&ee(u)},o),o.g={}}Pn.prototype.N=function(){Pn.aa.N.call(this),Mo(this)},Pn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xr=h.JSON.stringify,il=h.JSON.parse,sl=class{stringify(o){return h.JSON.stringify(o,void 0)}parse(o){return h.JSON.parse(o,void 0)}};function _t(){}_t.prototype.h=null;function Lo(o){return o.h||(o.h=o.i())}function Fo(){}var cr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ls(){Ve.call(this,"d")}L(ls,Ve);function us(){Ve.call(this,"c")}L(us,Ve);var wt={},Uo=null;function Zr(){return Uo=Uo||new Ae}wt.La="serverreachability";function kt(o){Ve.call(this,wt.La,o)}L(kt,Ve);function lr(o){let u=Zr();Ne(u,new kt(u))}wt.STAT_EVENT="statevent";function Bo(o,u){Ve.call(this,wt.STAT_EVENT,o),this.stat=u}L(Bo,Ve);function Be(o){let u=Zr();Ne(u,new Bo(u,o))}wt.Ma="timingevent";function ei(o,u){Ve.call(this,wt.Ma,o),this.size=u}L(ei,Ve);function ur(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){o()},u)}function hr(){this.g=!0}hr.prototype.xa=function(){this.g=!1};function ol(o,u,d,g,P,D){o.info(function(){if(o.g)if(D)for(var M="",le=D.split("&"),Ce=0;Ce<le.length;Ce++){var re=le[Ce].split("=");if(1<re.length){var xe=re[0];re=re[1];var Oe=xe.split("_");M=2<=Oe.length&&Oe[1]=="type"?M+(xe+"="+re+"&"):M+(xe+"=redacted&")}}else M=null;else M=D;return"XMLHTTP REQ ("+g+") [attempt "+P+"]: "+u+`
`+d+`
`+M})}function al(o,u,d,g,P,D,M){o.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+P+"]: "+u+`
`+d+`
`+D+" "+M})}function Rn(o,u,d,g){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+cl(o,d)+(g?" "+g:"")})}function he(o,u){o.info(function(){return"TIMEOUT: "+u})}hr.prototype.info=function(){};function cl(o,u){if(!o.g)return u;if(!u)return null;try{var d=JSON.parse(u);if(d){for(o=0;o<d.length;o++)if(Array.isArray(d[o])){var g=d[o];if(!(2>g.length)){var P=g[1];if(Array.isArray(P)&&!(1>P.length)){var D=P[0];if(D!="noop"&&D!="stop"&&D!="close")for(var M=1;M<P.length;M++)P[M]=""}}}}return Xr(d)}catch{return u}}var ti={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},jo={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hs;function ni(){}L(ni,_t),ni.prototype.g=function(){return new XMLHttpRequest},ni.prototype.i=function(){return{}},hs=new ni;function xt(o,u,d,g){this.j=o,this.i=u,this.l=d,this.R=g||1,this.U=new Pn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new ri}function ri(){this.i=null,this.g="",this.h=!1}var Dn={},ii={};function kn(o,u,d){o.L=1,o.v=li(Ge(u)),o.m=d,o.P=!0,pe(o,null)}function pe(o,u){o.F=Date.now(),si(o),o.A=Ge(o.v);var d=o.A,g=o.R;Array.isArray(g)||(g=[String(g)]),Zo(d.i,"t",g),o.C=0,d=o.j.J,o.h=new ri,o.g=As(o.j,d?u:null,!o.m),0<o.O&&(o.M=new Oo(k(o.Y,o,o.g),o.O)),u=o.U,d=o.g,g=o.ca;var P="readystatechange";Array.isArray(P)||(P&&(Yr[0]=P.toString()),P=Yr);for(var D=0;D<P.length;D++){var M=Vo(d,P[D],g||u.handleEvent,!1,u.h||u);if(!M)break;u.g[M.key]=M}u=o.H?v(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),lr(),ol(o.i,o.u,o.A,o.l,o.R,o.m)}xt.prototype.ca=function(o){o=o.target;let u=this.M;u&&It(o)==3?u.j():this.Y(o)},xt.prototype.Y=function(o){try{if(o==this.g)e:{let Oe=It(this.g);var u=this.g.Ba();let nn=this.g.Z();if(!(3>Oe)&&(Oe!=3||this.g&&(this.h.h||this.g.oa()||ca(this.g)))){this.J||Oe!=4||u==7||(u==8||0>=nn?lr(3):lr(2)),fs(this);var d=this.g.Z();this.X=d;t:if(qo(this)){var g=ca(this.g);o="";var P=g.length,D=It(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Zt(this),dr(this);var M="";break t}this.h.i=new h.TextDecoder}for(u=0;u<P;u++)this.h.h=!0,o+=this.h.i.decode(g[u],{stream:!(D&&u==P-1)});g.length=0,this.h.g+=o,this.C=0,M=this.h.g}else M=this.g.oa();if(this.o=d==200,al(this.i,this.u,this.A,this.l,this.R,Oe,d),this.o){if(this.T&&!this.K){t:{if(this.g){var le,Ce=this.g;if((le=Ce.g?Ce.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(le)){var re=le;break t}}re=null}if(d=re)Rn(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oi(this,d);else{this.o=!1,this.s=3,Be(12),Zt(this),dr(this);break e}}if(this.P){d=!0;let Ye;for(;!this.J&&this.C<M.length;)if(Ye=ll(this,M),Ye==ii){Oe==4&&(this.s=4,Be(14),d=!1),Rn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ye==Dn){this.s=4,Be(15),Rn(this.i,this.l,M,"[Invalid Chunk]"),d=!1;break}else Rn(this.i,this.l,Ye,null),oi(this,Ye);if(qo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||M.length!=0||this.h.h||(this.s=1,Be(16),d=!1),this.o=this.o&&d,!d)Rn(this.i,this.l,M,"[Invalid Chunked Response]"),Zt(this),dr(this);else if(0<M.length&&!this.W){this.W=!0;var xe=this.j;xe.g==this&&xe.ba&&!xe.M&&(xe.j.info("Great, no buffering proxy detected. Bytes received: "+M.length),vr(xe),xe.M=!0,Be(11))}}else Rn(this.i,this.l,M,null),oi(this,M);Oe==4&&Zt(this),this.o&&!this.J&&(Oe==4?Is(this.j,this):(this.o=!1,si(this)))}else wl(this.g),d==400&&0<M.indexOf("Unknown SID")?(this.s=3,Be(12)):(this.s=0,Be(13)),Zt(this),dr(this)}}}catch{}finally{}};function qo(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function ll(o,u){var d=o.C,g=u.indexOf(`
`,d);return g==-1?ii:(d=Number(u.substring(d,g)),isNaN(d)?Dn:(g+=1,g+d>u.length?ii:(u=u.slice(g,g+d),o.C=g+d,u)))}xt.prototype.cancel=function(){this.J=!0,Zt(this)};function si(o){o.S=Date.now()+o.I,ds(o,o.I)}function ds(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=ur(k(o.ba,o),u)}function fs(o){o.B&&(h.clearTimeout(o.B),o.B=null)}xt.prototype.ba=function(){this.B=null;let o=Date.now();0<=o-this.S?(he(this.i,this.A),this.L!=2&&(lr(),Be(17)),Zt(this),this.s=2,dr(this)):ds(this,this.S-o)};function dr(o){o.j.G==0||o.J||Is(o.j,o)}function Zt(o){fs(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,Mo(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function oi(o,u){try{var d=o.j;if(d.G!=0&&(d.g==o||ms(d.h,o))){if(!o.K&&ms(d.h,o)&&d.G==3){try{var g=d.Da.g.parse(u)}catch{g=null}if(Array.isArray(g)&&g.length==3){var P=g;if(P[0]==0){e:if(!d.u){if(d.g)if(d.g.F+3e3<o.F)pi(d),_r(d);else break e;fi(d),Be(18)}}else d.za=P[1],0<d.za-d.T&&37500>P[2]&&d.F&&d.v==0&&!d.C&&(d.C=ur(k(d.Za,d),6e3));if(1>=zo(d.h)&&d.ca){try{d.ca()}catch{}d.ca=void 0}}else Ot(d,11)}else if((o.K||d.g==o)&&pi(d),!Y(u))for(P=d.Da.g.parse(u),u=0;u<P.length;u++){let re=P[u];if(d.T=re[0],re=re[1],d.G==2)if(re[0]=="c"){d.K=re[1],d.ia=re[2];let xe=re[3];xe!=null&&(d.la=xe,d.j.info("VER="+d.la));let Oe=re[4];Oe!=null&&(d.Aa=Oe,d.j.info("SVER="+d.Aa));let nn=re[5];nn!=null&&typeof nn=="number"&&0<nn&&(g=1.5*nn,d.L=g,d.j.info("backChannelRequestTimeoutMs_="+g)),g=d;let Ye=o.g;if(Ye){let mi=Ye.g?Ye.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(mi){var D=g.h;D.g||mi.indexOf("spdy")==-1&&mi.indexOf("quic")==-1&&mi.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(gs(D,D.h),D.h=null))}if(g.D){let Ss=Ye.g?Ye.g.getResponseHeader("X-HTTP-Session-Id"):null;Ss&&(g.ya=Ss,de(g.I,g.D,Ss))}}d.G=3,d.l&&d.l.ua(),d.ba&&(d.R=Date.now()-o.F,d.j.info("Handshake RTT: "+d.R+"ms")),g=d;var M=o;if(g.qa=Ts(g,g.J?g.ia:null,g.W),M.K){Go(g.h,M);var le=M,Ce=g.L;Ce&&(le.I=Ce),le.B&&(fs(le),si(le)),g.g=M}else vs(g);0<d.i.length&&hi(d)}else re[0]!="stop"&&re[0]!="close"||Ot(d,7);else d.G==3&&(re[0]=="stop"||re[0]=="close"?re[0]=="stop"?Ot(d,7):Fn(d):re[0]!="noop"&&d.l&&d.l.ta(re),d.v=0)}}lr(4)}catch{}}var ul=class{constructor(o,u){this.g=o,this.map=u}};function ps(o){this.l=o||10,h.PerformanceNavigationTiming?(o=h.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function $o(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function zo(o){return o.h?1:o.g?o.g.size:0}function ms(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function gs(o,u){o.g?o.g.add(u):o.h=u}function Go(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}ps.prototype.cancel=function(){if(this.i=Wo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let o of this.g.values())o.cancel();this.g.clear()}};function Wo(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(let d of o.g.values())u=u.concat(d.D);return u}return B(o.i)}function hl(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(p(o)){for(var u=[],d=o.length,g=0;g<d;g++)u.push(o[g]);return u}u=[],d=0;for(g in o)u[d++]=o[g];return u}function Ho(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(p(o)||typeof o=="string"){var u=[];o=o.length;for(var d=0;d<o;d++)u.push(d);return u}u=[],d=0;for(let g in o)u[d++]=g;return u}}}function Ko(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(p(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var d=Ho(o),g=hl(o),P=g.length,D=0;D<P;D++)u.call(void 0,g[D],d&&d[D],o)}var ys=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function dl(o,u){if(o){o=o.split("&");for(var d=0;d<o.length;d++){var g=o[d].indexOf("="),P=null;if(0<=g){var D=o[d].substring(0,g);P=o[d].substring(g+1)}else D=o[d];u(D,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function en(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof en){this.h=o.h,fr(this,o.j),this.o=o.o,this.g=o.g,ai(this,o.s),this.l=o.l;var u=o.i,d=new Vn;d.i=u.i,u.g&&(d.g=new Map(u.g),d.h=u.h),ci(this,d),this.m=o.m}else o&&(u=String(o).match(ys))?(this.h=!1,fr(this,u[1]||"",!0),this.o=pr(u[2]||""),this.g=pr(u[3]||"",!0),ai(this,u[4]),this.l=pr(u[5]||"",!0),ci(this,u[6]||"",!0),this.m=pr(u[7]||"")):(this.h=!1,this.i=new Vn(null,this.h))}en.prototype.toString=function(){var o=[],u=this.j;u&&o.push(mr(u,Qo,!0),":");var d=this.g;return(d||u=="file")&&(o.push("//"),(u=this.o)&&o.push(mr(u,Qo,!0),"@"),o.push(encodeURIComponent(String(d)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d=this.s,d!=null&&o.push(":",String(d))),(d=this.l)&&(this.g&&d.charAt(0)!="/"&&o.push("/"),o.push(mr(d,d.charAt(0)=="/"?xn:pl,!0))),(d=this.i.toString())&&o.push("?",d),(d=this.m)&&o.push("#",mr(d,Jo)),o.join("")};function Ge(o){return new en(o)}function fr(o,u,d){o.j=d?pr(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function ai(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function ci(o,u,d){u instanceof Vn?(o.i=u,gl(o.i,o.h)):(d||(u=mr(u,ml)),o.i=new Vn(u,o.h))}function de(o,u,d){o.i.set(u,d)}function li(o){return de(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function pr(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function mr(o,u,d){return typeof o=="string"?(o=encodeURI(o).replace(u,fl),d&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function fl(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Qo=/[#\/\?@]/g,pl=/[#\?:]/g,xn=/[#\?]/g,ml=/[#\?@]/g,Jo=/#/g;function Vn(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function Vt(o){o.g||(o.g=new Map,o.h=0,o.i&&dl(o.i,function(u,d){o.add(decodeURIComponent(u.replace(/\+/g," ")),d)}))}n=Vn.prototype,n.add=function(o,u){Vt(this),this.i=null,o=Nn(this,o);var d=this.g.get(o);return d||this.g.set(o,d=[]),d.push(u),this.h+=1,this};function Yo(o,u){Vt(o),u=Nn(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function Xo(o,u){return Vt(o),u=Nn(o,u),o.g.has(u)}n.forEach=function(o,u){Vt(this),this.g.forEach(function(d,g){d.forEach(function(P){o.call(u,P,g,this)},this)},this)},n.na=function(){Vt(this);let o=Array.from(this.g.values()),u=Array.from(this.g.keys()),d=[];for(let g=0;g<u.length;g++){let P=o[g];for(let D=0;D<P.length;D++)d.push(u[g])}return d},n.V=function(o){Vt(this);let u=[];if(typeof o=="string")Xo(this,o)&&(u=u.concat(this.g.get(Nn(this,o))));else{o=Array.from(this.g.values());for(let d=0;d<o.length;d++)u=u.concat(o[d])}return u},n.set=function(o,u){return Vt(this),this.i=null,o=Nn(this,o),Xo(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},n.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function Zo(o,u,d){Yo(o,u),0<d.length&&(o.i=null,o.g.set(Nn(o,u),B(d)),o.h+=d.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let o=[],u=Array.from(this.g.keys());for(var d=0;d<u.length;d++){var g=u[d];let D=encodeURIComponent(String(g)),M=this.V(g);for(g=0;g<M.length;g++){var P=D;M[g]!==""&&(P+="="+encodeURIComponent(String(M[g]))),o.push(P)}}return this.i=o.join("&")};function Nn(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function gl(o,u){u&&!o.j&&(Vt(o),o.i=null,o.g.forEach(function(d,g){var P=g.toLowerCase();g!=P&&(Yo(this,g),Zo(this,P,d))},o)),o.j=u}function yl(o,u){let d=new hr;if(h.Image){let g=new Image;g.onload=x(Nt,d,"TestLoadImage: loaded",!0,u,g),g.onerror=x(Nt,d,"TestLoadImage: error",!1,u,g),g.onabort=x(Nt,d,"TestLoadImage: abort",!1,u,g),g.ontimeout=x(Nt,d,"TestLoadImage: timeout",!1,u,g),h.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=o}else u(!1)}function On(o,u){let d=new hr,g=new AbortController,P=setTimeout(()=>{g.abort(),Nt(d,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:g.signal}).then(D=>{clearTimeout(P),D.ok?Nt(d,"TestPingServer: ok",!0,u):Nt(d,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(P),Nt(d,"TestPingServer: error",!1,u)})}function Nt(o,u,d,g,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),g(d)}catch{}}function _l(){this.g=new sl}function ea(o,u,d){let g=d||"";try{Ko(o,function(P,D){let M=P;m(P)&&(M=Xr(P)),u.push(g+D+"="+encodeURIComponent(M))})}catch(P){throw u.push(g+"type="+encodeURIComponent("_badmap")),P}}function gr(o){this.l=o.Ub||null,this.j=o.eb||!1}L(gr,_t),gr.prototype.g=function(){return new it(this.l,this.j)},gr.prototype.i=function(o){return function(){return o}}({});function it(o,u){Ae.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}L(it,Ae),n=it.prototype,n.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,vt(this)},n.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||h).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mn(this)),this.readyState=0},n.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,vt(this)),this.g&&(this.readyState=3,vt(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ta(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function ta(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}n.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?Mn(this):vt(this),this.readyState==3&&ta(this)}},n.Ra=function(o){this.g&&(this.response=this.responseText=o,Mn(this))},n.Qa=function(o){this.g&&(this.response=o,Mn(this))},n.ga=function(){this.g&&Mn(this)};function Mn(o){o.readyState=4,o.l=null,o.j=null,o.v=null,vt(o)}n.setRequestHeader=function(o,u){this.u.append(o,u)},n.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let o=[],u=this.h.entries();for(var d=u.next();!d.done;)d=d.value,o.push(d[0]+": "+d[1]),d=u.next();return o.join(`\r
`)};function vt(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(it.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function na(o){let u="";return se(o,function(d,g){u+=g,u+=":",u+=d,u+=`\r
`}),u}function _s(o,u,d){e:{for(g in d){var g=!1;break e}g=!0}g||(d=na(d),typeof o=="string"?d!=null&&encodeURIComponent(String(d)):de(o,u,d))}function me(o){Ae.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}L(me,Ae);var ra=/^https?$/i,Ln=["POST","PUT"];n=me.prototype,n.Ha=function(o){this.J=o},n.ea=function(o,u,d,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hs.g(),this.v=this.o?Lo(this.o):Lo(hs),this.g.onreadystatechange=k(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(D){ia(this,D);return}if(o=d||"",d=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var P in g)d.set(P,g[P]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let D of g.keys())d.set(D,g.get(D));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(d.keys()).find(D=>D.toLowerCase()=="content-type"),P=h.FormData&&o instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Ln,u,void 0))||g||P||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[D,M]of d)this.g.setRequestHeader(D,M);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{aa(this),this.u=!0,this.g.send(o),this.u=!1}catch(D){ia(this,D)}};function ia(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,sa(o),ui(o)}function sa(o){o.A||(o.A=!0,Ne(o,"complete"),Ne(o,"error"))}n.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,Ne(this,"complete"),Ne(this,"abort"),ui(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ui(this,!0)),me.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?oa(this):this.bb())},n.bb=function(){oa(this)};function oa(o){if(o.h&&typeof a<"u"&&(!o.v[1]||It(o)!=4||o.Z()!=2)){if(o.u&&It(o)==4)Ue(o.Ea,0,o);else if(Ne(o,"readystatechange"),It(o)==4){o.h=!1;try{let M=o.Z();e:switch(M){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var d;if(!(d=u)){var g;if(g=M===0){var P=String(o.D).match(ys)[1]||null;!P&&h.self&&h.self.location&&(P=h.self.location.protocol.slice(0,-1)),g=!ra.test(P?P.toLowerCase():"")}d=g}if(d)Ne(o,"complete"),Ne(o,"success");else{o.m=6;try{var D=2<It(o)?o.g.statusText:""}catch{D=""}o.l=D+" ["+o.Z()+"]",sa(o)}}finally{ui(o)}}}}function ui(o,u){if(o.g){aa(o);let d=o.g,g=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||Ne(o,"ready");try{d.onreadystatechange=g}catch{}}}function aa(o){o.I&&(h.clearTimeout(o.I),o.I=null)}n.isActive=function(){return!!this.g};function It(o){return o.g?o.g.readyState:0}n.Z=function(){try{return 2<It(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),il(u)}};function ca(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function wl(o){let u={};o=(o.g&&2<=It(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<o.length;g++){if(Y(o[g]))continue;var d=A(o[g]);let P=d[0];if(d=d[1],typeof d!="string")continue;d=d.trim();let D=u[P]||[];u[P]=D,D.push(d)}S(u,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function yr(o,u,d){return d&&d.internalChannelParams&&d.internalChannelParams[o]||u}function la(o){this.Aa=0,this.i=[],this.j=new hr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=yr("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=yr("baseRetryDelayMs",5e3,o),this.cb=yr("retryDelaySeedMs",1e4,o),this.Wa=yr("forwardChannelMaxRetries",2,o),this.wa=yr("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new ps(o&&o.concurrentRequestLimit),this.Da=new _l,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=la.prototype,n.la=8,n.G=1,n.connect=function(o,u,d,g){Be(0),this.W=o,this.H=u||{},d&&g!==void 0&&(this.H.OSID=d,this.H.OAID=g),this.F=this.X,this.I=Ts(this,null,this.W),hi(this)};function Fn(o){if(ua(o),o.G==3){var u=o.U++,d=Ge(o.I);if(de(d,"SID",o.K),de(d,"RID",u),de(d,"TYPE","terminate"),wr(o,d),u=new xt(o,o.j,u),u.L=2,u.v=li(Ge(d)),d=!1,h.navigator&&h.navigator.sendBeacon)try{d=h.navigator.sendBeacon(u.v.toString(),"")}catch{}!d&&h.Image&&(new Image().src=u.v,d=!0),d||(u.g=As(u.j,null),u.g.ea(u.v)),u.F=Date.now(),si(u)}bs(o)}function _r(o){o.g&&(vr(o),o.g.cancel(),o.g=null)}function ua(o){_r(o),o.u&&(h.clearTimeout(o.u),o.u=null),pi(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&h.clearTimeout(o.s),o.s=null)}function hi(o){if(!$o(o.h)&&!o.s){o.s=!0;var u=o.Ga;In||tt(),Xt||(In(),Xt=!0),En.add(u,o),o.B=0}}function vl(o,u){return zo(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=ur(k(o.Ga,o,u),Es(o,o.B)),o.B++,!0)}n.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;let P=new xt(this,this.j,o),D=this.o;if(this.S&&(D?(D=v(D),T(D,this.S)):D=this.S),this.m!==null||this.O||(P.H=D,D=null),this.P)e:{for(var u=0,d=0;d<this.i.length;d++){t:{var g=this.i[d];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(u+=g,4096<u){u=d;break e}if(u===4096||d===this.i.length-1){u=d+1;break e}}u=1e3}else u=1e3;u=di(this,P,u),d=Ge(this.I),de(d,"RID",o),de(d,"CVER",22),this.D&&de(d,"X-HTTP-Session-Id",this.D),wr(this,d),D&&(this.O?u="headers="+encodeURIComponent(String(na(D)))+"&"+u:this.m&&_s(d,this.m,D)),gs(this.h,P),this.Ua&&de(d,"TYPE","init"),this.P?(de(d,"$req",u),de(d,"SID","null"),P.T=!0,kn(P,d,null)):kn(P,d,u),this.G=2}}else this.G==3&&(o?ws(this,o):this.i.length==0||$o(this.h)||ws(this))};function ws(o,u){var d;u?d=u.l:d=o.U++;let g=Ge(o.I);de(g,"SID",o.K),de(g,"RID",d),de(g,"AID",o.T),wr(o,g),o.m&&o.o&&_s(g,o.m,o.o),d=new xt(o,o.j,d,o.B+1),o.m===null&&(d.H=o.o),u&&(o.i=u.D.concat(o.i)),u=di(o,d,1e3),d.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),gs(o.h,d),kn(d,g,u)}function wr(o,u){o.H&&se(o.H,function(d,g){de(u,g,d)}),o.l&&Ko({},function(d,g){de(u,g,d)})}function di(o,u,d){d=Math.min(o.i.length,d);var g=o.l?k(o.l.Na,o.l,o):null;e:{var P=o.i;let D=-1;for(;;){let M=["count="+d];D==-1?0<d?(D=P[0].g,M.push("ofs="+D)):D=0:M.push("ofs="+D);let le=!0;for(let Ce=0;Ce<d;Ce++){let re=P[Ce].g,xe=P[Ce].map;if(re-=D,0>re)D=Math.max(0,P[Ce].g-100),le=!1;else try{ea(xe,M,"req"+re+"_")}catch{g&&g(xe)}}if(le){g=M.join("&");break e}}}return o=o.i.splice(0,d),u.D=o,g}function vs(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;In||tt(),Xt||(In(),Xt=!0),En.add(u,o),o.v=0}}function fi(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=ur(k(o.Fa,o),Es(o,o.v)),o.v++,!0)}n.Fa=function(){if(this.u=null,Ir(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=ur(k(this.ab,this),o)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Be(10),_r(this),Ir(this))};function vr(o){o.A!=null&&(h.clearTimeout(o.A),o.A=null)}function Ir(o){o.g=new xt(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=Ge(o.qa);de(u,"RID","rpc"),de(u,"SID",o.K),de(u,"AID",o.T),de(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&de(u,"TO",o.ja),de(u,"TYPE","xmlhttp"),wr(o,u),o.m&&o.o&&_s(u,o.m,o.o),o.L&&(o.g.I=o.L);var d=o.g;o=o.ia,d.L=1,d.v=li(Ge(u)),d.m=null,d.P=!0,pe(d,o)}n.Za=function(){this.C!=null&&(this.C=null,_r(this),fi(this),Be(19))};function pi(o){o.C!=null&&(h.clearTimeout(o.C),o.C=null)}function Is(o,u){var d=null;if(o.g==u){pi(o),vr(o),o.g=null;var g=2}else if(ms(o.h,u))d=u.D,Go(o.h,u),g=1;else return;if(o.G!=0){if(u.o)if(g==1){d=u.m?u.m.length:0,u=Date.now()-u.F;var P=o.B;g=Zr(),Ne(g,new ei(g,d)),hi(o)}else vs(o);else if(P=u.s,P==3||P==0&&0<u.X||!(g==1&&vl(o,u)||g==2&&fi(o)))switch(d&&0<d.length&&(u=o.h,u.i=u.i.concat(d)),P){case 1:Ot(o,5);break;case 4:Ot(o,10);break;case 3:Ot(o,6);break;default:Ot(o,2)}}}function Es(o,u){let d=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(d*=2),d*u}function Ot(o,u){if(o.j.info("Error code "+u),u==2){var d=k(o.fb,o),g=o.Xa;let P=!g;g=new en(g||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||fr(g,"https"),li(g),P?yl(g.toString(),d):On(g.toString(),d)}else Be(2);o.G=0,o.l&&o.l.sa(u),bs(o),ua(o)}n.fb=function(o){o?(this.j.info("Successfully pinged google.com"),Be(2)):(this.j.info("Failed to ping google.com"),Be(1))};function bs(o){if(o.G=0,o.ka=[],o.l){let u=Wo(o.h);(u.length!=0||o.i.length!=0)&&(N(o.ka,u),N(o.ka,o.i),o.h.i.length=0,B(o.i),o.i.length=0),o.l.ra()}}function Ts(o,u,d){var g=d instanceof en?Ge(d):new en(d);if(g.g!="")u&&(g.g=u+"."+g.g),ai(g,g.s);else{var P=h.location;g=P.protocol,u=u?u+"."+P.hostname:P.hostname,P=+P.port;var D=new en(null);g&&fr(D,g),u&&(D.g=u),P&&ai(D,P),d&&(D.l=d),g=D}return d=o.D,u=o.ya,d&&u&&de(g,d,u),de(g,"VER",o.la),wr(o,g),g}function As(o,u,d){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new me(new gr({eb:d})):new me(o.pa),u.Ha(o.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cs(){}n=Cs.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Er(){}Er.prototype.g=function(o,u){return new We(o,u)};function We(o,u){Ae.call(this),this.g=new la(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!Y(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!Y(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new Un(this)}L(We,Ae),We.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},We.prototype.close=function(){Fn(this.g)},We.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var d={};d.__data__=o,o=d}else this.u&&(d={},d.__data__=Xr(o),o=d);u.i.push(new ul(u.Ya++,o)),u.G==3&&hi(u)},We.prototype.N=function(){this.g.l=null,delete this.j,Fn(this.g),delete this.g,We.aa.N.call(this)};function tn(o){ls.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){e:{for(let d in u){o=d;break e}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}L(tn,ls);function ha(){us.call(this),this.status=1}L(ha,us);function Un(o){this.g=o}L(Un,Cs),Un.prototype.ua=function(){Ne(this.g,"a")},Un.prototype.ta=function(o){Ne(this.g,new tn(o))},Un.prototype.sa=function(o){Ne(this.g,new ha)},Un.prototype.ra=function(){Ne(this.g,"b")},Er.prototype.createWebChannel=Er.prototype.g,We.prototype.send=We.prototype.o,We.prototype.open=We.prototype.m,We.prototype.close=We.prototype.close,sh=fn.createWebChannelTransport=function(){return new Er},ih=fn.getStatEventTarget=function(){return Zr()},rh=fn.Event=wt,ic=fn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ti.NO_ERROR=0,ti.TIMEOUT=8,ti.HTTP_ERROR=6,so=fn.ErrorCode=ti,jo.COMPLETE="complete",nh=fn.EventType=jo,Fo.EventType=cr,cr.OPEN="a",cr.CLOSE="b",cr.ERROR="c",cr.MESSAGE="d",Ae.prototype.listen=Ae.prototype.K,Ni=fn.WebChannel=Fo,th=fn.FetchXmlHttpFactory=gr,me.prototype.listenOnce=me.prototype.L,me.prototype.getLastError=me.prototype.Ka,me.prototype.getLastErrorCode=me.prototype.Ba,me.prototype.getStatus=me.prototype.Z,me.prototype.getResponseJson=me.prototype.Oa,me.prototype.getResponseText=me.prototype.oa,me.prototype.send=me.prototype.ea,me.prototype.setWithCredentials=me.prototype.Ha,eh=fn.XhrIo=me}).apply(typeof rc<"u"?rc:typeof self<"u"?self:typeof window<"u"?window:{});var Hm="@firebase/firestore";var Le=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Le.UNAUTHENTICATED=new Le(null),Le.GOOGLE_CREDENTIALS=new Le("google-credentials-uid"),Le.FIRST_PARTY=new Le("first-party-uid"),Le.MOCK_USER=new Le("mock-user");var Zi="10.13.1";var jr=new Kn("@firebase/firestore");function oo(){return jr.logLevel}function q(n,...e){if(jr.logLevel<=te.DEBUG){let t=e.map(Wd);jr.debug(`Firestore (${Zi}): ${n}`,...t)}}function mn(n,...e){if(jr.logLevel<=te.ERROR){let t=e.map(Wd);jr.error(`Firestore (${Zi}): ${n}`,...t)}}function ji(n,...e){if(jr.logLevel<=te.WARN){let t=e.map(Wd);jr.warn(`Firestore (${Zi}): ${n}`,...t)}}function Wd(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function H(n="Unexpected state"){let e=`FIRESTORE (${Zi}) INTERNAL ASSERTION FAILED: `+n;throw mn(e),new Error(e)}function fe(n,e){n||H()}function Q(n,e){return n}var V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},U=class extends st{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var pn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var lc=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},uh=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Le.UNAUTHENTICATED))}shutdown(){}},hh=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},dh=class{constructor(e){this.t=e,this.currentUser=Le.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i,i=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve(),s=new pn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new pn,e.enqueueRetryable(()=>i(this.currentUser))};let a=()=>{let p=s;e.enqueueRetryable(()=>b(this,null,function*(){yield p.promise,yield i(this.currentUser)}))},h=p=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(p=>h(p)),setTimeout(()=>{if(!this.auth){let p=this.t.getImmediate({optional:!0});p?h(p):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new pn)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(fe(typeof r.accessToken=="string"),new lc(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string"),new Le(e)}},fh=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Le.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},ph=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new fh(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Le.FIRST_PARTY))}shutdown(){}invalidateToken(){}},mh=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},gh=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let r=s=>{s.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let a=s.token!==this.R;return this.R=s.token,q("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(fe(typeof t.token=="string"),this.R=t.token,new mh(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function _E(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var uc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=_E(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}};function ae(n,e){return n<e?-1:n>e?1:0}function qi(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var qe=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new U(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new U(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new U(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new U(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var J=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new qe(0,0))}static max(){return new n(new qe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var hc=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&H(),r===void 0?r=e.length-t:r>e.length-t&&H(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let s=e.get(i),a=t.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},we=class n extends hc{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new U(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},wE=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ot=class n extends hc{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return wE.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,s=()=>{if(r.length===0)throw new U(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},a=!1;for(;i<e.length;){let h=e[i];if(h==="\\"){if(i+1===e.length)throw new U(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let p=e[i+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new U(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else h==="`"?(a=!a,i++):h!=="."||a?(r+=h,i++):(s(),i++)}if(s(),a)throw new U(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var z=class n{constructor(e){this.path=e}static fromPath(e){return new n(we.fromString(e))}static fromName(e){return new n(we.fromString(e).popFirst(5))}static empty(){return new n(we.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&we.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return we.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new we(e.slice()))}};var yh=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};yh.UNKNOWN_ID=-1;function vE(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=J.fromTimestamp(r===1e9?new qe(t+1,0):new qe(t,r));return new qr(i,z.empty(),e)}function IE(n){return new qr(n.readTime,n.key,-1)}var qr=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(J.min(),z.empty(),-1)}static max(){return new n(J.max(),z.empty(),-1)}};function EE(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=z.comparator(n.documentKey,e.documentKey),t!==0?t:ae(n.largestBatchId,e.largestBatchId))}var bE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",_h=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Co(n){return b(this,null,function*(){if(n.code!==V.FAILED_PRECONDITION||n.message!==bE)throw n;q("LocalStore","Unexpectedly lost primary lease")})}var O=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&H(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,s=0,a=!1;e.forEach(h=>{++i,h.next(()=>{++s,a&&s===i&&t()},p=>r(p))}),a=!0,s===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let s=e.length,a=new Array(s),h=0;for(let p=0;p<s;p++){let m=p;t(e[m]).next(w=>{a[m]=w,++h,h===s&&r(a)},w=>i(w))}})}static doWhile(e,t){return new n((r,i)=>{let s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}};function TE(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function So(n){return n.name==="IndexedDbTransactionError"}var Pg=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Bc(n){return n==null}function po(n){return n===0&&1/n==-1/0}function AE(n){return typeof n=="number"&&Number.isInteger(n)&&!po(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var CE=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],qC=[...CE,"documentOverlays"],SE=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],PE=SE,RE=[...PE,"indexConfiguration","indexState","indexEntries"];var $C=[...RE,"globals"];function Km(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function es(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Rg(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ie=class n{constructor(e,t){this.comparator=e,this.root=t||Kt.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Kt.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Fi(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Fi(this.root,e,this.comparator,!1)}getReverseIterator(){return new Fi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Fi(this.root,e,this.comparator,!0)}},Fi=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Kt=class n{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new n(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw H();let e=this.left.check();if(e!==this.right.check())throw H();return e+(this.isRed()?0:1)}};Kt.EMPTY=null,Kt.RED=!0,Kt.BLACK=!1;Kt.EMPTY=new class{constructor(){this.size=0}get key(){throw H()}get value(){throw H()}get color(){throw H()}get left(){throw H()}get right(){throw H()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Kt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Qe=class n{constructor(e){this.comparator=e,this.data=new Ie(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dc(this.data.getIterator())}getIteratorFrom(e){return new dc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},dc=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ht=class n{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new n([])}unionWith(e){let t=new Qe(ot.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qi(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var fc=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Je=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new fc("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Je.EMPTY_BYTE_STRING=new Je("");var DE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gn(n){if(fe(!!n),typeof n=="string"){let e=0,t=DE.exec(n);if(fe(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ge(n.seconds),nanos:ge(n.nanos)}}function ge(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ir(n){return typeof n=="string"?Je.fromBase64String(n):Je.fromUint8Array(n)}function Hd(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Kd(n){let e=n.mapValue.fields.__previous_value__;return Hd(e)?Kd(e):e}function mo(n){let e=gn(n.mapValue.fields.__local_write_time__.timestampValue);return new qe(e.seconds,e.nanos)}var wh=class{constructor(e,t,r,i,s,a,h,p,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=m}},pc=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var sc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function $r(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Hd(n)?4:kg(n)?9007199254740991:Dg(n)?10:11:H()}function Yt(n,e){if(n===e)return!0;let t=$r(n);if(t!==$r(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return mo(n).isEqual(mo(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let a=gn(i.timestampValue),h=gn(s.timestampValue);return a.seconds===h.seconds&&a.nanos===h.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return ir(i.bytesValue).isEqual(ir(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return ge(i.geoPointValue.latitude)===ge(s.geoPointValue.latitude)&&ge(i.geoPointValue.longitude)===ge(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ge(i.integerValue)===ge(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let a=ge(i.doubleValue),h=ge(s.doubleValue);return a===h?po(a)===po(h):isNaN(a)&&isNaN(h)}return!1}(n,e);case 9:return qi(n.arrayValue.values||[],e.arrayValue.values||[],Yt);case 10:case 11:return function(i,s){let a=i.mapValue.fields||{},h=s.mapValue.fields||{};if(Km(a)!==Km(h))return!1;for(let p in a)if(a.hasOwnProperty(p)&&(h[p]===void 0||!Yt(a[p],h[p])))return!1;return!0}(n,e);default:return H()}}function go(n,e){return(n.values||[]).find(t=>Yt(t,e))!==void 0}function $i(n,e){if(n===e)return 0;let t=$r(n),r=$r(e);if(t!==r)return ae(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ae(n.booleanValue,e.booleanValue);case 2:return function(s,a){let h=ge(s.integerValue||s.doubleValue),p=ge(a.integerValue||a.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1}(n,e);case 3:return Qm(n.timestampValue,e.timestampValue);case 4:return Qm(mo(n),mo(e));case 5:return ae(n.stringValue,e.stringValue);case 6:return function(s,a){let h=ir(s),p=ir(a);return h.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(s,a){let h=s.split("/"),p=a.split("/");for(let m=0;m<h.length&&m<p.length;m++){let w=ae(h[m],p[m]);if(w!==0)return w}return ae(h.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,a){let h=ae(ge(s.latitude),ge(a.latitude));return h!==0?h:ae(ge(s.longitude),ge(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Jm(n.arrayValue,e.arrayValue);case 10:return function(s,a){var h,p,m,w;let y=s.fields||{},k=a.fields||{},x=(h=y.value)===null||h===void 0?void 0:h.arrayValue,L=(p=k.value)===null||p===void 0?void 0:p.arrayValue,B=ae(((m=x?.values)===null||m===void 0?void 0:m.length)||0,((w=L?.values)===null||w===void 0?void 0:w.length)||0);return B!==0?B:Jm(x,L)}(n.mapValue,e.mapValue);case 11:return function(s,a){if(s===sc.mapValue&&a===sc.mapValue)return 0;if(s===sc.mapValue)return 1;if(a===sc.mapValue)return-1;let h=s.fields||{},p=Object.keys(h),m=a.fields||{},w=Object.keys(m);p.sort(),w.sort();for(let y=0;y<p.length&&y<w.length;++y){let k=ae(p[y],w[y]);if(k!==0)return k;let x=$i(h[p[y]],m[w[y]]);if(x!==0)return x}return ae(p.length,w.length)}(n.mapValue,e.mapValue);default:throw H()}}function Qm(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ae(n,e);let t=gn(n),r=gn(e),i=ae(t.seconds,r.seconds);return i!==0?i:ae(t.nanos,r.nanos)}function Jm(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let s=$i(t[i],r[i]);if(s)return s}return ae(t.length,r.length)}function zi(n){return vh(n)}function vh(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=gn(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ir(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return z.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let s of t.values||[])i?i=!1:r+=",",r+=vh(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",s=!0;for(let a of r)s?s=!1:i+=",",i+=`${a}:${vh(t.fields[a])}`;return i+"}"}(n.mapValue):H()}function Ym(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Ih(n){return!!n&&"integerValue"in n}function Qd(n){return!!n&&"arrayValue"in n}function Xm(n){return!!n&&"nullValue"in n}function Zm(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function ac(n){return!!n&&"mapValue"in n}function Dg(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function co(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return es(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=co(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=co(n.arrayValue.values[t]);return e}return Object.assign({},n)}function kg(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var At=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!ac(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=co(t)}setAll(e){let t=ot.emptyPath(),r={},i=[];e.forEach((a,h)=>{if(!t.isImmediateParentOf(h)){let p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=h.popLast()}a?r[h.lastSegment()]=co(a):i.push(h.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){let t=this.field(e.popLast());ac(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];ac(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){es(t,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new n(co(this.value))}};function xg(n){let e=[];return es(n.fields,(t,r)=>{let i=new ot([t]);if(ac(r)){let s=xg(r.mapValue).fields;if(s.length===0)e.push(i);else for(let a of s)e.push(i.child(a))}else e.push(i)}),new Ht(e)}var Ct=class n{constructor(e,t,r,i,s,a,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=h}static newInvalidDocument(e){return new n(e,0,J.min(),J.min(),J.min(),At.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,J.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,J.min(),J.min(),At.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,J.min(),J.min(),At.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=At.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=At.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Gi=class{constructor(e,t){this.position=e,this.inclusive=t}};function eg(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let s=e[i],a=n.position[i];if(s.field.isKeyField()?r=z.comparator(z.fromName(a.referenceValue),t.key):r=$i(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function tg(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Yt(n.position[t],e.position[t]))return!1;return!0}var zr=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function kE(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var mc=class{},ke=class n extends mc{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new bh(e,t,r):t==="array-contains"?new Ch(e,r):t==="in"?new Sh(e,r):t==="not-in"?new Ph(e,r):t==="array-contains-any"?new Rh(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Th(e,r):new Ah(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison($i(t,this.value)):t!==null&&$r(this.value)===$r(t)&&this.matchesComparison($i(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return H()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},St=class n extends mc{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Vg(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Vg(n){return n.op==="and"}function Ng(n){return xE(n)&&Vg(n)}function xE(n){for(let e of n.filters)if(e instanceof St)return!1;return!0}function Eh(n){if(n instanceof ke)return n.field.canonicalString()+n.op.toString()+zi(n.value);if(Ng(n))return n.filters.map(e=>Eh(e)).join(",");{let e=n.filters.map(t=>Eh(t)).join(",");return`${n.op}(${e})`}}function Og(n,e){return n instanceof ke?function(r,i){return i instanceof ke&&r.op===i.op&&r.field.isEqual(i.field)&&Yt(r.value,i.value)}(n,e):n instanceof St?function(r,i){return i instanceof St&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,h)=>s&&Og(a,i.filters[h]),!0):!1}(n,e):void H()}function Mg(n){return n instanceof ke?function(t){return`${t.field.canonicalString()} ${t.op} ${zi(t.value)}`}(n):n instanceof St?function(t){return t.op.toString()+" {"+t.getFilters().map(Mg).join(" ,")+"}"}(n):"Filter"}var bh=class extends ke{constructor(e,t,r){super(e,t,r),this.key=z.fromName(r.referenceValue)}matches(e){let t=z.comparator(e.key,this.key);return this.matchesComparison(t)}},Th=class extends ke{constructor(e,t){super(e,"in",t),this.keys=Lg("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Ah=class extends ke{constructor(e,t){super(e,"not-in",t),this.keys=Lg("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Lg(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>z.fromName(r.referenceValue))}var Ch=class extends ke{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Qd(t)&&go(t.arrayValue,this.value)}},Sh=class extends ke{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&go(this.value.arrayValue,t)}},Ph=class extends ke{constructor(e,t){super(e,"not-in",t)}matches(e){if(go(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!go(this.value.arrayValue,t)}},Rh=class extends ke{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Qd(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>go(this.value.arrayValue,r))}};var Dh=class{constructor(e,t=null,r=[],i=[],s=null,a=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=h,this.ue=null}};function ng(n,e=null,t=[],r=[],i=null,s=null,a=null){return new Dh(n,e,t,r,i,s,a)}function Jd(n){let e=Q(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Eh(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Bc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>zi(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>zi(r)).join(",")),e.ue=t}return e.ue}function Yd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!kE(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Og(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!tg(n.startAt,e.startAt)&&tg(n.endAt,e.endAt)}function kh(n){return z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var sr=class{constructor(e,t=null,r=[],i=[],s=null,a="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=h,this.endAt=p,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function VE(n,e,t,r,i,s,a,h){return new sr(n,e,t,r,i,s,a,h)}function Xd(n){return new sr(n)}function rg(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Fg(n){return n.collectionGroup!==null}function lo(n){let e=Q(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let h=new Qe(ot.comparator);return a.filters.forEach(p=>{p.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new zr(s,r))}),t.has(ot.keyField().canonicalString())||e.ce.push(new zr(ot.keyField(),r))}return e.ce}function Qt(n){let e=Q(n);return e.le||(e.le=NE(e,lo(n))),e.le}function NE(n,e){if(n.limitType==="F")return ng(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new zr(i.field,s)});let t=n.endAt?new Gi(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Gi(n.startAt.position,n.startAt.inclusive):null;return ng(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function xh(n,e){let t=n.filters.concat([e]);return new sr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Vh(n,e,t){return new sr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function jc(n,e){return Yd(Qt(n),Qt(e))&&n.limitType===e.limitType}function Ug(n){return`${Jd(Qt(n))}|lt:${n.limitType}`}function Oi(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Mg(i)).join(", ")}]`),Bc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>zi(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>zi(i)).join(",")),`Target(${r})`}(Qt(n))}; limitType=${n.limitType})`}function qc(n,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):z.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(let s of lo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,h,p){let m=eg(a,h,p);return a.inclusive?m<=0:m<0}(r.startAt,lo(r),i)||r.endAt&&!function(a,h,p){let m=eg(a,h,p);return a.inclusive?m>=0:m>0}(r.endAt,lo(r),i))}(n,e)}function OE(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Bg(n){return(e,t)=>{let r=!1;for(let i of lo(n)){let s=ME(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function ME(n,e,t){let r=n.field.isKeyField()?z.comparator(e.key,t.key):function(s,a,h){let p=a.data.field(s),m=h.data.field(s);return p!==null&&m!==null?$i(p,m):H()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return H()}}var or=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){es(this.inner,(t,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return Rg(this.inner)}size(){return this.innerSize}};var LE=new Ie(z.comparator);function yn(){return LE}var jg=new Ie(z.comparator);function ao(...n){let e=jg;for(let t of n)e=e.insert(t.key,t);return e}function qg(n){let e=jg;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Lr(){return uo()}function $g(){return uo()}function uo(){return new or(n=>n.toString(),(n,e)=>n.isEqual(e))}var FE=new Ie(z.comparator),UE=new Qe(z.comparator);function ne(...n){let e=UE;for(let t of n)e=e.add(t);return e}var BE=new Qe(ae);function jE(){return BE}function Zd(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:po(e)?"-0":e}}function zg(n){return{integerValue:""+n}}function qE(n,e){return AE(e)?zg(e):Zd(n,e)}var Wi=class{constructor(){this._=void 0}};function $E(n,e,t){return n instanceof Hi?function(i,s){let a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Hd(s)&&(s=Kd(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(t,e):n instanceof Gr?Wg(n,e):n instanceof Wr?Hg(n,e):function(i,s){let a=Gg(i,s),h=ig(a)+ig(i.Pe);return Ih(a)&&Ih(i.Pe)?zg(h):Zd(i.serializer,h)}(n,e)}function zE(n,e,t){return n instanceof Gr?Wg(n,e):n instanceof Wr?Hg(n,e):t}function Gg(n,e){return n instanceof Ki?function(r){return Ih(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var Hi=class extends Wi{},Gr=class extends Wi{constructor(e){super(),this.elements=e}};function Wg(n,e){let t=Kg(e);for(let r of n.elements)t.some(i=>Yt(i,r))||t.push(r);return{arrayValue:{values:t}}}var Wr=class extends Wi{constructor(e){super(),this.elements=e}};function Hg(n,e){let t=Kg(e);for(let r of n.elements)t=t.filter(i=>!Yt(i,r));return{arrayValue:{values:t}}}var Ki=class extends Wi{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function ig(n){return ge(n.integerValue||n.doubleValue)}function Kg(n){return Qd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function GE(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Gr&&i instanceof Gr||r instanceof Wr&&i instanceof Wr?qi(r.elements,i.elements,Yt):r instanceof Ki&&i instanceof Ki?Yt(r.Pe,i.Pe):r instanceof Hi&&i instanceof Hi}(n.transform,e.transform)}var Nh=class{constructor(e,t){this.version=e,this.transformResults=t}},Br=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function cc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Qi=class{};function Qg(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new gc(n.key,Br.none()):new Hr(n.key,n.data,Br.none());{let t=n.data,r=At.empty(),i=new Qe(ot.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new _n(n.key,r,new Ht(i.toArray()),Br.none())}}function WE(n,e,t){n instanceof Hr?function(i,s,a){let h=i.value.clone(),p=og(i.fieldTransforms,s,a.transformResults);h.setAll(p),s.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):n instanceof _n?function(i,s,a){if(!cc(i.precondition,s))return void s.convertToUnknownDocument(a.version);let h=og(i.fieldTransforms,s,a.transformResults),p=s.data;p.setAll(Jg(i)),p.setAll(h),s.convertToFoundDocument(a.version,p).setHasCommittedMutations()}(n,e,t):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function ho(n,e,t,r){return n instanceof Hr?function(s,a,h,p){if(!cc(s.precondition,a))return h;let m=s.value.clone(),w=ag(s.fieldTransforms,p,a);return m.setAll(w),a.convertToFoundDocument(a.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof _n?function(s,a,h,p){if(!cc(s.precondition,a))return h;let m=ag(s.fieldTransforms,p,a),w=a.data;return w.setAll(Jg(s)),w.setAll(m),a.convertToFoundDocument(a.version,w).setHasLocalMutations(),h===null?null:h.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(y=>y.field))}(n,e,t,r):function(s,a,h){return cc(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):h}(n,e,t)}function HE(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),s=Gg(r.transform,i||null);s!=null&&(t===null&&(t=At.empty()),t.set(r.field,s))}return t||null}function sg(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&qi(r,i,(s,a)=>GE(s,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Hr=class extends Qi{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},_n=class extends Qi{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function Jg(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function og(n,e,t){let r=new Map;fe(n.length===t.length);for(let i=0;i<t.length;i++){let s=n[i],a=s.transform,h=e.data.field(s.field);r.set(s.field,zE(a,h,t[i]))}return r}function ag(n,e,t){let r=new Map;for(let i of n){let s=i.transform,a=t.data.field(i.field);r.set(i.field,$E(s,a,e))}return r}var gc=class extends Qi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Oh=class extends Qi{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Mh=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&WE(s,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=ho(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=ho(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=$g();return this.mutations.forEach(i=>{let s=e.get(i.key),a=s.overlayedDocument,h=this.applyToLocalView(a,s.mutatedFields);h=t.has(i.key)?null:h;let p=Qg(a,h);p!==null&&r.set(i.key,p),a.isValidDocument()||a.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ne())}isEqual(e){return this.batchId===e.batchId&&qi(this.mutations,e.mutations,(t,r)=>sg(t,r))&&qi(this.baseMutations,e.baseMutations,(t,r)=>sg(t,r))}},Lh=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){fe(e.mutations.length===r.length);let i=function(){return FE}(),s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new n(e,t,r,i)}};var Fh=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Uh=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Re,ie;function KE(n){switch(n){default:return H();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function Yg(n){if(n===void 0)return mn("GRPC error has no .code"),V.UNKNOWN;switch(n){case Re.OK:return V.OK;case Re.CANCELLED:return V.CANCELLED;case Re.UNKNOWN:return V.UNKNOWN;case Re.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Re.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Re.INTERNAL:return V.INTERNAL;case Re.UNAVAILABLE:return V.UNAVAILABLE;case Re.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Re.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Re.NOT_FOUND:return V.NOT_FOUND;case Re.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Re.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Re.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Re.ABORTED:return V.ABORTED;case Re.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Re.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Re.DATA_LOSS:return V.DATA_LOSS;default:return H()}}(ie=Re||(Re={}))[ie.OK=0]="OK",ie[ie.CANCELLED=1]="CANCELLED",ie[ie.UNKNOWN=2]="UNKNOWN",ie[ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ie[ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ie[ie.NOT_FOUND=5]="NOT_FOUND",ie[ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",ie[ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",ie[ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",ie[ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ie[ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ie[ie.ABORTED=10]="ABORTED",ie[ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",ie[ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",ie[ie.INTERNAL=13]="INTERNAL",ie[ie.UNAVAILABLE=14]="UNAVAILABLE",ie[ie.DATA_LOSS=15]="DATA_LOSS";var cg=null;function QE(){return new TextEncoder}var JE=new nr([4294967295,4294967295],0);function lg(n){let e=QE().encode(n),t=new Zu;return t.update(e),new Uint8Array(t.digest())}function ug(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new nr([t,r],0),new nr([i,s],0)]}var Bh=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Fr(`Invalid padding: ${t}`);if(r<0)throw new Fr(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Fr(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Fr(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=nr.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(nr.fromNumber(r)));return i.compare(JE)===1&&(i=new nr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=lg(e),[r,i]=ug(t);for(let s=0;s<this.hashCount;s++){let a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new n(s,i,t);return r.forEach(h=>a.insert(h)),a}insert(e){if(this.Ie===0)return;let t=lg(e),[r,i]=ug(t);for(let s=0;s<this.hashCount;s++){let a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},Fr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var yc=class n{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,yo.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(J.min(),i,new Ie(ae),yn(),ne())}},yo=class n{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ne(),ne(),ne())}};var Ui=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},_c=class{constructor(e,t){this.targetId=e,this.me=t}},wc=class{constructor(e,t,r=Je.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},vc=class{constructor(){this.fe=0,this.ge=dg(),this.pe=Je.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ne(),t=ne(),r=ne();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:H()}}),new yo(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=dg()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},jh=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=yn(),this.qe=hg(),this.Qe=new Ie(ae)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:H()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let s=i.target;if(kh(s))if(r===0){let a=new z(s.path);this.Ue(t,a,Ct.newNoDocument(a,J.min()))}else fe(r===1);else{let a=this.Ye(t);if(a!==r){let h=this.Ze(e),p=h?this.Xe(h,e,a):1;if(p!==0){this.je(t);let m=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,m)}cg?.et(function(w,y,k,x,L){var B,N,K,Y,Z,ue;let be={localCacheCount:w,existenceFilterCount:y.count,databaseId:k.database,projectId:k.projectId},se=y.unchangedNames;return se&&(be.bloomFilter={applied:L===0,hashCount:(B=se?.hashCount)!==null&&B!==void 0?B:0,bitmapLength:(Y=(K=(N=se?.bits)===null||N===void 0?void 0:N.bitmap)===null||K===void 0?void 0:K.length)!==null&&Y!==void 0?Y:0,padding:(ue=(Z=se?.bits)===null||Z===void 0?void 0:Z.padding)!==null&&ue!==void 0?ue:0,mightContain:S=>{var v;return(v=x?.mightContain(S))!==null&&v!==void 0&&v}}),be}(a,e.me,this.Le.tt(),h,p))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t,a,h;try{a=ir(r).toUint8Array()}catch(p){if(p instanceof fc)return ji("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new Bh(a,i,s)}catch(p){return ji(p instanceof Fr?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.Ie===0?null:h}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(s=>{let a=this.Le.tt(),h=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(h)||(this.Ue(t,s,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((s,a)=>{let h=this.Je(a);if(h){if(s.current&&kh(h.target)){let p=new z(h.target.path);this.ke.get(p)!==null||this.it(a,p)||this.Ue(a,p,Ct.newNoDocument(p,e))}s.be&&(t.set(a,s.ve()),s.Ce())}});let r=ne();this.qe.forEach((s,a)=>{let h=!0;a.forEachWhile(p=>{let m=this.Je(p);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));let i=new yc(e,t,this.Qe,this.ke,r);return this.ke=yn(),this.qe=hg(),this.Qe=new Ie(ae),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new vc,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Qe(ae),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||q("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new vc),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function hg(){return new Ie(z.comparator)}function dg(){return new Ie(z.comparator)}var YE={asc:"ASCENDING",desc:"DESCENDING"},XE={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ZE={and:"AND",or:"OR"},qh=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function $h(n,e){return n.useProto3Json||Bc(e)?e:{value:e}}function Ic(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Xg(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function eb(n,e){return Ic(n,e.toTimestamp())}function Jt(n){return fe(!!n),J.fromTimestamp(function(t){let r=gn(t);return new qe(r.seconds,r.nanos)}(n))}function ef(n,e){return zh(n,e).canonicalString()}function zh(n,e){let t=function(i){return new we(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function Zg(n){let e=we.fromString(n);return fe(iy(e)),e}function Gh(n,e){return ef(n.databaseId,e.path)}function oh(n,e){let t=Zg(e);if(t.get(1)!==n.databaseId.projectId)throw new U(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new U(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new z(ty(t))}function ey(n,e){return ef(n.databaseId,e)}function tb(n){let e=Zg(n);return e.length===4?we.emptyPath():ty(e)}function Wh(n){return new we(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function ty(n){return fe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function fg(n,e,t){return{name:Gh(n,e),fields:t.value.mapValue.fields}}function nb(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:H()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(m,w){return m.useProto3Json?(fe(w===void 0||typeof w=="string"),Je.fromBase64String(w||"")):(fe(w===void 0||w instanceof Buffer||w instanceof Uint8Array),Je.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,h=a&&function(m){let w=m.code===void 0?V.UNKNOWN:Yg(m.code);return new U(w,m.message||"")}(a);t=new wc(r,i,s,h||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=oh(n,r.document.name),s=Jt(r.document.updateTime),a=r.document.createTime?Jt(r.document.createTime):J.min(),h=new At({mapValue:{fields:r.document.fields}}),p=Ct.newFoundDocument(i,s,a,h),m=r.targetIds||[],w=r.removedTargetIds||[];t=new Ui(m,w,p.key,p)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=oh(n,r.document),s=r.readTime?Jt(r.readTime):J.min(),a=Ct.newNoDocument(i,s),h=r.removedTargetIds||[];t=new Ui([],h,a.key,a)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=oh(n,r.document),s=r.removedTargetIds||[];t=new Ui([],s,i,null)}else{if(!("filter"in e))return H();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,a=new Uh(i,s),h=r.targetId;t=new _c(h,a)}}return t}function rb(n,e){let t;if(e instanceof Hr)t={update:fg(n,e.key,e.value)};else if(e instanceof gc)t={delete:Gh(n,e.key)};else if(e instanceof _n)t={update:fg(n,e.key,e.data),updateMask:db(e.fieldMask)};else{if(!(e instanceof Oh))return H();t={verify:Gh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,a){let h=a.transform;if(h instanceof Hi)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Gr)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Wr)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Ki)return{fieldPath:a.field.canonicalString(),increment:h.Pe};throw H()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:eb(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:H()}(n,e.precondition)),t}function ib(n,e){return n&&n.length>0?(fe(e!==void 0),n.map(t=>function(i,s){let a=i.updateTime?Jt(i.updateTime):Jt(s);return a.isEqual(J.min())&&(a=Jt(s)),new Nh(a,i.transformResults||[])}(t,e))):[]}function sb(n,e){return{documents:[ey(n,e.path)]}}function ob(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=ey(n,i);let s=function(m){if(m.length!==0)return ry(St.create(m,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let a=function(m){if(m.length!==0)return m.map(w=>function(k){return{field:Mi(k.field),direction:lb(k.dir)}}(w))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);let h=$h(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{_t:t,parent:i}}function ab(n){let e=tb(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){fe(r===1);let w=t.from[0];w.allDescendants?i=w.collectionId:e=e.child(w.collectionId)}let s=[];t.where&&(s=function(y){let k=ny(y);return k instanceof St&&Ng(k)?k.getFilters():[k]}(t.where));let a=[];t.orderBy&&(a=function(y){return y.map(k=>function(L){return new zr(Li(L.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(L.direction))}(k))}(t.orderBy));let h=null;t.limit&&(h=function(y){let k;return k=typeof y=="object"?y.value:y,Bc(k)?null:k}(t.limit));let p=null;t.startAt&&(p=function(y){let k=!!y.before,x=y.values||[];return new Gi(x,k)}(t.startAt));let m=null;return t.endAt&&(m=function(y){let k=!y.before,x=y.values||[];return new Gi(x,k)}(t.endAt)),VE(e,i,a,s,h,"F",p,m)}function cb(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return H()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ny(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Li(t.unaryFilter.field);return ke.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Li(t.unaryFilter.field);return ke.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Li(t.unaryFilter.field);return ke.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=Li(t.unaryFilter.field);return ke.create(a,"!=",{nullValue:"NULL_VALUE"});default:return H()}}(n):n.fieldFilter!==void 0?function(t){return ke.create(Li(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return H()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return St.create(t.compositeFilter.filters.map(r=>ny(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return H()}}(t.compositeFilter.op))}(n):H()}function lb(n){return YE[n]}function ub(n){return XE[n]}function hb(n){return ZE[n]}function Mi(n){return{fieldPath:n.canonicalString()}}function Li(n){return ot.fromServerFormat(n.fieldPath)}function ry(n){return n instanceof ke?function(t){if(t.op==="=="){if(Zm(t.value))return{unaryFilter:{field:Mi(t.field),op:"IS_NAN"}};if(Xm(t.value))return{unaryFilter:{field:Mi(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Zm(t.value))return{unaryFilter:{field:Mi(t.field),op:"IS_NOT_NAN"}};if(Xm(t.value))return{unaryFilter:{field:Mi(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mi(t.field),op:ub(t.op),value:t.value}}}(n):n instanceof St?function(t){let r=t.getFilters().map(i=>ry(i));return r.length===1?r[0]:{compositeFilter:{op:hb(t.op),filters:r}}}(n):H()}function db(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function iy(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var _o=class n{constructor(e,t,r,i,s=J.min(),a=J.min(),h=Je.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Hh=class{constructor(e){this.ct=e}};function fb(n){let e=ab({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Vh(e,e.limit,"L"):e}var Ec=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ge(e.integerValue));else if("doubleValue"in e){let r=ge(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),po(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=gn(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ir(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?kg(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Dg(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):H()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let s=e.fields||{};this.dt(t,53);let a="value",h=((i=(r=s[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(ge(h)),this.Vt(a,t),this.Tt(s[a],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),z.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Ec.vt=new Ec;var Kh=class{constructor(){this.un=new Qh}addToCollectionParentIndex(e,t){return this.un.add(t),O.resolve()}getCollectionParents(e,t){return O.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return O.resolve()}deleteFieldIndex(e,t){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,t){return O.resolve()}getDocumentsMatchingTarget(e,t){return O.resolve(null)}getIndexType(e,t){return O.resolve(0)}getFieldIndexes(e,t){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,t){return O.resolve(qr.min())}getMinOffsetFromCollectionGroup(e,t){return O.resolve(qr.min())}updateCollectionGroup(e,t,r){return O.resolve()}updateIndexEntries(e,t){return O.resolve()}},Qh=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Qe(we.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Qe(we.comparator)).toArray()}};var GC=new Uint8Array(0);var Wt=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Wt.DEFAULT_COLLECTION_PERCENTILE=10,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wt.DEFAULT=new Wt(41943040,Wt.DEFAULT_COLLECTION_PERCENTILE,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wt.DISABLED=new Wt(-1,0,0);var wo=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Jh=class{constructor(){this.changes=new or(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ct.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?O.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Yh=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Xh=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ho(r.mutation,i,Ht.empty(),qe.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ne()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ne()){let i=Lr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let a=ao();return s.forEach((h,p)=>{a=a.insert(h,p.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let r=Lr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ne()))}populateOverlays(e,t,r){let i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,h)=>{t.set(a,h)})})}computeViews(e,t,r,i){let s=yn(),a=uo(),h=function(){return uo()}();return t.forEach((p,m)=>{let w=r.get(m.key);i.has(m.key)&&(w===void 0||w.mutation instanceof _n)?s=s.insert(m.key,m):w!==void 0?(a.set(m.key,w.mutation.getFieldMask()),ho(w.mutation,m,w.mutation.getFieldMask(),qe.now())):a.set(m.key,Ht.empty())}),this.recalculateAndSaveOverlays(e,s).next(p=>(p.forEach((m,w)=>a.set(m,w)),t.forEach((m,w)=>{var y;return h.set(m,new Yh(w,(y=a.get(m))!==null&&y!==void 0?y:null))}),h))}recalculateAndSaveOverlays(e,t){let r=uo(),i=new Ie((a,h)=>a-h),s=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let h of a)h.keys().forEach(p=>{let m=t.get(p);if(m===null)return;let w=r.get(p)||Ht.empty();w=h.applyToLocalView(m,w),r.set(p,w);let y=(i.get(h.batchId)||ne()).add(p);i=i.insert(h.batchId,y)})}).next(()=>{let a=[],h=i.getReverseIterator();for(;h.hasNext();){let p=h.getNext(),m=p.key,w=p.value,y=$g();w.forEach(k=>{if(!s.has(k)){let x=Qg(t.get(k),r.get(k));x!==null&&y.set(k,x),s=s.add(k)}}),a.push(this.documentOverlayCache.saveOverlays(e,m,y))}return O.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return z.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Fg(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{let a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):O.resolve(Lr()),h=-1,p=s;return a.next(m=>O.forEach(m,(w,y)=>(h<y.largestBatchId&&(h=y.largestBatchId),s.get(w)?O.resolve():this.remoteDocumentCache.getEntry(e,w).next(k=>{p=p.insert(w,k)}))).next(()=>this.populateOverlays(e,m,s)).next(()=>this.computeViews(e,p,m,ne())).next(w=>({batchId:h,changes:qg(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new z(t)).next(r=>{let i=ao();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let s=t.collectionGroup,a=ao();return this.indexManager.getCollectionParents(e,s).next(h=>O.forEach(h,p=>{let m=function(y,k){return new sr(k,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt)}(t,p.child(s));return this.getDocumentsMatchingCollectionQuery(e,m,r,i).next(w=>{w.forEach((y,k)=>{a=a.insert(y,k)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(a=>{s.forEach((p,m)=>{let w=m.getKey();a.get(w)===null&&(a=a.insert(w,Ct.newInvalidDocument(w)))});let h=ao();return a.forEach((p,m)=>{let w=s.get(p);w!==void 0&&ho(w.mutation,m,Ht.empty(),qe.now()),qc(t,m)&&(h=h.insert(p,m))}),h})}};var Zh=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return O.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Jt(i.createTime)}}(t)),O.resolve()}getNamedQuery(e,t){return O.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:fb(i.bundledQuery),readTime:Jt(i.readTime)}}(t)),O.resolve()}};var ed=class{constructor(){this.overlays=new Ie(z.comparator),this.Ir=new Map}getOverlay(e,t){return O.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Lr();return O.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),O.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),O.resolve()}getOverlaysForCollection(e,t,r){let i=Lr(),s=t.length+1,a=new z(t.child("")),h=this.overlays.getIteratorFrom(a);for(;h.hasNext();){let p=h.getNext().value,m=p.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===s&&p.largestBatchId>r&&i.set(p.getKey(),p)}return O.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Ie((m,w)=>m-w),a=this.overlays.getIterator();for(;a.hasNext();){let m=a.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let w=s.get(m.largestBatchId);w===null&&(w=Lr(),s=s.insert(m.largestBatchId,w)),w.set(m.getKey(),m)}}let h=Lr(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((m,w)=>h.set(m,w)),!(h.size()>=i)););return O.resolve(h)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new Fh(t,r));let s=this.Ir.get(t);s===void 0&&(s=ne(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}};var td=class{constructor(){this.sessionToken=Je.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,O.resolve()}};var vo=class{constructor(){this.Tr=new Qe(De.Er),this.dr=new Qe(De.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new De(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new De(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new z(new we([])),r=new De(t,e),i=new De(t,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new z(new we([])),r=new De(t,e),i=new De(t,e+1),s=ne();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){let t=new De(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},De=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return z.comparator(e.key,t.key)||ae(e.wr,t.wr)}static Ar(e,t){return ae(e.wr,t.wr)||z.comparator(e.key,t.key)}};var nd=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Qe(De.Er)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new Mh(s,t,r,i);this.mutationQueue.push(a);for(let h of i)this.br=this.br.add(new De(h.key,s)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return O.resolve(a)}lookupMutationBatch(e,t){return O.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new De(t,0),i=new De(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{let h=this.Dr(a.wr);s.push(h)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Qe(ae);return t.forEach(i=>{let s=new De(i,0),a=new De(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],h=>{r=r.add(h.wr)})}),O.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,s=r;z.isDocumentKey(s)||(s=s.child(""));let a=new De(new z(s),0),h=new Qe(ae);return this.br.forEachWhile(p=>{let m=p.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(h=h.add(p.wr)),!0)},a),O.resolve(this.Cr(h))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){fe(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return O.forEach(t.mutations,i=>{let s=new De(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new De(t,0),i=this.br.firstAfterOrEqual(r);return O.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var rd=class{constructor(e){this.Mr=e,this.docs=function(){return new Ie(z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return O.resolve(r?r.document.mutableCopy():Ct.newInvalidDocument(t))}getEntries(e,t){let r=yn();return t.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ct.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=yn(),a=t.path,h=new z(a.child("")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){let{key:m,value:{document:w}}=p.getNext();if(!a.isPrefixOf(m.path))break;m.path.length>a.length+1||EE(IE(w),r)<=0||(i.has(w.key)||qc(t,w))&&(s=s.insert(w.key,w.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,t,r,i){H()}Or(e,t){return O.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new id(this)}getSize(e){return O.resolve(this.size)}},id=class extends Jh{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),O.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var sd=class{constructor(e){this.persistence=e,this.Nr=new or(t=>Jd(t),Yd),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Lr=0,this.Br=new vo,this.targetCount=0,this.kr=wo.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),O.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new wo(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,O.resolve()}updateTargetData(e,t){return this.Kn(t),O.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,t,r){let i=0,s=[];return this.Nr.forEach((a,h)=>{h.sequenceNumber<=t&&r.get(h.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return O.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),O.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),O.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return O.resolve(r)}containsKey(e,t){return O.resolve(this.Br.containsKey(t))}};var od=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Pg(0),this.Kr=!1,this.Kr=!0,this.$r=new td,this.referenceDelegate=e(this),this.Ur=new sd(this),this.indexManager=new Kh,this.remoteDocumentCache=function(i){return new rd(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Hh(t),this.Gr=new Zh(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ed,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new nd(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){q("MemoryPersistence","Starting transaction:",e);let i=new ad(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return O.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},ad=class extends _h{constructor(e){super(),this.currentSequenceNumber=e}},cd=class n{constructor(e){this.persistence=e,this.Jr=new vo,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw H()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),O.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),O.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Xr,r=>{let i=z.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,J.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return O.or([()=>O.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var ld=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ne(),i=ne();for(let s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new n(e,t.fromCache,r,i)}};var ud=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var hd=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return vp()?8:TE(Me())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let s={result:null};return this.Yi(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;let a=new ud;return this.Xi(e,t,a).next(h=>{if(s.result=h,this.zi)return this.es(e,t,a,h.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(oo()<=te.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",Oi(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),O.resolve()):(oo()<=te.DEBUG&&q("QueryEngine","Query:",Oi(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(oo()<=te.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",Oi(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qt(t))):O.resolve())}Yi(e,t){if(rg(t))return O.resolve(null);let r=Qt(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Vh(t,null,"F"),r=Qt(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let a=ne(...s);return this.Ji.getDocuments(e,a).next(h=>this.indexManager.getMinOffset(e,r).next(p=>{let m=this.ts(t,h);return this.ns(t,m,a,p.readTime)?this.Yi(e,Vh(t,null,"F")):this.rs(e,m,t,p)}))})))}Zi(e,t,r,i){return rg(t)||i.isEqual(J.min())?O.resolve(null):this.Ji.getDocuments(e,r).next(s=>{let a=this.ts(t,s);return this.ns(t,a,r,i)?O.resolve(null):(oo()<=te.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Oi(t)),this.rs(e,a,t,vE(i,-1)).next(h=>h))})}ts(e,t){let r=new Qe(Bg(e));return t.forEach((i,s)=>{qc(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return oo()<=te.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Oi(t)),this.Ji.getDocumentsMatchingQuery(e,t,qr.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}};var dd=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ie(ae),this._s=new or(s=>Jd(s),Yd),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Xh(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function pb(n,e,t,r){return new dd(n,e,t,r)}function sy(n,e){return b(this,null,function*(){let t=Q(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{let a=[],h=[],p=ne();for(let m of i){a.push(m.batchId);for(let w of m.mutations)p=p.add(w.key)}for(let m of s){h.push(m.batchId);for(let w of m.mutations)p=p.add(w.key)}return t.localDocuments.getDocuments(r,p).next(m=>({hs:m,removedBatchIds:a,addedBatchIds:h}))})})})}function mb(n,e){let t=Q(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(h,p,m,w){let y=m.batch,k=y.keys(),x=O.resolve();return k.forEach(L=>{x=x.next(()=>w.getEntry(p,L)).next(B=>{let N=m.docVersions.get(L);fe(N!==null),B.version.compareTo(N)<0&&(y.applyToRemoteDocument(B,m),B.isValidDocument()&&(B.setReadTime(m.commitVersion),w.addEntry(B)))})}),x.next(()=>h.mutationQueue.removeMutationBatch(p,y))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(h){let p=ne();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(p=p.add(h.batch.mutations[m].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function oy(n){let e=Q(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function gb(n,e){let t=Q(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let a=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let h=[];e.targetChanges.forEach((w,y)=>{let k=i.get(y);if(!k)return;h.push(t.Ur.removeMatchingKeys(s,w.removedDocuments,y).next(()=>t.Ur.addMatchingKeys(s,w.addedDocuments,y)));let x=k.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(y)!==null?x=x.withResumeToken(Je.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):w.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(w.resumeToken,r)),i=i.insert(y,x),function(B,N,K){return B.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0}(k,x,w)&&h.push(t.Ur.updateTargetData(s,x))});let p=yn(),m=ne();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(s,w))}),h.push(yb(s,a,e.documentUpdates).next(w=>{p=w.Ps,m=w.Is})),!r.isEqual(J.min())){let w=t.Ur.getLastRemoteSnapshotVersion(s).next(y=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));h.push(w)}return O.waitFor(h).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,p,m)).next(()=>p)}).then(s=>(t.os=i,s))}function yb(n,e,t){let r=ne(),i=ne();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let a=yn();return t.forEach((h,p)=>{let m=s.get(h);p.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(h)),p.isNoDocument()&&p.version.isEqual(J.min())?(e.removeEntry(h,p.readTime),a=a.insert(h,p)):!m.isValidDocument()||p.version.compareTo(m.version)>0||p.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(p),a=a.insert(h,p)):q("LocalStore","Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",p.version)}),{Ps:a,Is:i}})}function _b(n,e){let t=Q(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function wb(n,e){let t=Q(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):t.Ur.allocateTargetId(r).next(a=>(i=new _o(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function fd(n,e,t){return b(this,null,function*(){let r=Q(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i)))}catch(a){if(!So(a))throw a;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function pg(n,e,t){let r=Q(n),i=J.min(),s=ne();return r.persistence.runTransaction("Execute query","readwrite",a=>function(p,m,w){let y=Q(p),k=y._s.get(w);return k!==void 0?O.resolve(y.os.get(k)):y.Ur.getTargetData(m,w)}(r,a,Qt(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,h.targetId).next(p=>{s=p})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,t?i:J.min(),t?s:ne())).next(h=>(vb(r,OE(e),h),{documents:h,Ts:s})))}function vb(n,e,t){let r=n.us.get(e)||J.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}var bc=class{constructor(){this.activeTargetIds=jE()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var pd=class{constructor(){this.so=new bc,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new bc,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var md=class{_o(e){}shutdown(){}};var Tc=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var oc=null;function ah(){return oc===null?oc=function(){return 268435456+Math.round(2147483648*Math.random())}():oc++,"0x"+oc.toString(16)}var Ib={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var gd=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Ke="WebChannelConnection",yd=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,a){let h=ah(),p=this.xo(t,r.toUriEncodedString());q("RestConnection",`Sending RPC '${t}' ${h}:`,p,i);let m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,s,a),this.No(t,p,m,i).then(w=>(q("RestConnection",`Received RPC '${t}' ${h}: `,w),w),w=>{throw ji("RestConnection",`RPC '${t}' ${h} failed with error: `,w,"url: ",p,"request:",i),w})}Lo(t,r,i,s,a,h){return this.Mo(t,r,i,s,a)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Zi}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>t[a]=s),i&&i.headers.forEach((s,a)=>t[a]=s)}xo(t,r){let i=Ib[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let s=ah();return new Promise((a,h)=>{let p=new eh;p.setWithCredentials(!0),p.listenOnce(nh.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case so.NO_ERROR:let w=p.getResponseJson();q(Ke,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(w)),a(w);break;case so.TIMEOUT:q(Ke,`RPC '${e}' ${s} timed out`),h(new U(V.DEADLINE_EXCEEDED,"Request time out"));break;case so.HTTP_ERROR:let y=p.getStatus();if(q(Ke,`RPC '${e}' ${s} failed with status:`,y,"response text:",p.getResponseText()),y>0){let k=p.getResponseJson();Array.isArray(k)&&(k=k[0]);let x=k?.error;if(x&&x.status&&x.message){let L=function(N){let K=N.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(K)>=0?K:V.UNKNOWN}(x.status);h(new U(L,x.message))}else h(new U(V.UNKNOWN,"Server responded with status "+p.getStatus()))}else h(new U(V.UNAVAILABLE,"Connection failed."));break;default:H()}}finally{q(Ke,`RPC '${e}' ${s} completed.`)}});let m=JSON.stringify(i);q(Ke,`RPC '${e}' ${s} sending request:`,i),p.send(t,"POST",m,r,15)})}Bo(e,t,r){let i=ah(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=sh(),h=ih(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.xmlHttpFactory=new th({})),this.Oo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;let w=s.join("");q(Ke,`Creating RPC '${e}' stream ${i}: ${w}`,p);let y=a.createWebChannel(w,p),k=!1,x=!1,L=new gd({Io:N=>{x?q(Ke,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(k||(q(Ke,`Opening RPC '${e}' stream ${i} transport.`),y.open(),k=!0),q(Ke,`RPC '${e}' stream ${i} sending:`,N),y.send(N))},To:()=>y.close()}),B=(N,K,Y)=>{N.listen(K,Z=>{try{Y(Z)}catch(ue){setTimeout(()=>{throw ue},0)}})};return B(y,Ni.EventType.OPEN,()=>{x||(q(Ke,`RPC '${e}' stream ${i} transport opened.`),L.yo())}),B(y,Ni.EventType.CLOSE,()=>{x||(x=!0,q(Ke,`RPC '${e}' stream ${i} transport closed`),L.So())}),B(y,Ni.EventType.ERROR,N=>{x||(x=!0,ji(Ke,`RPC '${e}' stream ${i} transport errored:`,N),L.So(new U(V.UNAVAILABLE,"The operation could not be completed")))}),B(y,Ni.EventType.MESSAGE,N=>{var K;if(!x){let Y=N.data[0];fe(!!Y);let Z=Y,ue=Z.error||((K=Z[0])===null||K===void 0?void 0:K.error);if(ue){q(Ke,`RPC '${e}' stream ${i} received error:`,ue);let be=ue.status,se=function(I){let T=Re[I];if(T!==void 0)return Yg(T)}(be),S=ue.message;se===void 0&&(se=V.INTERNAL,S="Unknown error status: "+be+" with message "+ue.message),x=!0,L.So(new U(se,S)),y.close()}else q(Ke,`RPC '${e}' stream ${i} received:`,Y),L.bo(Y)}}),B(h,rh.STAT_EVENT,N=>{N.stat===ic.PROXY?q(Ke,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===ic.NOPROXY&&q(Ke,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{L.wo()},0),L}};function ch(){return typeof document<"u"?document:null}function $c(n){return new qh(n,!0)}var Ac=class{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Cc=class{constructor(e,t,r,i,s,a,h,p){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ac(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return b(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return b(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return b(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===V.RESOURCE_EXHAUSTED?(mn(t.toString()),mn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new U(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>b(this,null,function*(){this.state=0,this.start()}))}I_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},_d=class extends Cc{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=nb(this.serializer,e),r=function(s){if(!("targetChange"in s))return J.min();let a=s.targetChange;return a.targetIds&&a.targetIds.length?J.min():a.readTime?Jt(a.readTime):J.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=Wh(this.serializer),t.addTarget=function(s,a){let h,p=a.target;if(h=kh(p)?{documents:sb(s,p)}:{query:ob(s,p)._t},h.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){h.resumeToken=Xg(s,a.resumeToken);let m=$h(s,a.expectedCount);m!==null&&(h.expectedCount=m)}else if(a.snapshotVersion.compareTo(J.min())>0){h.readTime=Ic(s,a.snapshotVersion.toTimestamp());let m=$h(s,a.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,e);let r=cb(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=Wh(this.serializer),t.removeTarget=e,this.a_(t)}},wd=class extends Cc{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return fe(!!e.streamToken),this.lastStreamToken=e.streamToken,fe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=ib(e.writeResults,e.commitTime),r=Jt(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=Wh(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>rb(this.serializer,r))};this.a_(t)}};var vd=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new U(V.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,zh(t,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new U(V.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,h])=>this.connection.Lo(e,zh(t,r),i,a,h,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new U(V.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},Id=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(mn(t),this.D_=!1):q("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var Ed=class{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(()=>b(this,null,function*(){Qr(this)&&(q("RemoteStore","Restarting streams for network reachability change."),yield function(p){return b(this,null,function*(){let m=Q(p);m.L_.add(4),yield Po(m),m.q_.set("Unknown"),m.L_.delete(4),yield zc(m)})}(this))}))}),this.q_=new Id(r,i)}};function zc(n){return b(this,null,function*(){if(Qr(n))for(let e of n.B_)yield e(!0)})}function Po(n){return b(this,null,function*(){for(let e of n.B_)yield e(!1)})}function ay(n,e){let t=Q(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),sf(t)?rf(t):ts(t).r_()&&nf(t,e))}function tf(n,e){let t=Q(n),r=ts(t);t.N_.delete(e),r.r_()&&cy(t,e),t.N_.size===0&&(r.r_()?r.o_():Qr(t)&&t.q_.set("Unknown"))}function nf(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ts(n).A_(e)}function cy(n,e){n.Q_.xe(e),ts(n).R_(e)}function rf(n){n.Q_=new jh({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),ts(n).start(),n.q_.v_()}function sf(n){return Qr(n)&&!ts(n).n_()&&n.N_.size>0}function Qr(n){return Q(n).L_.size===0}function ly(n){n.Q_=void 0}function Eb(n){return b(this,null,function*(){n.q_.set("Online")})}function bb(n){return b(this,null,function*(){n.N_.forEach((e,t)=>{nf(n,e)})})}function Tb(n,e){return b(this,null,function*(){ly(n),sf(n)?(n.q_.M_(e),rf(n)):n.q_.set("Unknown")})}function Ab(n,e,t){return b(this,null,function*(){if(n.q_.set("Online"),e instanceof wc&&e.state===2&&e.cause)try{yield function(i,s){return b(this,null,function*(){let a=s.cause;for(let h of s.targetIds)i.N_.has(h)&&(yield i.remoteSyncer.rejectListen(h,a),i.N_.delete(h),i.Q_.removeTarget(h))})}(n,e)}catch(r){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Sc(n,r)}else if(e instanceof Ui?n.Q_.Ke(e):e instanceof _c?n.Q_.He(e):n.Q_.We(e),!t.isEqual(J.min()))try{let r=yield oy(n.localStore);t.compareTo(r)>=0&&(yield function(s,a){let h=s.Q_.rt(a);return h.targetChanges.forEach((p,m)=>{if(p.resumeToken.approximateByteSize()>0){let w=s.N_.get(m);w&&s.N_.set(m,w.withResumeToken(p.resumeToken,a))}}),h.targetMismatches.forEach((p,m)=>{let w=s.N_.get(p);if(!w)return;s.N_.set(p,w.withResumeToken(Je.EMPTY_BYTE_STRING,w.snapshotVersion)),cy(s,p);let y=new _o(w.target,p,m,w.sequenceNumber);nf(s,y)}),s.remoteSyncer.applyRemoteEvent(h)}(n,t))}catch(r){q("RemoteStore","Failed to raise snapshot:",r),yield Sc(n,r)}})}function Sc(n,e,t){return b(this,null,function*(){if(!So(e))throw e;n.L_.add(1),yield Po(n),n.q_.set("Offline"),t||(t=()=>oy(n.localStore)),n.asyncQueue.enqueueRetryable(()=>b(this,null,function*(){q("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield zc(n)}))})}function uy(n,e){return e().catch(t=>Sc(n,t,e))}function Gc(n){return b(this,null,function*(){let e=Q(n),t=ar(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Cb(e);)try{let i=yield _b(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,Sb(e,i)}catch(i){yield Sc(e,i)}hy(e)&&dy(e)})}function Cb(n){return Qr(n)&&n.O_.length<10}function Sb(n,e){n.O_.push(e);let t=ar(n);t.r_()&&t.V_&&t.m_(e.mutations)}function hy(n){return Qr(n)&&!ar(n).n_()&&n.O_.length>0}function dy(n){ar(n).start()}function Pb(n){return b(this,null,function*(){ar(n).p_()})}function Rb(n){return b(this,null,function*(){let e=ar(n);for(let t of n.O_)e.m_(t.mutations)})}function Db(n,e,t){return b(this,null,function*(){let r=n.O_.shift(),i=Lh.from(r,e,t);yield uy(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Gc(n)})}function kb(n,e){return b(this,null,function*(){e&&ar(n).V_&&(yield function(r,i){return b(this,null,function*(){if(function(a){return KE(a)&&a!==V.ABORTED}(i.code)){let s=r.O_.shift();ar(r).s_(),yield uy(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield Gc(r)}})}(n,e)),hy(n)&&dy(n)})}function mg(n,e){return b(this,null,function*(){let t=Q(n);t.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");let r=Qr(t);t.L_.add(3),yield Po(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield zc(t)})}function xb(n,e){return b(this,null,function*(){let t=Q(n);e?(t.L_.delete(2),yield zc(t)):e||(t.L_.add(2),yield Po(t),t.q_.set("Unknown"))})}function ts(n){return n.K_||(n.K_=function(t,r,i){let s=Q(t);return s.w_(),new _d(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:Eb.bind(null,n),Ro:bb.bind(null,n),mo:Tb.bind(null,n),d_:Ab.bind(null,n)}),n.B_.push(e=>b(this,null,function*(){e?(n.K_.s_(),sf(n)?rf(n):n.q_.set("Unknown")):(yield n.K_.stop(),ly(n))}))),n.K_}function ar(n){return n.U_||(n.U_=function(t,r,i){let s=Q(t);return s.w_(),new wd(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Pb.bind(null,n),mo:kb.bind(null,n),f_:Rb.bind(null,n),g_:Db.bind(null,n)}),n.B_.push(e=>b(this,null,function*(){e?(n.U_.s_(),yield Gc(n)):(yield n.U_.stop(),n.O_.length>0&&(q("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var bd=class n{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new pn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){let a=Date.now()+r,h=new n(e,t,a,i,s);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new U(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function of(n,e){if(mn("AsyncQueue",`${e}: ${n}`),So(n))return new U(V.UNAVAILABLE,`${e}: ${n}`);throw n}var Pc=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||z.comparator(t.key,r.key):(t,r)=>z.comparator(t.key,r.key),this.keyedMap=ao(),this.sortedSet=new Ie(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Rc=class{constructor(){this.W_=new Ie(z.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):H():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},Ji=class n{constructor(e,t,r,i,s,a,h,p,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,i,s){let a=[];return t.forEach(h=>{a.push({type:0,doc:h})}),new n(e,t,Pc.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var Td=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},Ad=class{constructor(){this.queries=gg(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=Q(t),s=i.queries;i.queries=gg(),s.forEach((a,h)=>{for(let p of h.j_)p.onError(r)})})(this,new U(V.ABORTED,"Firestore shutting down"))}};function gg(){return new or(n=>Ug(n),jc)}function Vb(n,e){return b(this,null,function*(){let t=Q(n),r=3,i=e.query,s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new Td,r=e.J_()?0:1);try{switch(r){case 0:s.z_=yield t.onListen(i,!0);break;case 1:s.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(a){let h=of(a,`Initialization of query '${Oi(e.query)}' failed`);return void e.onError(h)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&af(t)})}function Nb(n,e){return b(this,null,function*(){let t=Q(n),r=e.query,i=3,s=t.queries.get(r);if(s){let a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function Ob(n,e){let t=Q(n),r=!1;for(let i of e){let s=i.query,a=t.queries.get(s);if(a){for(let h of a.j_)h.X_(i)&&(r=!0);a.z_=i}}r&&af(t)}function Mb(n,e,t){let r=Q(n),i=r.queries.get(e);if(i)for(let s of i.j_)s.onError(t);r.queries.delete(e)}function af(n){n.Y_.forEach(e=>{e.next()})}var Cd,yg;(yg=Cd||(Cd={})).ea="default",yg.Cache="cache";var Sd=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new Ji(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=Ji.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Cd.Cache}};var Dc=class{constructor(e){this.key=e}},kc=class{constructor(e){this.key=e}},Pd=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ne(),this.mutatedKeys=ne(),this.Aa=Bg(e),this.Ra=new Pc(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Rc,i=t?t.Ra:this.Ra,s=t?t.mutatedKeys:this.mutatedKeys,a=i,h=!1,p=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((w,y)=>{let k=i.get(w),x=qc(this.query,y)?y:null,L=!!k&&this.mutatedKeys.has(k.key),B=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations),N=!1;k&&x?k.data.isEqual(x.data)?L!==B&&(r.track({type:3,doc:x}),N=!0):this.ga(k,x)||(r.track({type:2,doc:x}),N=!0,(p&&this.Aa(x,p)>0||m&&this.Aa(x,m)<0)&&(h=!0)):!k&&x?(r.track({type:0,doc:x}),N=!0):k&&!x&&(r.track({type:1,doc:k}),N=!0,(p||m)&&(h=!0)),N&&(x?(a=a.add(x),s=B?s.add(w):s.delete(w)):(a=a.delete(w),s=s.delete(w)))}),this.query.limit!==null)for(;a.size>this.query.limit;){let w=this.query.limitType==="F"?a.last():a.first();a=a.delete(w.key),s=s.delete(w.key),r.track({type:1,doc:w})}return{Ra:a,fa:r,ns:h,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let a=e.fa.G_();a.sort((w,y)=>function(x,L){let B=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return H()}};return B(x)-B(L)}(w.type,y.type)||this.Aa(w.doc,y.doc)),this.pa(r),i=i!=null&&i;let h=t&&!i?this.ya():[],p=this.da.size===0&&this.current&&!i?1:0,m=p!==this.Ea;return this.Ea=p,a.length!==0||m?{snapshot:new Ji(this.query,e.Ra,s,a,e.mutatedKeys,p===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Rc,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ne(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new kc(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Dc(r))}),t}ba(e){this.Ta=e.Ts,this.da=ne();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return Ji.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},Rd=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},Dd=class{constructor(e){this.key=e,this.va=!1}},kd=class{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new or(h=>Ug(h),jc),this.Ma=new Map,this.xa=new Set,this.Oa=new Ie(z.comparator),this.Na=new Map,this.La=new vo,this.Ba={},this.ka=new Map,this.qa=wo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function Lb(n,e,t=!0){return b(this,null,function*(){let r=_y(n),i,s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=yield fy(r,e,t,!0),i})}function Fb(n,e){return b(this,null,function*(){let t=_y(n);yield fy(t,e,!0,!1)})}function fy(n,e,t,r){return b(this,null,function*(){let i=yield wb(n.localStore,Qt(e)),s=i.targetId,a=t?n.sharedClientState.addLocalQueryTarget(s):"not-current",h;return r&&(h=yield Ub(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&ay(n.remoteStore,i),h})}function Ub(n,e,t,r,i){return b(this,null,function*(){n.Ka=(y,k,x)=>function(B,N,K,Y){return b(this,null,function*(){let Z=N.view.ma(K);Z.ns&&(Z=yield pg(B.localStore,N.query,!1).then(({documents:S})=>N.view.ma(S,Z)));let ue=Y&&Y.targetChanges.get(N.targetId),be=Y&&Y.targetMismatches.get(N.targetId)!=null,se=N.view.applyChanges(Z,B.isPrimaryClient,ue,be);return wg(B,N.targetId,se.wa),se.snapshot})}(n,y,k,x);let s=yield pg(n.localStore,e,!0),a=new Pd(e,s.Ts),h=a.ma(s.documents),p=yo.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),m=a.applyChanges(h,n.isPrimaryClient,p);wg(n,t,m.wa);let w=new Rd(e,t,a);return n.Fa.set(e,w),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),m.snapshot})}function Bb(n,e,t){return b(this,null,function*(){let r=Q(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!jc(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield fd(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&tf(r.remoteStore,i.targetId),xd(r,i.targetId)}).catch(Co))):(xd(r,i.targetId),yield fd(r.localStore,i.targetId,!0))})}function jb(n,e){return b(this,null,function*(){let t=Q(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),tf(t.remoteStore,r.targetId))})}function qb(n,e,t){return b(this,null,function*(){let r=Qb(n);try{let i=yield function(a,h){let p=Q(a),m=qe.now(),w=h.reduce((x,L)=>x.add(L.key),ne()),y,k;return p.persistence.runTransaction("Locally write mutations","readwrite",x=>{let L=yn(),B=ne();return p.cs.getEntries(x,w).next(N=>{L=N,L.forEach((K,Y)=>{Y.isValidDocument()||(B=B.add(K))})}).next(()=>p.localDocuments.getOverlayedDocuments(x,L)).next(N=>{y=N;let K=[];for(let Y of h){let Z=HE(Y,y.get(Y.key).overlayedDocument);Z!=null&&K.push(new _n(Y.key,Z,xg(Z.value.mapValue),Br.exists(!0)))}return p.mutationQueue.addMutationBatch(x,m,K,h)}).next(N=>{k=N;let K=N.applyToLocalDocumentSet(y,B);return p.documentOverlayCache.saveOverlays(x,N.batchId,K)})}).then(()=>({batchId:k.batchId,changes:qg(y)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,h,p){let m=a.Ba[a.currentUser.toKey()];m||(m=new Ie(ae)),m=m.insert(h,p),a.Ba[a.currentUser.toKey()]=m}(r,i.batchId,t),yield Ro(r,i.changes),yield Gc(r.remoteStore)}catch(i){let s=of(i,"Failed to persist write");t.reject(s)}})}function py(n,e){return b(this,null,function*(){let t=Q(n);try{let r=yield gb(t.localStore,e);e.targetChanges.forEach((i,s)=>{let a=t.Na.get(s);a&&(fe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?fe(a.va):i.removedDocuments.size>0&&(fe(a.va),a.va=!1))}),yield Ro(t,r,e)}catch(r){yield Co(r)}})}function _g(n,e,t){let r=Q(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((s,a)=>{let h=a.view.Z_(e);h.snapshot&&i.push(h.snapshot)}),function(a,h){let p=Q(a);p.onlineState=h;let m=!1;p.queries.forEach((w,y)=>{for(let k of y.j_)k.Z_(h)&&(m=!0)}),m&&af(p)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function $b(n,e,t){return b(this,null,function*(){let r=Q(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),s=i&&i.key;if(s){let a=new Ie(z.comparator);a=a.insert(s,Ct.newNoDocument(s,J.min()));let h=ne().add(s),p=new yc(J.min(),new Map,new Ie(ae),a,h);yield py(r,p),r.Oa=r.Oa.remove(s),r.Na.delete(e),cf(r)}else yield fd(r.localStore,e,!1).then(()=>xd(r,e,t)).catch(Co)})}function zb(n,e){return b(this,null,function*(){let t=Q(n),r=e.batch.batchId;try{let i=yield mb(t.localStore,e);gy(t,r,null),my(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Ro(t,i)}catch(i){yield Co(i)}})}function Gb(n,e,t){return b(this,null,function*(){let r=Q(n);try{let i=yield function(a,h){let p=Q(a);return p.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let w;return p.mutationQueue.lookupMutationBatch(m,h).next(y=>(fe(y!==null),w=y.keys(),p.mutationQueue.removeMutationBatch(m,y))).next(()=>p.mutationQueue.performConsistencyCheck(m)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(m,w,h)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,w)).next(()=>p.localDocuments.getDocuments(m,w))})}(r.localStore,e);gy(r,e,t),my(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Ro(r,i)}catch(i){yield Co(i)}})}function my(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function gy(n,e,t){let r=Q(n),i=r.Ba[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function xd(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||yy(n,r)})}function yy(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(tf(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),cf(n))}function wg(n,e,t){for(let r of t)r instanceof Dc?(n.La.addReference(r.key,e),Wb(n,r)):r instanceof kc?(q("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||yy(n,r.key)):H()}function Wb(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(q("SyncEngine","New document in limbo: "+t),n.xa.add(r),cf(n))}function cf(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new z(we.fromString(e)),r=n.qa.next();n.Na.set(r,new Dd(t)),n.Oa=n.Oa.insert(t,r),ay(n.remoteStore,new _o(Qt(Xd(t.path)),r,"TargetPurposeLimboResolution",Pg.oe))}}function Ro(n,e,t){return b(this,null,function*(){let r=Q(n),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((h,p)=>{a.push(r.Ka(p,e,t).then(m=>{var w;if((m||t)&&r.isPrimaryClient){let y=m?!m.fromCache:(w=t?.targetChanges.get(p.targetId))===null||w===void 0?void 0:w.current;r.sharedClientState.updateQueryState(p.targetId,y?"current":"not-current")}if(m){i.push(m);let y=ld.Wi(p.targetId,m);s.push(y)}}))}),yield Promise.all(a),r.Ca.d_(i),yield function(p,m){return b(this,null,function*(){let w=Q(p);try{yield w.persistence.runTransaction("notifyLocalViewChanges","readwrite",y=>O.forEach(m,k=>O.forEach(k.$i,x=>w.persistence.referenceDelegate.addReference(y,k.targetId,x)).next(()=>O.forEach(k.Ui,x=>w.persistence.referenceDelegate.removeReference(y,k.targetId,x)))))}catch(y){if(!So(y))throw y;q("LocalStore","Failed to update sequence numbers: "+y)}for(let y of m){let k=y.targetId;if(!y.fromCache){let x=w.os.get(k),L=x.snapshotVersion,B=x.withLastLimboFreeSnapshotVersion(L);w.os=w.os.insert(k,B)}}})}(r.localStore,s))})}function Hb(n,e){return b(this,null,function*(){let t=Q(n);if(!t.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());let r=yield sy(t.localStore,e);t.currentUser=e,function(s,a){s.ka.forEach(h=>{h.forEach(p=>{p.reject(new U(V.CANCELLED,a))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Ro(t,r.hs)}})}function Kb(n,e){let t=Q(n),r=t.Na.get(e);if(r&&r.va)return ne().add(r.key);{let i=ne(),s=t.Ma.get(e);if(!s)return i;for(let a of s){let h=t.Fa.get(a);i=i.unionWith(h.view.Va)}return i}}function _y(n){let e=Q(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=py.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Kb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=$b.bind(null,e),e.Ca.d_=Ob.bind(null,e.eventManager),e.Ca.$a=Mb.bind(null,e.eventManager),e}function Qb(n){let e=Q(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=zb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Gb.bind(null,e),e}var xc=class{constructor(){this.synchronizeTabs=!1}initialize(e){return b(this,null,function*(){this.serializer=$c(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return pb(this.persistence,new hd,e.initialUser,this.serializer)}createPersistence(e){return new od(cd.Zr,this.serializer)}createSharedClientState(e){return new pd}terminate(){return b(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Vd=class{initialize(e,t){return b(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_g(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Hb.bind(null,this.syncEngine),yield xb(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Ad}()}createDatastore(e){let t=$c(e.databaseInfo.databaseId),r=function(s){return new yd(s)}(e.databaseInfo);return function(s,a,h,p){return new vd(s,a,h,p)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,a,h){return new Ed(r,i,s,a,h)}(this.localStore,this.datastore,e.asyncQueue,t=>_g(this.syncEngine,t,0),function(){return Tc.D()?new Tc:new md}())}createSyncEngine(e,t){return function(i,s,a,h,p,m,w){let y=new kd(i,s,a,h,p,m);return w&&(y.Qa=!0),y}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return b(this,null,function*(){var e,t;yield function(i){return b(this,null,function*(){let s=Q(i);q("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield Po(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()})}};var Nd=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ga(this.observer.next,e)}error(e){this.observer.error?this.Ga(this.observer.error,e):mn("Uncaught Error in snapshot listener:",e.toString())}za(){this.muted=!0}Ga(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var Od=class{constructor(e,t,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Le.UNAUTHENTICATED,this.clientId=uc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>b(this,null,function*(){q("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(q("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new U(V.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new pn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=of(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function lh(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>b(this,null,function*(){r.isEqual(i)||(yield sy(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function vg(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Yb(n);q("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>mg(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>mg(e.remoteStore,i)),n._onlineComponents=e})}function Jb(n){return n.name==="FirebaseError"?n.code===V.FAILED_PRECONDITION||n.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function Yb(n){return b(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{yield lh(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!Jb(t))throw t;ji("Error using user provided cache. Falling back to memory cache: "+t),yield lh(n,new xc)}}else q("FirestoreClient","Using default OfflineComponentProvider"),yield lh(n,new xc);return n._offlineComponents})}function wy(n){return b(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),yield vg(n,n._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),yield vg(n,new Vd))),n._onlineComponents})}function Xb(n){return wy(n).then(e=>e.syncEngine)}function Ig(n){return b(this,null,function*(){let e=yield wy(n),t=e.eventManager;return t.onListen=Lb.bind(null,e.syncEngine),t.onUnlisten=Bb.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Fb.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=jb.bind(null,e.syncEngine),t})}function vy(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Eg=new Map;function Iy(n,e,t){if(!t)throw new U(V.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Zb(n,e,t,r){if(e===!0&&r===!0)throw new U(V.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function bg(n){if(!z.isDocumentKey(n))throw new U(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Tg(n){if(z.isDocumentKey(n))throw new U(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Wc(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":H()}function fo(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new U(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Wc(n);throw new U(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Vc=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new U(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new U(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Zb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vy((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new U(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new U(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new U(V.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Yi=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Vc({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new U(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new U(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Vc(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new uh;switch(r.type){case"firstParty":return new ph(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new U(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=Eg.get(t);r&&(q("ComponentProvider","Removing Datastore"),Eg.delete(t),r.terminate())}(this),Promise.resolve()}};function Ey(n,e,t,r={}){var i;let s=(n=fo(n,Yi))._getSettings(),a=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&ji("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=Le.MOCK_USER;else{h=mp(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new U(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new Le(m)}n._authCredentials=new hh(new lc(h,p))}}var Kr=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},at=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},rr=class n extends Kr{constructor(e,t,r){super(e,t,Xd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new at(this.firestore,null,new z(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function by(n,e,...t){if(n=je(n),Iy("collection","path",e),n instanceof Yi){let r=we.fromString(e,...t);return Tg(r),new rr(n,null,r)}{if(!(n instanceof at||n instanceof rr))throw new U(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(we.fromString(e,...t));return Tg(r),new rr(n.firestore,null,r)}}function Ty(n,e,...t){if(n=je(n),arguments.length===1&&(e=uc.newId()),Iy("doc","path",e),n instanceof Yi){let r=we.fromString(e,...t);return bg(r),new at(n,null,new z(r))}{if(!(n instanceof at||n instanceof rr))throw new U(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(we.fromString(e,...t));return bg(r),new at(n.firestore,n instanceof rr?n.converter:null,new z(r))}}var Md=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new Ac(this,"async_queue_retry"),this.Eu=()=>{let t=ch();t&&q("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()};let e=ch();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let t=ch();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let t=new pn;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return b(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!So(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let t=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(a){let h=a.message||"";return a.stack&&(h=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),h}(r);throw mn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=t,t}enqueueAfterDelay(e,t,r){this.du(),this.Tu.indexOf(e)>-1&&(t=0);let i=bd.createAndSchedule(this,e,t,r,s=>this.Vu(s));return this.lu.push(i),i}du(){this.hu&&H()}verifyOperationInProgress(){}mu(){return b(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let t of this.lu)if(t.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.lu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let t=this.lu.indexOf(e);this.lu.splice(t,1)}};function Ag(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}var Xi=class extends Yi{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=function(){return new Md}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||Sy(this),this._firestoreClient.terminate()}};function Ay(n,e){let t=typeof n=="object"?n:Pi(),r=typeof n=="string"?n:e||"(default)",i=Hs(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=pp("firestore");s&&Ey(i,...s)}return i}function Cy(n){return n._firestoreClient||Sy(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function Sy(n){var e,t,r;let i=n._freezeSettings(),s=function(h,p,m,w){return new wh(h,p,m,w.host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,vy(w.experimentalLongPollingOptions),w.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new Od(n._authCredentials,n._appCheckCredentials,n._queue,s),!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Io=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Je.fromBase64String(e))}catch(t){throw new U(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Je.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Eo=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new U(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var Nc=class{constructor(e){this._methodName=e}};var bo=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new U(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new U(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}};var To=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}};var eT=/^__.*__$/,Ld=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new _n(e,this.data,this.fieldMask,t,this.fieldTransforms):new Hr(e,this.data,t,this.fieldTransforms)}};function Py(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw H()}}var Fd=class n{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.yu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Oc(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(Py(this.wu)&&eT.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},Ud=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||$c(e)}Nu(e,t,r,i=!1){return new Fd({wu:e,methodName:t,Ou:r,path:ot.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ry(n){let e=n._freezeSettings(),t=$c(n._databaseId);return new Ud(n._databaseId,!!e.ignoreUndefinedProperties,t)}function tT(n,e,t,r,i,s={}){let a=n.Nu(s.merge||s.mergeFields?2:0,e,t,i);xy("Data must be an object, but it was:",a,r);let h=Dy(r,a),p,m;if(s.merge)p=new Ht(a.fieldMask),m=a.fieldTransforms;else if(s.mergeFields){let w=[];for(let y of s.mergeFields){let k=rT(e,y,t);if(!a.contains(k))throw new U(V.INVALID_ARGUMENT,`Field '${k}' is specified in your field mask but missing from your input data.`);sT(w,k)||w.push(k)}p=new Ht(w),m=a.fieldTransforms.filter(y=>p.covers(y.field))}else p=null,m=a.fieldTransforms;return new Ld(new At(h),p,m)}function nT(n,e,t,r=!1){return lf(t,n.Nu(r?4:3,e))}function lf(n,e){if(ky(n=je(n)))return xy("Unsupported field value:",e,n),Dy(n,e);if(n instanceof Nc)return function(r,i){if(!Py(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let s=[],a=0;for(let h of r){let p=lf(h,i.Fu(a));p==null&&(p={nullValue:"NULL_VALUE"}),s.push(p),a++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=je(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return qE(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=qe.fromDate(r);return{timestampValue:Ic(i.serializer,s)}}if(r instanceof qe){let s=new qe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ic(i.serializer,s)}}if(r instanceof bo)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Io)return{bytesValue:Xg(i.serializer,r._byteString)};if(r instanceof at){let s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Mu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ef(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof To)return function(a,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(p=>{if(typeof p!="number")throw h.Mu("VectorValues must only contain numeric values.");return Zd(h.serializer,p)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${Wc(r)}`)}(n,e)}function Dy(n,e){let t={};return Rg(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):es(n,(r,i)=>{let s=lf(i,e.bu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function ky(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof qe||n instanceof bo||n instanceof Io||n instanceof at||n instanceof Nc||n instanceof To)}function xy(n,e,t){if(!ky(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Wc(t);throw r==="an object"?e.Mu(n+" a custom object"):e.Mu(n+" "+r)}}function rT(n,e,t){if((e=je(e))instanceof Eo)return e._internalPath;if(typeof e=="string")return Vy(n,e);throw Oc("Field path arguments must be of type string or ",n,!1,void 0,t)}var iT=new RegExp("[~\\*/\\[\\]]");function Vy(n,e,t){if(e.search(iT)>=0)throw Oc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Eo(...e.split("."))._internalPath}catch{throw Oc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Oc(n,e,t,r,i){let s=r&&!r.isEmpty(),a=i!==void 0,h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(s||a)&&(p+=" (found",s&&(p+=` in field ${r}`),a&&(p+=` in document ${i}`),p+=")"),new U(V.INVALID_ARGUMENT,h+n+p)}function sT(n,e){return n.some(t=>t.isEqual(e))}var Mc=class{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new at(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Bd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(uf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Bd=class extends Mc{data(){return super.data()}};function uf(n,e){return typeof e=="string"?Vy(n,e):e instanceof Eo?e._internalPath:e._delegate._internalPath}function oT(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new U(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ao=class{},Lc=class extends Ao{};function Ny(n,e,...t){let r=[];e instanceof Ao&&r.push(e),r=r.concat(t),function(s){let a=s.filter(p=>p instanceof qd).length,h=s.filter(p=>p instanceof jd).length;if(a>1||a>0&&h>0)throw new U(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var jd=class n extends Lc{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return My(e._query,t),new Kr(e.firestore,e.converter,xh(e._query,t))}_parse(e){let t=Ry(e.firestore);return function(s,a,h,p,m,w,y){let k;if(m.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new U(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){Sg(y,w);let x=[];for(let L of y)x.push(Cg(p,s,L));k={arrayValue:{values:x}}}else k=Cg(p,s,y)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||Sg(y,w),k=nT(h,a,y,w==="in"||w==="not-in");return ke.create(m,w,k)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};var qd=class n extends Ao{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:St.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let a=i,h=s.getFlattenedFilters();for(let p of h)My(a,p),a=xh(a,p)}(e._query,t),new Kr(e.firestore,e.converter,xh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var $d=class n extends Lc{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,s,a){if(i.startAt!==null)throw new U(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new U(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zr(s,a)}(e._query,this._field,this._direction);return new Kr(e.firestore,e.converter,function(i,s){let a=i.explicitOrderBy.concat([s]);return new sr(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function Oy(n,e="asc"){let t=e,r=uf("orderBy",n);return $d._create(r,t)}function Cg(n,e,t){if(typeof(t=je(t))=="string"){if(t==="")throw new U(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fg(e)&&t.indexOf("/")!==-1)throw new U(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(we.fromString(t));if(!z.isDocumentKey(r))throw new U(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ym(n,new z(r))}if(t instanceof at)return Ym(n,t._key);throw new U(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wc(t)}.`)}function Sg(n,e){if(!Array.isArray(n)||n.length===0)throw new U(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function My(n,e){let t=function(i,s){for(let a of i)for(let h of a.getFlattenedFilters())if(s.indexOf(h.op)>=0)return h.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new U(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new U(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var zd=class{convertValue(e,t="none"){switch($r(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ir(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw H()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return es(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;let s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>ge(a.doubleValue));return new To(s)}convertGeoPoint(e){return new bo(ge(e.latitude),ge(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Kd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(mo(e));default:return null}}convertTimestamp(e){let t=gn(e);return new qe(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=we.fromString(e);fe(iy(r));let i=new pc(r.get(1),r.get(3)),s=new z(r.popFirst(5));return i.isEqual(t)||mn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function aT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Ur=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Fc=class extends Mc{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new Bi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(uf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},Bi=class extends Fc{data(e={}){return super.data(e)}},Gd=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Ur(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Bi(this._firestore,this._userDataWriter,r.key,r,new Ur(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new U(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(h=>{let p=new Bi(i._firestore,i._userDataWriter,h.doc.key,h.doc,new Ur(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(h=>s||h.type!==3).map(h=>{let p=new Bi(i._firestore,i._userDataWriter,h.doc.key,h.doc,new Ur(i._snapshot.mutatedKeys.has(h.doc.key),i._snapshot.fromCache),i.query.converter),m=-1,w=-1;return h.type!==0&&(m=a.indexOf(h.doc.key),a=a.delete(h.doc.key)),h.type!==1&&(a=a.add(h.doc),w=a.indexOf(h.doc.key)),{type:cT(h.type),doc:p,oldIndex:m,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function cT(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return H()}}var Uc=class extends zd{constructor(e){super(),this.firestore=e}convertBytes(e){return new Io(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new at(this.firestore,null,t)}};function Ly(n,e){let t=fo(n.firestore,Xi),r=Ty(n),i=aT(n.converter,e);return lT(t,[tT(Ry(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Br.exists(!1))]).then(()=>r)}function Fy(n,...e){var t,r,i;n=je(n);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||Ag(e[a])||(s=e[a],a++);let h={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Ag(e[a])){let y=e[a];e[a]=(t=y.next)===null||t===void 0?void 0:t.bind(y),e[a+1]=(r=y.error)===null||r===void 0?void 0:r.bind(y),e[a+2]=(i=y.complete)===null||i===void 0?void 0:i.bind(y)}let p,m,w;if(n instanceof at)m=fo(n.firestore,Xi),w=Xd(n._key.path),p={next:y=>{e[a]&&e[a](uT(m,n,y))},error:e[a+1],complete:e[a+2]};else{let y=fo(n,Kr);m=fo(y.firestore,Xi),w=y._query;let k=new Uc(m);p={next:x=>{e[a]&&e[a](new Gd(m,k,y,x))},error:e[a+1],complete:e[a+2]},oT(n._query)}return function(k,x,L,B){let N=new Nd(B),K=new Sd(x,N,L);return k.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return Vb(yield Ig(k),K)})),()=>{N.za(),k.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return Nb(yield Ig(k),K)}))}}(Cy(m),w,h,p)}function lT(n,e){return function(r,i){let s=new pn;return r.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return qb(yield Xb(r),i,s)})),s.promise}(Cy(n),e)}function uT(n,e,t){let r=t.docs.get(e._key),i=new Uc(n);return new Fc(n,i,e._key,r,new Ur(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(i){Zi=i})(Yn),Jn(new ft("firestore",(r,{instanceIdentifier:i,options:s})=>{let a=r.getProvider("app").getImmediate(),h=new Xi(new dh(r.getProvider("auth-internal")),new gh(r.getProvider("app-check-internal")),function(m,w){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new U(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pc(m.options.projectId,w)}(a,i),a);return s=Object.assign({useFetchStreams:t},s),h._setSettings(s),h},"PUBLIC").setMultipleInstances(!0)),Pe(Hm,"4.7.1",e),Pe(Hm,"4.7.1","esm2017")})();var wn=class{constructor(e){return e}},Uy="firestore",hf=class{constructor(){return Ks(Uy)}};var df=new lt("angularfire2.firestore-instances");function hT(n,e){let t=La(Uy,n,e);return t&&new wn(t)}function dT(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new wn(r)}}var fT={provide:hf,deps:[[new ut,df]]},pT={provide:wn,useFactory:hT,deps:[[new ut,df],cn]};function By(n,...e){return Pe("angularfire",kr.full,"fst"),yi([pT,fT,{provide:df,useFactory:dT(n),multi:!0,deps:[jn,Tr,ki,xr,[new ut,io],[new ut,Di],...e]}])}var Hc=Xe(Ly,!0);var Do=Xe(by,!0);var jy=Xe(Ay,!0);var qy=Xe(Fy,!0);var $y=Xe(Oy,!0);var zy=Xe(Ny,!0);var pt=class n{constructor(e,t){this.auth=e;this.firestore=t}userSubject=new ga(null);login(e,t){return qm(this.auth,e,t).then(r=>(this.userSubject.next(r.user),this.logLogin(e),r.user))}logout(){return $m(this.auth).then(()=>{this.userSubject.next(null)})}register(e,t){return Bm(this.auth,e,t).then(r=>(this.userSubject.next(r.user),r.user))}getUser(){return this.userSubject.asObservable()}logLogin(e){let t=Do(this.firestore,"logins");Hc(t,{fecha:new Date,user:e}).then(()=>console.log("Login registrado correctamente")).catch(r=>console.log("Error al registrar el login: ",r))}static \u0275fac=function(t){return new(t||n)(Lt(dn),Lt(wn))};static \u0275prov=rn({token:n,factory:n.\u0275fac,providedIn:"root"})};var Kc=class n{constructor(e,t){this.authService=e;this.router=t}userMail="";userPWD="";msjError="";Login(){this.authService.login(this.userMail,this.userPWD).then(()=>{ff.default.fire({icon:"success",title:"\xA1Bienvenido!",text:"Has iniciado sesi\xF3n con \xE9xito.",timer:2e3,showConfirmButton:!1}),this.router.navigate(["/home"])}).catch(e=>{this.manejarErrores(e)})}manejarErrores(e){switch(e.code){case"auth/invalid-email":this.msjError="Email inv\xE1lido. Por favor, verifica el formato del correo.";break;case"auth/user-not-found":this.msjError="Usuario no encontrado. Por favor, revisa tus credenciales.";break;case"auth/wrong-password":this.msjError="Contrase\xF1a incorrecta. Vuelve a intentarlo.";break;case"auth/missing-password":this.msjError="Se necesita la contrase\xF1a.";break;case"auth/invalid-credential":this.msjError="Las credenciales no son v\xE1lidas.";break;default:this.msjError="Error: "+e.message;break}ff.default.fire({icon:"error",title:"Error en el inicio de sesi\xF3n",text:this.msjError,showConfirmButton:!0})}goTo(e){this.router.navigate([e])}setQuickAccess(e,t){this.userMail=e,this.userPWD=t}static \u0275fac=function(t){return new(t||n)(oe(pt),oe(jt))};static \u0275cmp=Ze({type:n,selectors:[["app-login"]],standalone:!0,features:[et],decls:28,vars:2,consts:[[1,"overlay","d-flex","justify-content-center","align-items-center","vh-100"],[1,"card","p-4","shadow-lg",2,"width","450px","border-radius","20px"],[1,"text-center","mb-4"],[3,"ngSubmit"],[1,"form-group"],["for","nombre"],["type","email","id","nombre","name","email","placeholder","Ingrese su email","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","clave"],["type","password","id","clave","name","password","placeholder","Ingrese su contrase\xF1a","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-center","mb-3"],["id","olvido-contrasena",1,"text-decoration-none"],["type","submit",1,"btn","btn-warning","btn-block","rounded-pill","font-weight-bold"],[1,"text-center","mt-3"],["type","button",1,"btn","quick-access-btn","mr-2",3,"click"],["type","button",1,"btn","quick-access-btn",3,"click"],["id","registrarse",1,"text-decoration-none",3,"click"]],template:function(t,r){t&1&&(j(0,"div",0)(1,"div",1)(2,"h1",2),G(3,"Inicio Sesi\xF3n"),$(),j(4,"form",3),_e("ngSubmit",function(){return r.Login()}),j(5,"div",4)(6,"label",5),G(7,"Email"),$(),j(8,"input",6),Gn("ngModelChange",function(s){return zn(r.userMail,s)||(r.userMail=s),s}),$()(),j(9,"div",4)(10,"label",7),G(11,"Contrase\xF1a"),$(),j(12,"input",8),Gn("ngModelChange",function(s){return zn(r.userPWD,s)||(r.userPWD=s),s}),$()(),j(13,"div",9)(14,"a",10),G(15,"\xBFOlvid\xF3 su contrase\xF1a?"),$()(),j(16,"button",11),G(17,"Ingresar"),$(),j(18,"div",12)(19,"button",13),_e("click",function(){return r.setQuickAccess("lalala@gmail.com","123456")}),G(20,"Inicio Usuario 1"),$(),j(21,"button",14),_e("click",function(){return r.setQuickAccess("papapa@gmail.com","123456")}),G(22,"Inicio Usuario 2"),$()(),j(23,"div",12)(24,"span"),G(25,"\xBFNo tienes una cuenta?"),$(),j(26,"a",15),_e("click",function(){return r.goTo("/registro")}),G(27,"Registrarse"),$()()()()()),t&2&&(Se(8),$n("ngModel",r.userMail),Se(4),$n("ngModel",r.userPWD))},dependencies:[Bt,Ai,Da,Hn,Ti,Pa,js,Sr,Bs],styles:[".overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(#000000b3,#000000b3);z-index:-1}.card[_ngcontent-%COMP%]{background-color:#d0fac360;border:none;box-shadow:0 4px 8px #0003}.form-control[_ngcontent-%COMP%]{padding:15px;background-color:#fff;border-radius:10px;border:2px solid #ddd;transition:all .3s ease}.form-control[_ngcontent-%COMP%]:focus{border-color:#fc0;box-shadow:0 0 8px #ffcc0080}label[_ngcontent-%COMP%]{margin-bottom:5px;font-weight:700;display:block}#registrarse[_ngcontent-%COMP%], #olvido-contrasena[_ngcontent-%COMP%]{margin:5px 0;font-weight:700;color:#000;text-decoration:none}#registrarse[_ngcontent-%COMP%]:hover, #olvido-contrasena[_ngcontent-%COMP%]:hover{color:#fc0;cursor:pointer}span[_ngcontent-%COMP%]{font-weight:700}.alert[_ngcontent-%COMP%]{margin-top:10px;padding:10px;border-radius:5px}.quick-access-btn[_ngcontent-%COMP%]{background-color:#fc0;border-radius:50px;padding:10px 20px;font-weight:700;border:none;transition:all .3s ease;box-shadow:0 4px 6px #0003}.quick-access-btn[_ngcontent-%COMP%]:hover{background-color:#ffcc0083;transform:scale(1.05);box-shadow:0 6px 8px #0000004d}.quick-access-btn[_ngcontent-%COMP%]:focus{outline:none}"]})};var Jc=class n{constructor(e){this.firestore=e;this.loadMessages()}messagesSubject=new ga([]);getMessages(){return this.messagesSubject.asObservable()}loadMessages(){let e=Do(this.firestore,"messages"),t=zy(e,$y("timestamp"));qy(t,r=>{let i=r.docs.map(s=>He({id:s.id},s.data()));this.messagesSubject.next(i)})}sendMessage(e,t){let r=Do(this.firestore,"messages");Hc(r,{text:e,user:t,timestamp:new Date})}static \u0275fac=function(t){return new(t||n)(Lt(wn))};static \u0275prov=rn({token:n,factory:n.\u0275fac,providedIn:"root"})};function gT(n,e){if(n&1&&(j(0,"div",8)(1,"strong"),G(2),$(),G(3),j(4,"span",9),G(5),kf(6,"date"),$()()),n&2){let t=e.$implicit;Se(2),xl(t.user),Se(),va(": ",t.text," "),Se(2),xl(xf(6,3,t.timestamp==null?null:t.timestamp.toDate(),"shortTime"))}}function yT(n,e){if(n&1){let t=_i();j(0,"div",1)(1,"button",2),_e("click",function(){ht(t);let i=Ut();return dt(i.toggleChat())}),G(2,"x"),$(),j(3,"div",3),Cr(4,gT,7,6,"div",4),$(),j(5,"div",5)(6,"input",6),Gn("ngModelChange",function(i){ht(t);let s=Ut();return zn(s.newMessage,i)||(s.newMessage=i),dt(i)}),_e("keydown",function(i){ht(t);let s=Ut();return dt(s.handleKeydown(i))}),$(),j(7,"button",7),_e("click",function(){ht(t);let i=Ut();return dt(i.sendMessage())}),G(8,"Enviar"),$()()()}if(n&2){let t=Ut();Se(4),Ft("ngForOf",t.messages),Se(2),$n("ngModel",t.newMessage)}}var rs=class n{constructor(e,t){this.chatService=e;this.authService=t}messages=[];newMessage="";currentUser=null;isChatVisible=!0;chatVisibilityChange=new Ar;ngOnInit(){this.chatService.getMessages().subscribe(e=>{this.messages=e}),this.authService.getUser().subscribe(e=>{this.currentUser=e?e.email:null})}sendMessage(){this.newMessage.trim()!==""&&this.currentUser&&(this.chatService.sendMessage(this.newMessage,this.currentUser),this.newMessage="")}toggleChat(){this.isChatVisible=!this.isChatVisible,this.chatVisibilityChange.emit(this.isChatVisible)}handleKeydown(e){e.key==="Enter"&&(this.sendMessage(),e.preventDefault())}static \u0275fac=function(t){return new(t||n)(oe(Jc),oe(pt))};static \u0275cmp=Ze({type:n,selectors:[["app-chat"]],inputs:{isChatVisible:"isChatVisible"},outputs:{chatVisibilityChange:"chatVisibilityChange"},standalone:!0,features:[et],decls:1,vars:1,consts:[["class","chat-container",4,"ngIf"],[1,"chat-container"],[1,"close-btn",3,"click"],[1,"messages","chat-box"],["class","message",4,"ngFor","ngForOf"],[1,"input-container"],["placeholder","Escribe un mensaje...",3,"ngModelChange","keydown","ngModel"],[3,"click"],[1,"message"],[1,"timestamp"]],template:function(t,r){t&1&&Cr(0,yT,9,2,"div",0),t&2&&Ft("ngIf",r.isChatVisible)},dependencies:[Bt,Lf,wi,Ff,Ai,Hn,Ti,Sr],styles:['@charset "UTF-8";.chat-container[_ngcontent-%COMP%]{position:fixed;right:20px;bottom:20px;border:1px solid #ccc;border-radius:10px;padding:20px;max-width:400px;max-height:400px;background-color:#f9f9f9;box-shadow:0 4px 8px #0003;z-index:1000;overflow:hidden}.chat-box[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto;margin-bottom:10px}.input-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}input[_ngcontent-%COMP%]{flex:1;padding:10px;border:1px solid #ccc;border-radius:5px;margin-right:10px}button[_ngcontent-%COMP%]{padding:10px 15px;background-color:#5cb85c;color:#fff;border:none;border-radius:5px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#4cae4c}.close-btn[_ngcontent-%COMP%]{background-color:transparent;border:none;font-size:1.5em;font-weight:700;cursor:pointer;float:right}.close-btn[_ngcontent-%COMP%]:hover{color:red}.timestamp[_ngcontent-%COMP%]{font-size:.8em;color:gray;margin-left:5px}']})};var Hy=ma(qs());function _T(n,e){if(n&1&&(j(0,"h4"),G(1),$()),n&2){let t=Ut();Se(),va("bienvenido ",t.user==null?null:t.user.email,", divertite")}}var Yc=class n{constructor(e,t){this.authService=e;this.router=t}isLoggedIn=!1;user=null;showChat=!1;ngOnInit(){this.authService.getUser().subscribe(e=>{this.isLoggedIn=!!e,this.user=e})}toggleChat(){this.isLoggedIn?this.showChat=!this.showChat:Hy.default.fire({icon:"info",title:"Inicia sesi\xF3n",text:"Debes iniciar sesi\xF3n para usar el chat.",timer:3e3,showConfirmButton:!1})}goTo(e){this.router.navigate([`/juegos/${e}`])}static \u0275fac=function(t){return new(t||n)(oe(pt),oe(jt))};static \u0275cmp=Ze({type:n,selectors:[["app-home"]],standalone:!0,features:[et],decls:31,vars:2,consts:[[4,"ngIf"],[1,"seccion-juegos"],[1,"preguntados"],["src","https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQfcCz3JlM4xlxLvDWPSj71xusZCerXq0QEpg&s","alt","preguntados",3,"click"],["href","scores"],[1,"mayor-menor"],["src","https://resizer.glanacion.com/resizer/v2/un-juego-con-cartas-espanolas-sin-comodines-ni-L4YAHBM6IVBLNEJA5E33NQTKHI.jpg?auth=c4b877fbfbe96ead5811742b26ba93b66a4e97730d76bc15e6920f84a1745fd4&width=768&quality=70&smart=false","alt","mayor o menor",3,"click"],[1,"ahorcado"],["src","https://cdn-icons-png.flaticon.com/512/2241/2241387.png","alt","ahorcado",3,"click"],[1,"juego-nuevo"],["src","https://img.freepik.com/vector-gratis/hoja-trabajo-juego-combinacion-creativo-animales_23-2148782846.jpg","alt","juego nuevo"],[1,"chat-container"],["src","chat.png","alt","Mostrar chat",1,"chat-icon",3,"click"],[3,"chatVisibilityChange","isChatVisible"]],template:function(t,r){t&1&&(j(0,"h1"),G(1,"Seccion de Juegos"),$(),Cr(2,_T,2,1,"h4",0),j(3,"div",1)(4,"div",2)(5,"img",3),_e("click",function(){return r.goTo("preguntados")}),$(),j(6,"p"),G(7,"Preguntados"),$(),j(8,"a",4),G(9,"ver puntuacion"),$()(),j(10,"div",5)(11,"img",6),_e("click",function(){return r.goTo("mayor-menor")}),$(),j(12,"p"),G(13,"Mayor o Menor"),$(),j(14,"a",4),G(15,"ver puntuacion"),$()(),j(16,"div",7)(17,"img",8),_e("click",function(){return r.goTo("ahorcado")}),$(),j(18,"p"),G(19,"Ahorcado"),$(),j(20,"a",4),G(21,"ver puntuacion"),$()(),j(22,"div",9),sn(23,"img",10),j(24,"p"),G(25,"Juego Nuevo"),$(),j(26,"a",4),G(27,"ver puntuacion"),$()()(),j(28,"div",11)(29,"img",12),_e("click",function(){return r.toggleChat()}),$(),j(30,"app-chat",13),_e("chatVisibilityChange",function(s){return r.showChat=s}),$()()),t&2&&(Se(2),Ft("ngIf",r.isLoggedIn),Se(28),Ft("isChatVisible",r.showChat))},dependencies:[Bt,wi,rs],styles:['@charset "UTF-8";h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:80px;font-size:3.5em;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif}h4[_ngcontent-%COMP%]{text-align:center;margin-bottom:80px;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif}p[_ngcontent-%COMP%]{text-align:center;font-size:1.5em;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif;font-weight:700;margin:40px 0}.seccion-juegos[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:100px;padding:20px;align-items:center}.seccion-juegos[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:auto;border-radius:10px;box-shadow:0 4px 8px #00000080;transition:transform .3s ease}.seccion-juegos[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.05);cursor:pointer;box-shadow:0 4px 8px #000}a[_ngcontent-%COMP%]{background-color:#deb887;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif;color:#fff;padding:10px 20px;margin-left:110px;text-decoration:none;border-radius:15px;font-size:1.2em;transition:background-color .3s,transform .3s}a[_ngcontent-%COMP%]:hover{background-color:#e6ab5e;transform:scale(1.05)}a[_ngcontent-%COMP%]:focus{outline:none;box-shadow:0 0 0 2px #007bff80}.chat-container[_ngcontent-%COMP%]{position:fixed;right:20px;bottom:20px;max-width:300px;max-height:400px;width:250px;height:auto;border-radius:10px;background-color:#f9f9f9;border:1px solid #ccc;box-shadow:0 4px 8px #0003;z-index:1000}.chat-icon[_ngcontent-%COMP%]{cursor:pointer;width:50px;height:50px;position:absolute;right:10px;bottom:10px}app-chat[_ngcontent-%COMP%]{max-width:100%;max-height:100%;overflow:auto}.chat-box[_ngcontent-%COMP%]{max-height:250px;overflow-y:auto;margin-bottom:10px}.input-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:5px}']})};var Xc=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ze({type:n,selectors:[["app-error"]],standalone:!0,features:[et],decls:2,vars:0,template:function(t,r){t&1&&(j(0,"p"),G(1,"error works!"),$())}})};var Zc=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Ze({type:n,selectors:[["app-quien-soy"]],standalone:!0,features:[et],decls:20,vars:0,consts:[[1,"container","mt-5","p-5","bg-light","rounded-5","shadow-lg",2,"background-size","cover","background-position","center"],[1,"row","align-items-center","bg-card","rounded-5","shadow","p-4"],[1,"col-md-4","text-center"],["src","quiensoy.jpeg","alt","Juan Pablo",1,"img-fluid","rounded-circle","shadow",2,"max-width","320px"],[1,"col-md-8"],[1,"mb-4","text-dark","display-4"],[1,"lead","text-dark"]],template:function(t,r){t&1&&(j(0,"div",0)(1,"div",1)(2,"div",2),sn(3,"img",3),$(),j(4,"div",4)(5,"h1",5),G(6,"Me llamo Juan Pablo De Maio"),$(),j(7,"p",6)(8,"strong"),G(9,"Edad:"),$(),G(10," 19 a\xF1os"),sn(11,"br"),j(12,"strong"),G(13,"Estudios:"),$(),G(14," Actualmente estudio en la UTN, cursando la carrera de T\xE9cnico en Programaci\xF3n."),sn(15,"br"),j(16,"strong"),G(17,"Juego con Cartas o Im\xE1genes"),$(),sn(18,"br"),G(19," Descripci\xF3n: Pensaba en mostrar una serie de cartas que se van a dar vuelta, despu\xE9s se volver\xEDan a dar vuelta y el jugador deber\xEDa ir clickeando en el orden que se fueron mostrando las cartas. Se deber\xEDa subir la dificultad ocultando las cartas m\xE1s r\xE1pido e ir sumando puntos. "),$()()()())},styles:[".container[_ngcontent-%COMP%]{border-radius:30px;background-size:cover;background-position:center;overflow:hidden}.bg-card[_ngcontent-%COMP%]{background-color:#7dd86299;border:1px solid rgba(208,250,195,.8);box-shadow:0 4px 8px #0003;padding:20px}h1[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-size:2.5rem;font-weight:700;color:#343a40}p.lead[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:1.2rem;line-height:1.8;color:#343a40}.img-fluid[_ngcontent-%COMP%]{max-width:100%;height:320px;border:5px solid #ffc107}.rounded-5[_ngcontent-%COMP%]{border-radius:30px!important}.bg-light[_ngcontent-%COMP%]{background-color:#d0fac399!important}.shadow-lg[_ngcontent-%COMP%]{box-shadow:0 10px 20px #0003}"]})};var el=ma(qs());var tl=class n{constructor(e,t){this.authService=e;this.router=t}nuevoEmail="";nuevaClave="";loggedUser="";flagError=!1;msjError="";Register(){if(!this.nuevoEmail||!this.nuevaClave){el.default.fire({icon:"warning",title:"Campos incompletos",text:"Por favor, completa todos los campos.",showConfirmButton:!0});return}this.authService.register(this.nuevoEmail,this.nuevaClave).then(e=>{el.default.fire({icon:"success",title:"Registro exitoso",text:"Te has registrado con \xE9xito.",timer:2e3,showConfirmButton:!1}).then(()=>{this.router.navigate(["/home"])})}).catch(e=>{this.mensajeErrores(e)})}mensajeErrores(e){switch(e.code){case"auth/invalid-email":this.msjError="Email inv\xE1lido";break;case"auth/email-already-in-use":this.msjError="Este email ya est\xE1 en uso";break;case"auth/weak-password":this.msjError="La contrase\xF1a es muy d\xE9bil. Debe tener al menos 6 caracteres.";break;case"auth/missing-password":this.msjError="Se necesita una contrase\xF1a.";break;default:this.msjError="Error: "+e.message;break}el.default.fire({icon:"error",title:"Error en el registro",text:this.msjError,showConfirmButton:!0}),console.log("Error en el registro: "+e.code)}goTo(e){this.router.navigate([e])}static \u0275fac=function(t){return new(t||n)(oe(pt),oe(jt))};static \u0275cmp=Ze({type:n,selectors:[["app-registro"]],standalone:!0,features:[et],decls:24,vars:2,consts:[["registerForm","ngForm"],[1,"overlay","d-flex","justify-content-center","align-items-center","vh-100"],[1,"card","p-4","shadow-lg",2,"width","450px","border-radius","20px"],[1,"text-center","mb-4"],[3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","placeholder","Ingrese su email","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","clave"],["type","password","id","clave","name","clave","placeholder","Ingrese una contrase\xF1a","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"text-center","mb-3"],["id","olvido-contrasena",1,"text-decoration-none"],["type","submit",1,"btn","btn-warning","btn-block","rounded-pill","font-weight-bold"],[1,"text-center","mt-3"],["id","iniciar-sesion",1,"text-decoration-none",3,"click"]],template:function(t,r){if(t&1){let i=_i();j(0,"div",1)(1,"div",2)(2,"h1",3),G(3,"Registrarse"),$(),j(4,"form",4,0),_e("ngSubmit",function(){return ht(i),dt(r.Register())}),j(6,"div",5)(7,"label",6),G(8,"Email"),$(),j(9,"input",7),Gn("ngModelChange",function(a){return ht(i),zn(r.nuevoEmail,a)||(r.nuevoEmail=a),dt(a)}),$()(),j(10,"div",5)(11,"label",8),G(12,"Contrase\xF1a"),$(),j(13,"input",9),Gn("ngModelChange",function(a){return ht(i),zn(r.nuevaClave,a)||(r.nuevaClave=a),dt(a)}),$()(),j(14,"div",10)(15,"a",11),G(16,"\xBFOlvid\xF3 su contrase\xF1a?"),$()(),j(17,"button",12),G(18," Registrarse "),$(),j(19,"div",13)(20,"span"),G(21,"\xBFYa tienes una cuenta?"),$(),j(22,"a",14),_e("click",function(){return ht(i),dt(r.goTo("/login"))}),G(23,"Iniciar sesi\xF3n"),$()()()()()}t&2&&(Se(9),$n("ngModel",r.nuevoEmail),Se(4),$n("ngModel",r.nuevaClave))},dependencies:[Bt,Ai,Da,Hn,Ti,Pa,js,Sr,Bs],styles:[".overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(#000000b3,#000000b3);z-index:-1}.card[_ngcontent-%COMP%]{background-color:#d0fac360;border:none}.form-control[_ngcontent-%COMP%]{padding:20px;background-color:#fff;border-radius:10px;border:2px solid #ddd;transition:all .3s ease}.form-control[_ngcontent-%COMP%]:focus{border-color:#fc0;box-shadow:0 0 10px #ffcc0080}label[_ngcontent-%COMP%]{margin-left:10px;font-weight:700}#iniciar-sesion[_ngcontent-%COMP%], #olvido-contrasena[_ngcontent-%COMP%]{margin-left:10px;font-weight:700;color:#000;text-decoration:none}#iniciar-sesion[_ngcontent-%COMP%]:hover, #olvido-contrasena[_ngcontent-%COMP%]:hover{color:#fc0;cursor:pointer}span[_ngcontent-%COMP%]{font-weight:700}"]})};var wT=Rs(n=>!!n),Ky=(()=>{class n{router;auth;constructor(t,r){this.router=t,this.auth=r}canActivate=(t,r)=>{let i=t.data.authGuardPipe||(()=>wT);return Um(this.auth).pipe(Sf(1),i(t,r),Rs(s=>typeof s=="boolean"?s:Array.isArray(s)?this.router.createUrlTree(s):this.router.parseUrl(s)))};static \u0275fac=function(r){return new(r||n)(Lt(jt),Lt(dn))};static \u0275prov=rn({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var Qy=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"login",component:Kc},{path:"home",component:Yc},{path:"quien-soy",component:Zc},{path:"registro",component:tl},{path:"chat",component:rs,canActivate:[Ky]},{path:"juegos",loadChildren:()=>import("./chunk-V3EHSW5D.js").then(n=>n.JuegosModule)},{path:"**",component:Xc}];var Jy={projectId:"sala-juegos-ab9cb",appId:"1:639687055629:web:6ec8a897ad3ef0f988b844",storageBucket:"sala-juegos-ab9cb.appspot.com",apiKey:"AIzaSyD_AqRMAi5HFadu1U_VaF4wAZPHBskjQWs",authDomain:"sala-juegos-ab9cb.firebaseapp.com",messagingSenderId:"639687055629"};var Yy={providers:[Of({eventCoalescing:!0}),$f(Qy),Fp(()=>Up(Jy)),Fm(()=>jm()),By(()=>jy())]};var pf=ma(qs());function vT(n,e){n&1&&(j(0,"a",7),G(1,"PERFIL"),$())}function IT(n,e){if(n&1){let t=_i();j(0,"a",8),_e("click",function(){ht(t);let i=Ut();return dt(i.confirmLogout())}),G(1,"CERRAR SESION"),$()}}function ET(n,e){n&1&&(j(0,"a",9),G(1,"INICIAR SESION"),$())}var nl=class n{constructor(e,t){this.authService=e;this.router=t}isLoggedIn=!1;ngOnInit(){this.authService.getUser().subscribe(e=>{this.isLoggedIn=!!e})}confirmLogout(){pf.default.fire({title:"\xBFEst\xE1s seguro?",text:"Se cerrar\xE1 tu sesi\xF3n",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"S\xED, cerrar sesi\xF3n",cancelButtonText:"No, cancelar"}).then(e=>{e.isConfirmed&&this.logout()})}logout(){this.authService.logout().then(()=>{pf.default.fire("\xA1Cierre de sesi\xF3n exitoso!","Has cerrado sesi\xF3n correctamente.","success").then(()=>{this.goTo("/login")})})}goTo(e){this.router.navigate([e])}static \u0275fac=function(t){return new(t||n)(oe(pt),oe(jt))};static \u0275cmp=Ze({type:n,selectors:[["app-root"]],standalone:!0,features:[et],decls:10,vars:3,consts:[[1,"navbar"],["routerLink","home","routerLinkActive","active-route",1,"nav-link"],["routerLink","quien-soy","routerLinkActive","active-route",1,"nav-link"],[1,"nav-links-derecha"],["class","nav-link-perfil",4,"ngIf"],["class","nav-link-logout",3,"click",4,"ngIf"],["class","nav-link-login","routerLink","login","routerLinkActive","active-route",4,"ngIf"],[1,"nav-link-perfil"],[1,"nav-link-logout",3,"click"],["routerLink","login","routerLinkActive","active-route",1,"nav-link-login"]],template:function(t,r){t&1&&(j(0,"nav",0)(1,"a",1),G(2,"HOME"),$(),j(3,"a",2),G(4,"QUI\xC9N SOY"),$(),j(5,"div",3),Cr(6,vT,2,0,"a",4)(7,IT,2,0,"a",5)(8,ET,2,0,"a",6),$()(),sn(9,"router-outlet")),t&2&&(Se(6),Ft("ngIf",r.isLoggedIn),Se(),Ft("ngIf",r.isLoggedIn),Se(),Ft("ngIf",!r.isLoggedIn))},dependencies:[Bf,jf,qf,Bt,wi],styles:["a[_ngcontent-%COMP%]{text-decoration:none;color:#000;font-family:Lucida Sans,Lucida Sans Regular,Lucida Grande,Lucida Sans Unicode,Geneva,Verdana,sans-serif;background-color:#deb887;border-radius:20px;padding:5px 10px;transition:background-color .3s,transform .3s}a[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#e6ab5e}.navbar[_ngcontent-%COMP%]{display:flex;align-items:center;padding:20px}.nav-link[_ngcontent-%COMP%]{margin:0 50px;font-size:1.5em}.nav-links-derecha[_ngcontent-%COMP%]{margin-left:auto;display:flex;gap:100px}.nav-link-login[_ngcontent-%COMP%], .nav-link-perfil[_ngcontent-%COMP%], .nav-link-logout[_ngcontent-%COMP%]{font-size:1.5em}.nav-link-login[_ngcontent-%COMP%], .nav-link-logout[_ngcontent-%COMP%]{margin-right:50px}"]})};Uf(nl,Yy).catch(n=>console.error(n));
